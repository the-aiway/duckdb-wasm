"use strict";var duckdb=(()=>{var Qc=Object.create;var kt=Object.defineProperty;var Zc=Object.getOwnPropertyDescriptor;var eu=Object.getOwnPropertyNames;var tu=Object.getPrototypeOf,ru=Object.prototype.hasOwnProperty;var nu=(r,e,n)=>e in r?kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var su=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var Pe=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),iu=(r,e)=>{for(var n in e)kt(r,n,{get:e[n],enumerable:!0})},Ri=(r,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of eu(e))!ru.call(r,a)&&a!==n&&kt(r,a,{get:()=>e[a],enumerable:!(i=Zc(e,a))||i.enumerable});return r};var Ti=(r,e,n)=>(n=r!=null?Qc(tu(r)):{},Ri(e||!r||!r.__esModule?kt(n,"default",{value:r,enumerable:!0}):n,r)),ou=r=>Ri(kt({},"__esModule",{value:!0}),r);var ht=(r,e,n)=>(nu(r,typeof e!="symbol"?e+"":e,n),n);var ho=Pe(()=>{});var po=Pe(()=>{});var _o=Pe(()=>{});var mo=Pe(()=>{});var bo=Pe(()=>{});var wo=Pe((yo,Kn)=>{"use strict";var go=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r||(r=__filename)),function(e={}){function n(){return j.buffer!=he.buffer&&He(),he}function i(){return j.buffer!=he.buffer&&He(),je}function a(){return j.buffer!=he.buffer&&He(),ot}function l(){return j.buffer!=he.buffer&&He(),at}function u(){return j.buffer!=he.buffer&&He(),Qe}function h(){return j.buffer!=he.buffer&&He(),Xn}function d(){return j.buffer!=he.buffer&&He(),Jn}var c=e,A,H;c.ready=new Promise((t,s)=>{A=t,H=s});var U=Object.assign({},c),k=[],Z="./this.program",Q=(t,s)=>{throw s},ue=typeof window=="object",ie=typeof importScripts=="function",K=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",D=c.ENVIRONMENT_IS_PTHREAD||!1,re="";function de(t){return c.locateFile?c.locateFile(t,re):re+t}var w,T,L;if(K){var E=ho(),M=po();ie?re=M.dirname(re)+"/":re=__dirname+"/",w=(t,s)=>(t=cs(t)?new URL(t):M.normalize(t),E.readFileSync(t,s?void 0:"utf8")),L=t=>{var s=w(t,!0);return s.buffer||(s=new Uint8Array(s)),s},T=(t,s,o,f=!0)=>{t=cs(t)?new URL(t):M.normalize(t),E.readFile(t,f?void 0:"utf8",(p,_)=>{p?o(p):s(f?_.buffer:_)})},!c.thisProgram&&process.argv.length>1&&(Z=process.argv[1].replace(/\\/g,"/")),k=process.argv.slice(2),Q=(t,s)=>{throw process.exitCode=t,s},global.Worker=_o().Worker}else(ue||ie)&&(ie?re=self.location.href:typeof document<"u"&&document.currentScript&&(re=document.currentScript.src),r&&(re=r),re.startsWith("blob:")?re="":re=re.substr(0,re.replace(/[?#].*/,"").lastIndexOf("/")+1),K||(w=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.send(null),s.responseText},ie&&(L=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),T=(t,s,o)=>{var f=new XMLHttpRequest;f.open("GET",t,!0),f.responseType="arraybuffer",f.onload=()=>{if(f.status==200||f.status==0&&f.response){s(f.response);return}o()},f.onerror=o,f.send(null)}));K&&typeof performance>"u"&&(global.performance=mo().performance);var F=console.log.bind(console),V=console.error.bind(console);K&&(F=(...t)=>E.writeSync(1,t.join(" ")+`
`),V=(...t)=>E.writeSync(2,t.join(" ")+`
`));var S=c.print||F,O=c.printErr||V;Object.assign(c,U),U=null,c.arguments&&(k=c.arguments),c.thisProgram&&(Z=c.thisProgram),c.quit&&(Q=c.quit);var C;c.wasmBinary&&(C=c.wasmBinary);var j,le,we=!1,J;function ke(t,s){t||Re(s)}var he,je,ot,at,Qe,Xn,Ro,Jn;function He(){var t=j.buffer;c.HEAP8=he=new Int8Array(t),c.HEAP16=ot=new Int16Array(t),c.HEAPU8=je=new Uint8Array(t),c.HEAPU16=at=new Uint16Array(t),c.HEAP32=Qe=new Int32Array(t),c.HEAPU32=Xn=new Uint32Array(t),c.HEAPF32=Ro=new Float32Array(t),c.HEAPF64=Jn=new Float64Array(t)}var Qn=c.INITIAL_MEMORY||16777216;if(D)j=c.wasmMemory;else if(c.wasmMemory)j=c.wasmMemory;else if(j=new WebAssembly.Memory({initial:Qn/65536,maximum:65536,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw O("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),K&&O("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");He(),Qn=j.buffer.byteLength;var Zn=[],es=[],To=[],ts=[],rs=!1;function Bo(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)ss(c.preRun.shift());Gt(Zn)}function ns(){rs=!0,!D&&Gt(es)}function Uo(){D||Gt(To)}function Mo(){if(!D){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Lo(c.postRun.shift());Gt(ts)}}function ss(t){Zn.unshift(t)}function Oo(t){es.unshift(t)}function Lo(t){ts.unshift(t)}var Ze=0,sn=null,Et=null;function is(t){var s;Ze++,(s=c.monitorRunDependencies)==null||s.call(c,Ze)}function os(t){var o;if(Ze--,(o=c.monitorRunDependencies)==null||o.call(c,Ze),Ze==0&&(sn!==null&&(clearInterval(sn),sn=null),Et)){var s=Et;Et=null,s()}}function Re(t){var o;(o=c.onAbort)==null||o.call(c,t),t="Aborted("+t+")",O(t),we=!0,J=1,t+=". Build with -sASSERTIONS for more info.",rs&&___trap();var s=new WebAssembly.RuntimeError(t);throw H(s),s}var Ho="data:application/octet-stream;base64,",as=t=>t.startsWith(Ho),cs=t=>t.startsWith("file://"),ct;ct="./duckdb-coi.wasm",as(ct)||(ct=de(ct));function us(t){if(t==ct&&C)return new Uint8Array(C);if(L)return L(t);throw"both async and sync fetching of the wasm failed"}function Co(t){return!C&&(ue||ie)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw`failed to load wasm binary file at '${t}'`;return s.arrayBuffer()}).catch(()=>us(t)):Promise.resolve().then(()=>us(t))}function ls(t,s,o){return Co(t).then(f=>WebAssembly.instantiate(f,s)).then(o,f=>{O(`failed to asynchronously prepare wasm: ${f}`),Re(f)})}function Po(t,s,o,f){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!as(s)&&!K&&typeof fetch=="function"?fetch(s,{credentials:"same-origin"}).then(p=>{var _=WebAssembly.instantiateStreaming(p,o);return _.then(f,function(m){return O(`wasm streaming compile failed: ${m}`),O("falling back to ArrayBuffer instantiation"),ls(s,o,f)})}):ls(s,o,f)}function No(){var t={a:Za};function s(f,p){return B=f.exports,B=qc(B),Yo(B.tb),ln=B.Da,Oo(B.Ba),le=p,os("wasm-instantiate"),B}is("wasm-instantiate");function o(f){s(f.instance,f.module)}if(c.instantiateWasm)try{return c.instantiateWasm(t,s)}catch(f){O(`Module.instantiateWasm callback failed with error: ${f}`),H(f)}return Po(C,ct,t,o).catch(H),{}}var Fe,ut,fs={2501485:(t,s,o,f)=>{var p=ee(t);if(typeof XMLHttpRequest>"u")return 0;let _=new XMLHttpRequest;_.open(ee(f),p,!1),_.responseType="arraybuffer";for(var m=0,g=s;m<g*2;){var b=u()[o/4+m>>>0],x=u()[o/4+m+1>>>0];try{var R=encodeURI(ee(b));R==="Host"&&(R="X-Host-Override"),R==="User-Agent"&&(R="X-user-agent"),R==="Authorization"?_.setRequestHeader(R,ee(x)):_.setRequestHeader(R,encodeURI(ee(x)))}catch(oe){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",oe)}m+=2}try{_.send(null)}catch{return 0}if(_.status>=400)return 0;for(var W=_.response,g=W.byteLength,$=Ce(g+4),X=new Uint8Array(W),G=0;G<g;G++)c.HEAPU8[G+$+4]=X[G];var I=new Uint8Array(4);return I[0]=g%256,g-=I[0],g/=256,I[1]=g%256,g-=I[1],g/=256,I[2]=g%256,g-=I[2],g/=256,I[3]=g%256,g-=I[3],g/=256,c.HEAPU8.set(I,$),$},2502892:(t,s,o,f,p,_)=>{var m=ee(t);if(typeof XMLHttpRequest>"u")return 0;let b=new XMLHttpRequest;b.open(ee(f),m,!1),b.responseType="arraybuffer";for(var x=0,I=s;x<I*2;){var R=u()[o/4+x>>>0],W=u()[o/4+x+1>>>0];try{var g=encodeURI(ee(R));g==="Host"&&(g="X-Host-Override"),g==="User-Agent"&&(g="X-user-agent"),g==="Authorization"?b.setRequestHeader(g,ee(W)):b.setRequestHeader(g,encodeURI(ee(W)))}catch(P){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",P)}x+=2}try{for(var $=new Uint8Array(_),X=0;X<_;X++)$[X]=c.HEAPU8[X+p];b.send($)}catch{return 0}if(b.status>=400)return 0;for(var G=Uint8Array.from(Array.from(b.getResponseHeader("Etag")).map(P=>P.charCodeAt(0))),I=G.byteLength,oe=Ce(I+4),ge=new Uint8Array(G),X=0;X<I;X++)c.HEAPU8[X+oe+4]=ge[X];var v=new Uint8Array(4);return v[0]=I%256,I-=v[0],I/=256,v[1]=I%256,I-=v[1],I/=256,v[2]=I%256,I-=v[2],I/=256,v[3]=I%256,I-=v[3],I/=256,c.HEAPU8.set(v,oe),oe},2504512:(t,s,o,f)=>{var p=ee(t);if(typeof XMLHttpRequest>"u")return 0;let _=new XMLHttpRequest;_.open(ee(f),p,!1),_.responseType="arraybuffer";for(var m=0,g=s;m<g*2;){var b=u()[o/4+m>>>0],x=u()[o/4+m+1>>>0];try{var R=encodeURI(ee(b));R==="Host"&&(R="X-Host-Override"),R==="User-Agent"&&(R="X-user-agent"),R==="Authorization"?_.setRequestHeader(R,ee(x)):_.setRequestHeader(R,encodeURI(ee(x)))}catch(v){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",v)}m+=2}try{_.send(null)}catch{return 0}if(_.status>=400)return 0;for(var W=_.response,g=W.byteLength,$=Ce(g+8),X=new Uint8Array(W),G=0;G<g;G++)c.HEAPU8[G+$+8]=X[G];var I=new Uint8Array(4);I[0]=g%256,g-=I[0],g/=256,I[1]=g%256,g-=I[1],g/=256,I[2]=g%256,g-=I[2],g/=256,I[3]=g%256,g-=I[3],g/=256,c.HEAPU8.set(I,$+4);var oe=Uint8Array.from(Array.from(_.getAllResponseHeaders()).map(v=>v.charCodeAt(0)));g=oe.byteLength;for(var ge=Ce(g+8),G=0;G<g;G++)c.HEAPU8[G+ge+8]=oe[G];return I=new Uint8Array(4),I[0]=g%256,g-=I[0],g/=256,I[1]=g%256,g-=I[1],g/=256,I[2]=g%256,g-=I[2],g/=256,I[3]=g%256,g-=I[3],g/=256,c.HEAPU8.set(I,ge+4),g=ge,I=new Uint8Array(4),I[0]=g%256,g-=I[0],g/=256,I[1]=g%256,g-=I[1],g/=256,I[2]=g%256,g-=I[2],g/=256,I[3]=g%256,g-=I[3],g/=256,c.HEAPU8.set(I,$),$},2506796:(t,s,o,f)=>{var p=ee(t);if(typeof XMLHttpRequest>"u")return 0;let _=new XMLHttpRequest;_.open(ee(f),p,!1),_.responseType="arraybuffer";for(var m=0,g=s;m<g*2;){var b=u()[o/4+m>>>0],x=u()[o/4+m+1>>>0];try{var R=encodeURI(ee(b));R==="Host"&&(R="X-Host-Override"),R==="User-Agent"&&(R="X-user-agent"),R==="Authorization"?_.setRequestHeader(R,ee(x)):_.setRequestHeader(R,encodeURI(ee(x)))}catch(oe){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",oe)}m+=2}try{_.send(null)}catch{return 0}if(_.status>=400)return 0;for(var W=_.response,g=W.byteLength,$=Ce(g+4),X=new Uint8Array(W),G=0;G<g;G++)c.HEAPU8[G+$+4]=X[G];var I=new Uint8Array(4);return I[0]=g%256,g-=I[0],g/=256,I[1]=g%256,g-=I[1],g/=256,I[2]=g%256,g-=I[2],g/=256,I[3]=g%256,g-=I[3],g/=256,c.HEAPU8.set(I,$),$},2508203:(t,s,o,f,p,_)=>{var m=ee(t);if(typeof XMLHttpRequest>"u")return 0;let b=new XMLHttpRequest;b.open(ee(f),m,!1),b.responseType="arraybuffer";for(var x=0,I=s;x<I*2;){var R=u()[o/4+x>>>0],W=u()[o/4+x+1>>>0];try{var g=encodeURI(ee(R));g==="Host"&&(g="X-Host-Override"),g==="User-Agent"&&(g="X-user-agent"),g==="Authorization"?b.setRequestHeader(g,ee(W)):b.setRequestHeader(g,encodeURI(ee(W)))}catch(P){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",P)}x+=2}try{for(var $=new Uint8Array(_),X=0;X<_;X++)$[X]=c.HEAPU8[X+p];b.send($)}catch{return 0}if(b.status>=400)return 0;for(var G=b.response,I=G.byteLength,oe=Ce(I+4),ge=new Uint8Array(G),X=0;X<I;X++)c.HEAPU8[X+oe+4]=ge[X];var v=new Uint8Array(4);return v[0]=I%256,I-=v[0],I/=256,v[1]=I%256,I-=v[1],I/=256,v[2]=I%256,I-=v[2],I/=256,v[3]=I%256,I-=v[3],I/=256,c.HEAPU8.set(v,oe),oe}};function on(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var an=t=>{t.terminate(),t.onmessage=s=>{}},Wo=t=>{var s=z.pthreads[t];delete z.pthreads[t],an(s),wn(t),z.runningWorkers.splice(z.runningWorkers.indexOf(s),1),s.pthread_ptr=0},Vo=t=>{var s=z.pthreads[t];s.postMessage({cmd:"cancel"})},ds=t=>{var s=z.pthreads[t];z.returnWorkerToPool(s)},hs=(t,s)=>(i().fill(0,t,t+s),t),ps=t=>{var s=z.getNewWorker();if(!s)return 6;z.runningWorkers.push(s),z.pthreads[t.pthread_ptr]=s,s.pthread_ptr=t.pthread_ptr;var o={cmd:"run",start_routine:t.startRoutine,arg:t.arg,pthread_ptr:t.pthread_ptr};return K&&s.unref(),s.postMessage(o,t.transferList),0},_s=0,$t=()=>ys||_s>0,$o=t=>{var s=Xt(),o=t();return xt(s),o},St=(t,s)=>s+2097152>>>0<4194305-!!t?(t>>>0)+s*4294967296:NaN,q=(t,s,o,...f)=>$o(()=>{for(var p=f.length,_=Dt(p*8),m=_>>>3,b=0;b<f.length;b++){var x=f[b];d()[m+b>>>0]=x}return Ai(t,s,p,_,o)});function ms(t){var s;if(D)return q(0,0,1,t);J=t,$t()||(z.terminateAllThreads(),(s=c.onExit)==null||s.call(c,t),we=!0),Q(t,new on(t))}var bs=(t,s)=>{if(J=t,D)throw gs(t),"unwind";ms(t)},cn=bs,un=t=>{if(t instanceof on||t=="unwind")return J;Q(1,t)},z={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){D?z.initWorker():z.initMainThread()},initMainThread(){for(var t=4;t--;)z.allocateUnusedWorker();ss(()=>{is("loading-workers"),z.loadWasmModuleToAllWorkers(()=>os("loading-workers"))})},initWorker(){ys=!1},setExitStatus:t=>J=t,terminateAllThreads__deps:["$terminateWorker"],terminateAllThreads:()=>{for(var t of z.runningWorkers)an(t);for(var t of z.unusedWorkers)an(t);z.unusedWorkers=[],z.runningWorkers=[],z.pthreads=[]},returnWorkerToPool:t=>{var s=t.pthread_ptr;delete z.pthreads[s],z.unusedWorkers.push(t),z.runningWorkers.splice(z.runningWorkers.indexOf(t),1),t.pthread_ptr=0,wn(s)},receiveObjectTransfer(t){},threadInitTLS(){z.tlsInitFunctions.forEach(t=>t())},loadWasmModuleToWorker:t=>new Promise(s=>{t.onmessage=_=>{var m=_.data,b=m.cmd;if(m.targetThread&&m.targetThread!=qt()){var x=z.pthreads[m.targetThread];x?x.postMessage(m,m.transferList):O(`Internal error! Worker sent a message "${b}" to target pthread ${m.targetThread}, but that thread no longer exists!`);return}b==="checkMailbox"?Kt():b==="spawnThread"?ps(m):b==="cleanupThread"?ds(m.thread):b==="killThread"?Wo(m.thread):b==="cancelThread"?Vo(m.thread):b==="loaded"?(t.loaded=!0,K&&!t.pthread_ptr&&t.unref(),s(t)):b==="alert"?alert(`Thread ${m.threadId}: ${m.text}`):m.target==="setimmediate"?t.postMessage(m):b==="callHandler"?c[m.handler](...m.args):b&&O(`worker sent an unknown command ${b}`)},t.onerror=_=>{var m="worker sent an error!";throw O(`${m} ${_.filename}:${_.lineno}: ${_.message}`),_},K&&(t.on("message",_=>t.onmessage({data:_})),t.on("error",_=>t.onerror(_)));var o=[],f=["onExit","onAbort","print","printErr"];for(var p of f)c.hasOwnProperty(p)&&o.push(p);t.postMessage({cmd:"load",handlers:o,urlOrBlob:c.mainScriptUrlOrBlob||r,wasmMemory:j,wasmModule:le})}),loadWasmModuleToAllWorkers(t){if(D)return t();Promise.all(z.unusedWorkers.map(z.loadWasmModuleToWorker)).then(t)},allocateUnusedWorker(){var t,s=de("duckdb_wasm.worker.js");t=new Worker(s),z.unusedWorkers.push(t)},getNewWorker(){return z.unusedWorkers.length==0&&(z.allocateUnusedWorker(),z.loadWasmModuleToWorker(z.unusedWorkers[0])),z.unusedWorkers.pop()}};c.PThread=z;var Gt=t=>{for(;t.length>0;)t.shift()(c)},Go=()=>{var t=qt(),s=h()[t+52>>>2>>>0],o=h()[t+56>>>2>>>0],f=s-o;xi(s,f),xt(s)};c.establishStackSpace=Go;function gs(t){if(D)return q(1,0,0,t);cn(t)}var ln,jo=t=>ln.get(t),zo=(t,s)=>{var o=jo(t)(s);function f(p){$t()?z.setExitStatus(p):vn(p)}f(o)};c.invokeEntryPoint=zo;var ys=c.noExitRuntime||!0,Yo=t=>z.tlsInitFunctions.push(t);function Ko(t){t>>>=0,Si(t,!ie,1,!ue,1048576,!1),z.threadInitTLS()}function qo(t){t>>>=0,D?postMessage({cmd:"cleanupThread",thread:t}):ds(t)}function ws(t,s,o,f){return D?q(2,0,1,t,s,o,f):vs(t,s,o,f)}function vs(t,s,o,f){if(t>>>=0,s>>>=0,o>>>=0,f>>>=0,typeof SharedArrayBuffer>"u")return O("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var p=[],_=0;if(D&&(p.length===0||_))return ws(t,s,o,f);if(_)return _;var m={startRoutine:o,pthread_ptr:t,arg:f,transferList:p};return D?(m.cmd="spawnThread",postMessage(m,p),0):ps(m)}function Es(){Re("missing function: $SOCKFS")}Es.stub=!0;function fn(){Re("missing function: $FS")}fn.stub=!0;var lt=t=>{var s=Es.getSocket(t);if(!s)throw new fn.ErrnoError(8);return s},dn=t=>(t&255)+"."+(t>>8&255)+"."+(t>>16&255)+"."+(t>>24&255),Ss=t=>{var s="",o=0,f=0,p=0,_=0,m=0,b=0,x=[t[0]&65535,t[0]>>16,t[1]&65535,t[1]>>16,t[2]&65535,t[2]>>16,t[3]&65535,t[3]>>16],R=!0,W="";for(b=0;b<5;b++)if(x[b]!==0){R=!1;break}if(R){if(W=dn(x[6]|x[7]<<16),x[5]===-1)return s="::ffff:",s+=W,s;if(x[5]===0)return s="::",W==="0.0.0.0"&&(W=""),W==="0.0.0.1"&&(W="1"),s+=W,s}for(o=0;o<8;o++)x[o]===0&&(o-p>1&&(m=0),p=o,m++),m>f&&(f=m,_=o-f+1);for(o=0;o<8;o++){if(f>1&&x[o]===0&&o>=_&&o<_+f){o===_&&(s+=":",_===0&&(s+=":"));continue}s+=Number(_ntohs(x[o]&65535)).toString(16),s+=o<7?":":""}return s},As=(t,s)=>{var o=a()[t>>>1>>>0],f=_ntohs(l()[t+2>>>1>>>0]),p;switch(o){case 2:if(s!==16)return{errno:28};p=u()[t+4>>>2>>>0],p=dn(p);break;case 10:if(s!==28)return{errno:28};p=[u()[t+8>>>2>>>0],u()[t+12>>>2>>>0],u()[t+16>>>2>>>0],u()[t+20>>>2>>>0]],p=Ss(p);break;default:return{errno:5}}return{family:o,addr:p,port:f}},jt=t=>{for(var s=t.split("."),o=0;o<4;o++){var f=Number(s[o]);if(isNaN(f))return null;s[o]=f}return(s[0]|s[1]<<8|s[2]<<16|s[3]<<24)>>>0},zt=t=>parseInt(t),hn=t=>{var s,o,f,p,_=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,m=[];if(!_.test(t))return null;if(t==="::")return[0,0,0,0,0,0,0,0];for(t.startsWith("::")?t=t.replace("::","Z:"):t=t.replace("::",":Z:"),t.indexOf(".")>0?(t=t.replace(new RegExp("[.]","g"),":"),s=t.split(":"),s[s.length-4]=zt(s[s.length-4])+zt(s[s.length-3])*256,s[s.length-3]=zt(s[s.length-2])+zt(s[s.length-1])*256,s=s.slice(0,s.length-2)):s=t.split(":"),f=0,p=0,o=0;o<s.length;o++)if(typeof s[o]=="string")if(s[o]==="Z"){for(p=0;p<8-s.length+1;p++)m[o+p]=0;f=p-1}else m[o+f]=_htons(parseInt(s[o],16));else m[o+f]=s[o];return[m[1]<<16|m[0],m[3]<<16|m[2],m[5]<<16|m[4],m[7]<<16|m[6]]},ve={address_map:{id:1,addrs:{},names:{}},lookup_name(t){var s=jt(t);if(s!==null||(s=hn(t),s!==null))return t;var o;if(ve.address_map.addrs[t])o=ve.address_map.addrs[t];else{var f=ve.address_map.id++;ke(f<65535,"exceeded max address mappings of 65535"),o="172.29."+(f&255)+"."+(f&65280),ve.address_map.names[o]=t,ve.address_map.addrs[t]=o}return o},lookup_addr(t){return ve.address_map.names[t]?ve.address_map.names[t]:null}},Is=(t,s,o)=>{if(o&&t===0)return null;var f=As(t,s);if(f.errno)throw new fn.ErrnoError(f.errno);return f.addr=ve.lookup_addr(f.addr)||f.addr,f};function Fs(t,s,o,f,p,_){if(D)return q(3,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0;var m=lt(t),b=Is(s,o);return m.sock_ops.bind(m,b.addr,b.port),0}function xs(t,s,o,f,p,_){if(D)return q(4,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0;var m=lt(t),b=Is(s,o);return m.sock_ops.connect(m,b.addr,b.port),0}function Ds(t,s,o,f){if(D)return q(5,0,1,t,s,o,f);s>>>=0}var ks=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Rs=(t,s,o)=>{s>>>=0;for(var f=s+o,p=s;t[p]&&!(p>=f);)++p;if(p-s>16&&t.buffer&&ks)return ks.decode(t.slice(s,p));for(var _="";s<p;){var m=t[s++];if(!(m&128)){_+=String.fromCharCode(m);continue}var b=t[s++]&63;if((m&224)==192){_+=String.fromCharCode((m&31)<<6|b);continue}var x=t[s++]&63;if((m&240)==224?m=(m&15)<<12|b<<6|x:m=(m&7)<<18|b<<12|x<<6|t[s++]&63,m<65536)_+=String.fromCharCode(m);else{var R=m-65536;_+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return _},ee=(t,s)=>(t>>>=0,t?Rs(i(),t,s):""),ft={varargs:void 0,get(){var t=u()[+ft.varargs>>>2>>>0];return ft.varargs+=4,t},getp(){return ft.get()},getStr(t){var s=ee(t);return s}};function Ts(t,s,o){return D?q(6,0,1,t,s,o):(o>>>=0,ft.varargs=o,0)}function Bs(t,s){if(D)return q(7,0,1,t,s);s>>>=0}function Us(t,s,o){if(D)return q(8,0,1,t,s,o);var f=St(s,o)}var pn=t=>{for(var s=0,o=0;o<t.length;++o){var f=t.charCodeAt(o);f<=127?s++:f<=2047?s+=2:f>=55296&&f<=57343?(s+=4,++o):s+=3}return s};c.lengthBytesUTF8=pn;var Ms=(t,s,o,f)=>{if(o>>>=0,!(f>0))return 0;for(var p=o,_=o+f-1,m=0;m<t.length;++m){var b=t.charCodeAt(m);if(b>=55296&&b<=57343){var x=t.charCodeAt(++m);b=65536+((b&1023)<<10)|x&1023}if(b<=127){if(o>=_)break;s[o++>>>0]=b}else if(b<=2047){if(o+1>=_)break;s[o++>>>0]=192|b>>6,s[o++>>>0]=128|b&63}else if(b<=65535){if(o+2>=_)break;s[o++>>>0]=224|b>>12,s[o++>>>0]=128|b>>6&63,s[o++>>>0]=128|b&63}else{if(o+3>=_)break;s[o++>>>0]=240|b>>18,s[o++>>>0]=128|b>>12&63,s[o++>>>0]=128|b>>6&63,s[o++>>>0]=128|b&63}}return s[o>>>0]=0,o-p},ze=(t,s,o)=>Ms(t,i(),s,o);c.stringToUTF8=ze;function Os(t,s){if(D)return q(9,0,1,t,s);t>>>=0,s>>>=0}function Ls(t,s,o){if(D)return q(10,0,1,t,s,o);s>>>=0,o>>>=0}var Yt=(t,s,o,f,p)=>{switch(s){case 2:o=jt(o),hs(t,16),p&&(u()[p>>>2>>>0]=16),a()[t>>>1>>>0]=s,u()[t+4>>>2>>>0]=o,a()[t+2>>>1>>>0]=_htons(f);break;case 10:o=hn(o),hs(t,28),p&&(u()[p>>>2>>>0]=28),u()[t>>>2>>>0]=s,u()[t+8>>>2>>>0]=o[0],u()[t+12>>>2>>>0]=o[1],u()[t+16>>>2>>>0]=o[2],u()[t+20>>>2>>>0]=o[3],a()[t+2>>>1>>>0]=_htons(f);break;default:return 5}return 0};function Hs(t,s,o,f,p,_){if(D)return q(11,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0;var m=lt(t);if(!m.daddr)return-53;var b=Yt(s,m.family,ve.lookup_name(m.daddr),m.dport,o);return 0}function Cs(t,s,o,f,p,_){if(D)return q(12,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0;var m=lt(t),b=Yt(s,m.family,ve.lookup_name(m.saddr||"0.0.0.0"),m.sport,o);return 0}function Ps(t,s,o,f,p,_){if(D)return q(13,0,1,t,s,o,f,p,_);f>>>=0,p>>>=0;var m=lt(t);return s===1&&o===4?(u()[f>>>2>>>0]=m.error,u()[p>>>2>>>0]=4,m.error=null,0):-50}function Ns(t,s,o){return D?q(14,0,1,t,s,o):(o>>>=0,ft.varargs=o,0)}function Ws(t,s){if(D)return q(15,0,1,t,s);t>>>=0,s>>>=0}function Vs(t,s,o){if(D)return q(16,0,1,t,s,o);s>>>=0}function $s(t,s,o,f){if(D)return q(17,0,1,t,s,o,f);s>>>=0,o>>>=0}function Gs(t,s,o,f){if(D)return q(18,0,1,t,s,o,f);s>>>=0,f>>>=0,ft.varargs=f}function js(t,s,o){if(D)return q(19,0,1,t,s,o);t>>>=0}function zs(t,s,o,f,p,_){if(D)return q(20,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0,p>>>=0,_>>>=0;var m=lt(t),b=m.sock_ops.recvmsg(m,o);if(!b)return 0;if(p)var x=Yt(p,m.family,ve.lookup_name(b.addr),b.port,_);return i().set(b.buffer,s>>>0),b.buffer.byteLength}function Ys(t,s,o,f){if(D)return q(21,0,1,t,s,o,f);s>>>=0,f>>>=0}function Ks(t){if(D)return q(22,0,1,t);t>>>=0}function qs(t,s,o,f,p,_){if(D)return q(23,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0,p>>>=0,_>>>=0}function Xs(t,s,o){if(D)return q(24,0,1,t,s,o)}function Js(t,s){if(D)return q(25,0,1,t,s);t>>>=0,s>>>=0}function Qs(t,s,o){if(D)return q(26,0,1,t,s,o);t>>>=0,s>>>=0,o>>>=0}function Zs(t,s,o){if(D)return q(27,0,1,t,s,o);s>>>=0}var Xo=1,Jo=()=>Xo,Qo=()=>{if(!$t())try{D?vn(J):cn(J)}catch(t){un(t)}},Zo=t=>{if(!we)try{t(),Qo()}catch(s){un(s)}};function _n(t){if(t>>>=0,typeof Atomics.waitAsync=="function"){var s=Atomics.waitAsync(u(),t>>>2,t);s.value.then(Kt);var o=t+128;Atomics.store(u(),o>>>2,1)}}c.__emscripten_thread_mailbox_await=_n;var Kt=()=>{var t=qt();t&&(_n(t),Zo(Ii))};c.checkMailbox=Kt;function ea(t,s,o){if(t>>>=0,s>>>=0,o>>>=0,t==s)setTimeout(Kt);else if(D)postMessage({targetThread:t,cmd:"checkMailbox"});else{var f=z.pthreads[t];if(!f)return;f.postMessage({cmd:"checkMailbox"})}}var mn=[];function ta(t,s,o,f,p){s>>>=0,o>>>=0,p>>>=0,mn.length=f;for(var _=p>>>3,m=0;m<f;m++)mn[m]=d()[_+m>>>0];var b=s?fs[s]:Qa[t];z.currentProxiedOperationCallerThread=o;var x=b(...mn);return z.currentProxiedOperationCallerThread=0,x}function ra(t){t>>>=0,K&&z.pthreads[t].ref()}function ei(){Re("missing function: _emval_call_method")}ei.stub=!0;function ti(){Re("missing function: _emval_decref")}ti.stub=!0;function ri(){Re("missing function: _emval_get_global")}ri.stub=!0;function ni(){Re("missing function: _emval_get_method_caller")}ni.stub=!0;function si(){Re("missing function: _emval_run_destructors")}si.stub=!0;var At=t=>t%4===0&&(t%100!==0||t%400===0),na=[0,31,60,91,121,152,182,213,244,274,305,335],sa=[0,31,59,90,120,151,181,212,243,273,304,334],ia=t=>{var s=At(t.getFullYear()),o=s?na:sa,f=o[t.getMonth()]+t.getDate()-1;return f};function oa(t,s,o){var f=St(t,s);o>>>=0;var p=new Date(f*1e3);u()[o>>>2>>>0]=p.getSeconds(),u()[o+4>>>2>>>0]=p.getMinutes(),u()[o+8>>>2>>>0]=p.getHours(),u()[o+12>>>2>>>0]=p.getDate(),u()[o+16>>>2>>>0]=p.getMonth(),u()[o+20>>>2>>>0]=p.getFullYear()-1900,u()[o+24>>>2>>>0]=p.getDay();var _=ia(p)|0;u()[o+28>>>2>>>0]=_,u()[o+36>>>2>>>0]=-(p.getTimezoneOffset()*60);var m=new Date(p.getFullYear(),0,1),b=new Date(p.getFullYear(),6,1).getTimezoneOffset(),x=m.getTimezoneOffset(),R=(b!=x&&p.getTimezoneOffset()==Math.min(x,b))|0;u()[o+32>>>2>>>0]=R}function aa(t,s,o,f){t>>>=0,s>>>=0,o>>>=0,f>>>=0;var p=new Date().getFullYear(),_=new Date(p,0,1),m=new Date(p,6,1),b=_.getTimezoneOffset(),x=m.getTimezoneOffset(),R=Math.max(b,x);h()[t>>>2>>>0]=R*60,u()[s>>>2>>>0]=+(b!=x);function W(X){var G=X.toTimeString().match(/\(([A-Za-z ]+)\)$/);return G?G[1]:"GMT"}var g=W(_),$=W(m);x<b?(ze(g,o,7),ze($,f,7)):(ze(g,f,7),ze($,o,7))}var ca=()=>{Re("")};function ua(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.createDirectory(c,t,s)}function la(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.checkDirectory(c,t,s)}function fa(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.listDirectoryEntries(c,t,s)}function da(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.removeDirectory(c,t,s)}function ha(t){return globalThis.DUCKDB_RUNTIME.closeFile(c,t)}function pa(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.dropFile(c,t,s)}function _a(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.checkFile(c,t,s)}function ma(t,s,o,f){return t>>>=0,o>>>=0,globalThis.DUCKDB_RUNTIME.moveFile(c,t,s,o,f)}function ba(t,s){return globalThis.DUCKDB_RUNTIME.openFile(c,t,s)}function ga(t,s,o,f){return s>>>=0,globalThis.DUCKDB_RUNTIME.readFile(c,t,s,o,f)}function ya(t,s){return globalThis.DUCKDB_RUNTIME.truncateFile(c,t,s)}function wa(t,s,o,f){return s>>>=0,globalThis.DUCKDB_RUNTIME.writeFile(c,t,s,o,f)}function va(t){return globalThis.DUCKDB_RUNTIME.getDefaultDataProtocol(t)}function Ea(t,s){return t>>>=0,globalThis.DUCKDB_RUNTIME.glob(c,t,s)}function Sa(t){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(c,t)}function Aa(t,s,o,f,p,_){return t>>>=0,o>>>=0,p>>>=0,globalThis.DUCKDB_RUNTIME.callScalarUDF(c,t,s,o,f,p,_)}var bn=[],Ia=(t,s)=>{bn.length=0;for(var o;o=i()[t++>>>0];){var f=o!=105;f&=o!=112,s+=f&&s%8?4:0,bn.push(o==112?h()[s>>>2>>>0]:o==105?u()[s>>>2>>>0]:d()[s>>>3>>>0]),s+=f?8:4}return bn},Fa=(t,s,o)=>{var f=Ia(s,o);return fs[t](...f)};function xa(t,s,o){return t>>>=0,s>>>=0,o>>>=0,Fa(t,s,o)}var It=t=>{It.shown||(It.shown={}),It.shown[t]||(It.shown[t]=1,K&&(t="warning: "+t),O(t))},Da=()=>{},ka=()=>Date.now(),Ra=()=>{_s+=1},Ta=()=>{throw Ra(),"unwind"},ii=()=>4294901760;function Ba(){return ii()}var oi;oi=()=>performance.timeOrigin+performance.now();var Ua=()=>K?bo().cpus().length:navigator.hardwareConcurrency,Ma=t=>{var s=j.buffer,o=(t-s.byteLength+65535)/65536;try{return j.grow(o),He(),1}catch{}};function Oa(t){t>>>=0;var s=i().length;if(t<=s)return!1;var o=ii();if(t>o)return!1;for(var f=(x,R)=>x+(R-x%R)%R,p=1;p<=4;p*=2){var _=s*(1+.2/p);_=Math.min(_,t+100663296);var m=Math.min(o,f(Math.max(t,_),65536)),b=Ma(m);if(b)return!0}return!1}var gn={},La=()=>Z||"./this.program",Ft=()=>{if(!Ft.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:La()};for(var o in gn)gn[o]===void 0?delete s[o]:s[o]=gn[o];var f=[];for(var o in s)f.push(`${o}=${s[o]}`);Ft.strings=f}return Ft.strings},Ha=(t,s)=>{for(var o=0;o<t.length;++o)n()[s++>>>0]=t.charCodeAt(o);n()[s>>>0]=0},ai=function(t,s){if(D)return q(28,0,1,t,s);t>>>=0,s>>>=0;var o=0;return Ft().forEach((f,p)=>{var _=s+o;h()[t+p*4>>>2>>>0]=_,Ha(f,_),o+=f.length+1}),0},ci=function(t,s){if(D)return q(29,0,1,t,s);t>>>=0,s>>>=0;var o=Ft();h()[t>>>2>>>0]=o.length;var f=0;return o.forEach(p=>f+=p.length+1),h()[s>>>2>>>0]=f,0};function ui(t){return D?q(30,0,1,t):52}function li(t,s){if(D)return q(31,0,1,t,s);s>>>=0;var o=0,f=0,p=0;{var _=2;t==0?o=2:(t==1||t==2)&&(o=64),p=1}return n()[s>>>0]=_,a()[s+2>>>1>>>0]=p,ut=[o>>>0,(Fe=o,+Math.abs(Fe)>=1?Fe>0?+Math.floor(Fe/4294967296)>>>0:~~+Math.ceil((Fe-+(~~Fe>>>0))/4294967296)>>>0:0)],u()[s+8>>>2>>>0]=ut[0],u()[s+12>>>2>>>0]=ut[1],ut=[f>>>0,(Fe=f,+Math.abs(Fe)>=1?Fe>0?+Math.floor(Fe/4294967296)>>>0:~~+Math.ceil((Fe-+(~~Fe>>>0))/4294967296)>>>0:0)],u()[s+16>>>2>>>0]=ut[0],u()[s+20>>>2>>>0]=ut[1],0}function fi(t,s,o,f,p,_){if(D)return q(32,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0;var m=St(f,p);return _>>>=0,52}function di(t,s,o,f,p,_){if(D)return q(33,0,1,t,s,o,f,p,_);s>>>=0,o>>>=0;var m=St(f,p);return _>>>=0,52}function hi(t,s,o,f){return D?q(34,0,1,t,s,o,f):(s>>>=0,o>>>=0,f>>>=0,52)}function pi(t,s,o,f,p){if(D)return q(35,0,1,t,s,o,f,p);var _=St(s,o);return p>>>=0,70}function _i(t){return D?q(36,0,1,t):52}var Ca=[null,[],[]],Pa=(t,s)=>{var o=Ca[t];s===0||s===10?((t===1?S:O)(Rs(o,0)),o.length=0):o.push(s)};function mi(t,s,o,f){if(D)return q(37,0,1,t,s,o,f);s>>>=0,o>>>=0,f>>>=0;for(var p=0,_=0;_<o;_++){var m=h()[s>>>2>>>0],b=h()[s+4>>>2>>>0];s+=8;for(var x=0;x<b;x++)Pa(t,i()[m+x>>>0]);p+=b}return h()[f>>>2>>>0]=p,0}function bi(t,s,o,f){if(D)return q(38,0,1,t,s,o,f);t>>>=0,s>>>=0,o>>>=0,f>>>=0;var p=0,_=0,m=0,b=0,x=0,R=0,W;function g($,X,G,I,oe,ge){var v,P,ce,_e;return P=$===10?28:16,oe=$===10?Ss(oe):dn(oe),v=Ce(P),_e=Yt(v,$,oe,ge),ke(!_e),ce=Ce(32),u()[ce+4>>>2>>>0]=$,u()[ce+8>>>2>>>0]=X,u()[ce+12>>>2>>>0]=G,h()[ce+24>>>2>>>0]=I,h()[ce+20>>>2>>>0]=v,$===10?u()[ce+16>>>2>>>0]=28:u()[ce+16>>>2>>>0]=16,u()[ce+28>>>2>>>0]=0,ce}if(o&&(m=u()[o>>>2>>>0],b=u()[o+4>>>2>>>0],x=u()[o+8>>>2>>>0],R=u()[o+12>>>2>>>0]),x&&!R&&(R=x===2?17:6),!x&&R&&(x=R===17?2:1),R===0&&(R=6),x===0&&(x=1),!t&&!s)return-2;if(m&-1088||o!==0&&u()[o>>>2>>>0]&2&&!t)return-1;if(m&32)return-2;if(x!==0&&x!==1&&x!==2)return-7;if(b!==0&&b!==2&&b!==10)return-6;if(s&&(s=ee(s),_=parseInt(s,10),isNaN(_)))return m&1024?-2:-8;if(!t)return b===0&&(b=2),m&1||(b===2?p=_htonl(2130706433):p=[0,0,0,1]),W=g(b,x,R,null,p,_),h()[f>>>2>>>0]=W,0;if(t=ee(t),p=jt(t),p!==null)if(b===0||b===2)b=2;else if(b===10&&m&8)p=[0,0,_htonl(65535),p],b=10;else return-2;else if(p=hn(t),p!==null)if(b===0||b===10)b=10;else return-2;return p!=null?(W=g(b,x,R,t,p,_),h()[f>>>2>>>0]=W,0):m&4?-2:(t=ve.lookup_name(t),p=jt(t),b===0?b=2:b===10&&(p=[0,0,_htonl(65535),p]),W=g(b,x,R,null,p,_),h()[f>>>2>>>0]=W,0)}var Na=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return f=>(f.set(crypto.getRandomValues(new Uint8Array(f.byteLength))),f);if(K)try{var t=su("crypto"),s=t.randomFillSync;if(s)return f=>t.randomFillSync(f);var o=t.randomBytes;return f=>(f.set(o(f.byteLength)),f)}catch{}Re("initRandomDevice")},gi=t=>(gi=Na())(t);function Wa(t,s){return t>>>=0,s>>>=0,gi(i().subarray(t>>>0,t+s>>>0)),0}function Va(t,s,o,f,p,_,m){t>>>=0,o>>>=0,p>>>=0;var b=As(t,s);if(b.errno)return-6;var x=b.port,R=b.addr,W=!1;if(o&&f){var g;if(m&1||!(g=ve.lookup_addr(R))){if(m&8)return-2}else R=g;var $=ze(R,o,f);$+1>=f&&(W=!0)}if(p&&_){x=""+x;var $=ze(x,p,_);$+1>=_&&(W=!0)}return W?-12:0}var $a=(t,s)=>{for(var o=0,f=0;f<=s;o+=t[f++]);return o},yi=[31,29,31,30,31,30,31,31,30,31,30,31],wi=[31,28,31,30,31,30,31,31,30,31,30,31],Ga=(t,s)=>{for(var o=new Date(t.getTime());s>0;){var f=At(o.getFullYear()),p=o.getMonth(),_=(f?yi:wi)[p];if(s>_-o.getDate())s-=_-o.getDate()+1,o.setDate(1),p<11?o.setMonth(p+1):(o.setMonth(0),o.setFullYear(o.getFullYear()+1));else return o.setDate(o.getDate()+s),o}return o};function ja(t,s,o){var f=o>0?o:pn(t)+1,p=new Array(f),_=Ms(t,p,0,p.length);return s&&(p.length=_),p}var vi=(t,s)=>{n().set(t,s>>>0)};function za(t,s,o,f){t>>>=0,s>>>=0,o>>>=0,f>>>=0;var p=h()[f+40>>>2>>>0],_={tm_sec:u()[f>>>2>>>0],tm_min:u()[f+4>>>2>>>0],tm_hour:u()[f+8>>>2>>>0],tm_mday:u()[f+12>>>2>>>0],tm_mon:u()[f+16>>>2>>>0],tm_year:u()[f+20>>>2>>>0],tm_wday:u()[f+24>>>2>>>0],tm_yday:u()[f+28>>>2>>>0],tm_isdst:u()[f+32>>>2>>>0],tm_gmtoff:u()[f+36>>>2>>>0],tm_zone:p?ee(p):""},m=ee(o),b={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var x in b)m=m.replace(new RegExp(x,"g"),b[x]);var R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],W=["January","February","March","April","May","June","July","August","September","October","November","December"];function g(v,P,ce){for(var _e=typeof v=="number"?v.toString():v||"";_e.length<P;)_e=ce[0]+_e;return _e}function $(v,P){return g(v,P,"0")}function X(v,P){function ce(Qt){return Qt<0?-1:Qt>0?1:0}var _e;return(_e=ce(v.getFullYear()-P.getFullYear()))===0&&(_e=ce(v.getMonth()-P.getMonth()))===0&&(_e=ce(v.getDate()-P.getDate())),_e}function G(v){switch(v.getDay()){case 0:return new Date(v.getFullYear()-1,11,29);case 1:return v;case 2:return new Date(v.getFullYear(),0,3);case 3:return new Date(v.getFullYear(),0,2);case 4:return new Date(v.getFullYear(),0,1);case 5:return new Date(v.getFullYear()-1,11,31);case 6:return new Date(v.getFullYear()-1,11,30)}}function I(v){var P=Ga(new Date(v.tm_year+1900,0,1),v.tm_yday),ce=new Date(P.getFullYear(),0,4),_e=new Date(P.getFullYear()+1,0,4),Qt=G(ce),Jc=G(_e);return X(Qt,P)<=0?X(Jc,P)<=0?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}var oe={"%a":v=>R[v.tm_wday].substring(0,3),"%A":v=>R[v.tm_wday],"%b":v=>W[v.tm_mon].substring(0,3),"%B":v=>W[v.tm_mon],"%C":v=>{var P=v.tm_year+1900;return $(P/100|0,2)},"%d":v=>$(v.tm_mday,2),"%e":v=>g(v.tm_mday,2," "),"%g":v=>I(v).toString().substring(2),"%G":I,"%H":v=>$(v.tm_hour,2),"%I":v=>{var P=v.tm_hour;return P==0?P=12:P>12&&(P-=12),$(P,2)},"%j":v=>$(v.tm_mday+$a(At(v.tm_year+1900)?yi:wi,v.tm_mon-1),3),"%m":v=>$(v.tm_mon+1,2),"%M":v=>$(v.tm_min,2),"%n":()=>`
`,"%p":v=>v.tm_hour>=0&&v.tm_hour<12?"AM":"PM","%S":v=>$(v.tm_sec,2),"%t":()=>"	","%u":v=>v.tm_wday||7,"%U":v=>{var P=v.tm_yday+7-v.tm_wday;return $(Math.floor(P/7),2)},"%V":v=>{var P=Math.floor((v.tm_yday+7-(v.tm_wday+6)%7)/7);if((v.tm_wday+371-v.tm_yday-2)%7<=2&&P++,P){if(P==53){var _e=(v.tm_wday+371-v.tm_yday)%7;_e!=4&&(_e!=3||!At(v.tm_year))&&(P=1)}}else{P=52;var ce=(v.tm_wday+7-v.tm_yday-1)%7;(ce==4||ce==5&&At(v.tm_year%400-1))&&P++}return $(P,2)},"%w":v=>v.tm_wday,"%W":v=>{var P=v.tm_yday+7-(v.tm_wday+6)%7;return $(Math.floor(P/7),2)},"%y":v=>(v.tm_year+1900).toString().substring(2),"%Y":v=>v.tm_year+1900,"%z":v=>{var P=v.tm_gmtoff,ce=P>=0;return P=Math.abs(P)/60,P=P/60*100+P%60,(ce?"+":"-")+("0000"+P).slice(-4)},"%Z":v=>v.tm_zone,"%%":()=>"%"};m=m.replace(/%%/g,"\0\0");for(var x in oe)m.includes(x)&&(m=m.replace(new RegExp(x,"g"),oe[x](_)));m=m.replace(/\0\0/g,"%");var ge=ja(m,!1);return ge.length>s?0:(vi(ge,t),ge.length-1)}function Ya(t,s,o,f,p){return t>>>=0,s>>>=0,o>>>=0,f>>>=0,p>>>=0,za(t,s,o,f)}var Ka=t=>{var s=c["_"+t];return s},qa=t=>{var s=pn(t)+1,o=Dt(s);return ze(t,o,s),o},Xa=(t,s,o,f,p)=>{var _={string:G=>{var I=0;return G!=null&&G!==0&&(I=qa(G)),I},array:G=>{var I=Dt(G.length);return vi(G,I),I}};function m(G){return s==="string"?ee(G):s==="boolean"?!!G:G}var b=Ka(t),x=[],R=0;if(f)for(var W=0;W<f.length;W++){var g=_[o[W]];g?(R===0&&(R=Xt()),x[W]=g(f[W])):x[W]=f[W]}var $=b(...x);function X(G){return R!==0&&xt(R),m(G)}return $=X($),$},dt=(t,s)=>{t<128?s.push(t):s.push(t%128|128,t>>7)},yn=(t,s)=>{var o=t.slice(0,1),f=t.slice(1),p={i:127,p:127,j:126,f:125,d:124,e:111};s.push(96),dt(f.length,s);for(var _=0;_<f.length;++_)s.push(p[f[_]]);o=="v"?s.push(0):s.push(1,p[o])},Ja=t=>{var s=[],o=[0,97,115,109,1,0,0,0];s.push(o);var f=[t[0].replace("j","i"),"i",t.slice(1).replace(/j/g,"ii")].join(""),p=[3];yn(f,p),yn(t,p),yn("vi",p);var _=[1];dt(p.length,_),_.push(...p),s.push(_);var m=[2,15,2,1,101,1,116,1,112,0,0,1,101,1,114,0,2];s.push(m);var b=[3,2,1,0];s.push(b);var x=[7,5,1,1,102,0,1];s.push(x);var R=[];t[0]==="j"?R=[1,1,126]:R.push(0);function W(P){R.push(32),dt(P,R)}for(var g=1,$=1;$<t.length;$++)t[$]=="j"?(W(g+1),R.push(173,66,32,134),W(g),R.push(172,132),g+=2):(W(g),g++);R.push(32,0,17,1,0),t[0]==="j"&&(R.push(34),dt(g,R),R.push(66,32,136,167,16,0),W(g),R.push(167)),R.push(11);var X=[1];dt(R.length,X),X.push(...R);var G=[10];dt(X.length,G),G.push(...X),s.push(G);var I=new Uint8Array([].concat.apply([],s)),oe=new WebAssembly.Module(I),ge=new WebAssembly.Instance(oe,{e:{t:ln,r:En}}),v=ge.exports.f;return v};z.init();var Qa=[ms,gs,ws,Fs,xs,Ds,Ts,Bs,Us,Os,Ls,Hs,Cs,Ps,Ns,Ws,Vs,$s,Gs,js,zs,Ys,Ks,qs,Xs,Js,Qs,Zs,ai,ci,ui,li,fi,di,hi,pi,_i,mi,bi],Za={S:Ko,v:qo,sa:vs,ra:Fs,pa:xs,ga:Ds,e:Ts,fa:Bs,A:Us,ha:Os,aa:Ls,ka:Hs,ja:Cs,na:Ps,j:Ns,ca:Ws,ba:Vs,da:$s,u:Gs,oa:js,la:zs,Z:Ys,n:Ks,ma:qs,s:Xs,ea:Js,ia:Qs,o:Zs,za:Jo,qa:ea,_:ta,I:_n,y:ra,G:ei,H:ti,J:ri,F:ni,E:si,z:oa,X:aa,b:ca,P:ua,Q:la,N:fa,O:da,m:ha,U:pa,L:_a,M:ma,T:ba,h:ga,R:ya,i:wa,V:va,K:Ea,l:Sa,W:Aa,g:xa,p:Da,Aa:ka,x:Ta,ta:Ba,c:oi,ua:Ua,ya:Oa,va:ai,wa:ci,t:cn,f:ui,xa:li,C:fi,B:di,w:hi,D:pi,$:_i,k:mi,r:bi,Y:Wa,q:Va,a:j||c.wasmMemory,d:Ya},B=No(),Ei=c._main=(t,s)=>(Ei=c._main=B.Ca)(t,s),ec=c._duckdb_web_fs_glob_add_path=t=>(ec=c._duckdb_web_fs_glob_add_path=B.Ea)(t),tc=c._duckdb_web_clear_response=()=>(tc=c._duckdb_web_clear_response=B.Fa)(),rc=c._duckdb_web_fail_with=t=>(rc=c._duckdb_web_fail_with=B.Ga)(t),nc=c._duckdb_web_reset=t=>(nc=c._duckdb_web_reset=B.Ha)(t),sc=c._duckdb_web_connect=()=>(sc=c._duckdb_web_connect=B.Ia)(),ic=c._duckdb_web_disconnect=t=>(ic=c._duckdb_web_disconnect=B.Ja)(t),oc=c._duckdb_web_flush_files=()=>(oc=c._duckdb_web_flush_files=B.Ka)(),ac=c._duckdb_web_flush_file=t=>(ac=c._duckdb_web_flush_file=B.La)(t),cc=c._duckdb_web_open=(t,s)=>(cc=c._duckdb_web_open=B.Ma)(t,s),uc=c._duckdb_web_get_global_file_info=(t,s)=>(uc=c._duckdb_web_get_global_file_info=B.Na)(t,s),lc=c._duckdb_web_collect_file_stats=(t,s,o)=>(lc=c._duckdb_web_collect_file_stats=B.Oa)(t,s,o),fc=c._duckdb_web_export_file_stats=(t,s)=>(fc=c._duckdb_web_export_file_stats=B.Pa)(t,s),dc=c._duckdb_web_fs_drop_file=(t,s)=>(dc=c._duckdb_web_fs_drop_file=B.Qa)(t,s),hc=c._duckdb_web_fs_drop_files=(t,s,o)=>(hc=c._duckdb_web_fs_drop_files=B.Ra)(t,s,o),pc=c._duckdb_web_fs_glob_file_infos=(t,s)=>(pc=c._duckdb_web_fs_glob_file_infos=B.Sa)(t,s),_c=c._duckdb_web_fs_get_file_info_by_id=(t,s,o)=>(_c=c._duckdb_web_fs_get_file_info_by_id=B.Ta)(t,s,o),mc=c._duckdb_web_fs_get_file_info_by_name=(t,s,o)=>(mc=c._duckdb_web_fs_get_file_info_by_name=B.Ua)(t,s,o),bc=c._duckdb_web_fs_register_file_url=(t,s,o,f,p)=>(bc=c._duckdb_web_fs_register_file_url=B.Va)(t,s,o,f,p),gc=c._duckdb_web_fs_register_file_buffer=(t,s,o,f)=>(gc=c._duckdb_web_fs_register_file_buffer=B.Wa)(t,s,o,f),yc=c._duckdb_web_copy_file_to_buffer=(t,s)=>(yc=c._duckdb_web_copy_file_to_buffer=B.Xa)(t,s),wc=c._duckdb_web_copy_file_to_path=(t,s,o)=>(wc=c._duckdb_web_copy_file_to_path=B.Ya)(t,s,o),vc=c._duckdb_web_get_version=t=>(vc=c._duckdb_web_get_version=B.Za)(t),Ec=c._duckdb_web_get_feature_flags=()=>(Ec=c._duckdb_web_get_feature_flags=B._a)(),Sc=c._duckdb_web_tokenize=(t,s)=>(Sc=c._duckdb_web_tokenize=B.$a)(t,s),Ac=c._duckdb_web_tokenize_buffer=(t,s,o)=>(Ac=c._duckdb_web_tokenize_buffer=B.ab)(t,s,o),Ic=c._duckdb_web_udf_scalar_create=(t,s,o)=>(Ic=c._duckdb_web_udf_scalar_create=B.bb)(t,s,o),Fc=c._duckdb_web_prepared_create=(t,s,o)=>(Fc=c._duckdb_web_prepared_create=B.cb)(t,s,o),xc=c._duckdb_web_prepared_create_buffer=(t,s,o,f)=>(xc=c._duckdb_web_prepared_create_buffer=B.db)(t,s,o,f),Dc=c._duckdb_web_prepared_close=(t,s,o)=>(Dc=c._duckdb_web_prepared_close=B.eb)(t,s,o),kc=c._duckdb_web_prepared_run=(t,s,o,f)=>(kc=c._duckdb_web_prepared_run=B.fb)(t,s,o,f),Rc=c._duckdb_web_prepared_send=(t,s,o,f)=>(Rc=c._duckdb_web_prepared_send=B.gb)(t,s,o,f),Tc=c._duckdb_web_query_run=(t,s,o)=>(Tc=c._duckdb_web_query_run=B.hb)(t,s,o),Bc=c._duckdb_web_query_run_buffer=(t,s,o,f)=>(Bc=c._duckdb_web_query_run_buffer=B.ib)(t,s,o,f),Uc=c._duckdb_web_pending_query_start=(t,s,o,f)=>(Uc=c._duckdb_web_pending_query_start=B.jb)(t,s,o,f),Mc=c._duckdb_web_pending_query_start_buffer=(t,s,o,f,p)=>(Mc=c._duckdb_web_pending_query_start_buffer=B.kb)(t,s,o,f,p),Oc=c._duckdb_web_pending_query_poll=(t,s,o)=>(Oc=c._duckdb_web_pending_query_poll=B.lb)(t,s,o),Lc=c._duckdb_web_pending_query_cancel=(t,s)=>(Lc=c._duckdb_web_pending_query_cancel=B.mb)(t,s),Hc=c._duckdb_web_query_fetch_results=(t,s)=>(Hc=c._duckdb_web_query_fetch_results=B.nb)(t,s),Cc=c._duckdb_web_get_tablenames=(t,s,o)=>(Cc=c._duckdb_web_get_tablenames=B.ob)(t,s,o),Pc=c._duckdb_web_get_tablenames_buffer=(t,s,o,f)=>(Pc=c._duckdb_web_get_tablenames_buffer=B.pb)(t,s,o,f),Nc=c._duckdb_web_insert_arrow_from_ipc_stream=(t,s,o,f,p)=>(Nc=c._duckdb_web_insert_arrow_from_ipc_stream=B.qb)(t,s,o,f,p),Wc=c._duckdb_web_insert_csv_from_path=(t,s,o,f)=>(Wc=c._duckdb_web_insert_csv_from_path=B.rb)(t,s,o,f),Vc=c._duckdb_web_insert_json_from_path=(t,s,o,f)=>(Vc=c._duckdb_web_insert_json_from_path=B.sb)(t,s,o,f),$c=c.__emscripten_tls_init=()=>($c=c.__emscripten_tls_init=B.tb)(),qt=c._pthread_self=()=>(qt=c._pthread_self=B.ub)(),Si=c.__emscripten_thread_init=(t,s,o,f,p,_)=>(Si=c.__emscripten_thread_init=B.vb)(t,s,o,f,p,_),Gc=c.__emscripten_thread_crashed=()=>(Gc=c.__emscripten_thread_crashed=B.wb)(),jc=()=>(jc=B.emscripten_main_runtime_thread_id)(),zc=()=>(zc=B.emscripten_main_thread_process_queued_calls)(),Ai=(t,s,o,f,p)=>(Ai=B.Ab)(t,s,o,f,p),wn=t=>(wn=B.Bb)(t),vn=c.__emscripten_thread_exit=t=>(vn=c.__emscripten_thread_exit=B.Cb)(t),Ii=()=>(Ii=B.Db)(),Ce=c._malloc=t=>(Ce=c._malloc=B.Eb)(t),Yc=c._free=t=>(Yc=c._free=B.Fb)(t),Kc=c._calloc=(t,s)=>(Kc=c._calloc=B.Gb)(t,s),En=t=>(En=B.Ib)(t),Fi=()=>(Fi=B.Jb)(),xi=(t,s)=>(xi=B.Kb)(t,s),Xt=()=>(Xt=B.Lb)(),xt=t=>(xt=B.Mb)(t),Dt=c.stackAlloc=t=>(Dt=c.stackAlloc=B.Nb)(t);function qc(t){t=Object.assign({},t);var s=f=>()=>f()>>>0,o=f=>p=>f(p)>>>0;return t.ub=s(t.ub),t.emscripten_main_runtime_thread_id=s(t.emscripten_main_runtime_thread_id),t.Eb=o(t.Eb),t.Lb=s(t.Lb),t.Nb=o(t.Nb),t}c.wasmMemory=j,c.stackAlloc=Dt,c.stackSave=Xt,c.stackRestore=xt,c.getTempRet0=Fi,c.setTempRet0=En,c.keepRuntimeAlive=$t,c.ccall=Xa,c.ExitStatus=on,c.createDyncallWrapper=Ja,c.PThread=z;var Jt;Et=function t(){Jt||Di(),Jt||(Et=t)};function Xc(){var t=Ei,s=0,o=0;try{var f=t(s,o);return bs(f,!0),f}catch(p){return un(p)}}function Di(){if(Ze>0)return;if(D){A(c),ns(),startWorker(c);return}if(Bo(),Ze>0)return;function t(){Jt||(Jt=!0,c.calledRun=!0,!we&&(ns(),Uo(),A(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),ki&&Xc(),Mo()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),t()},1)):t()}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();var ki=!0;return c.noInitialRun&&(ki=!1),Di(),e.ready}})();typeof yo=="object"&&typeof Kn=="object"?Kn.exports=go:typeof define=="function"&&define.amd&&define([],()=>go)});var Eo=Pe(()=>{});var So=Pe(()=>{});var Ao=Pe((fm,nn)=>{(function(){"use strict";var r="input is invalid type",e=typeof window=="object",n=e?window:{};n.JS_SHA256_NO_WINDOW&&(e=!1);var i=!e&&typeof self=="object",a=!n.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";a?n=global:i&&(n=self);var l=!n.JS_SHA256_NO_COMMON_JS&&typeof nn=="object"&&nn.exports,u=typeof define=="function"&&define.amd,h=!n.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],A=[24,16,8,0],H=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],U=["hex","array","digest","arrayBuffer"],k=[];(n.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(w){return Object.prototype.toString.call(w)==="[object Array]"}),h&&(n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(w){return typeof w=="object"&&w.buffer&&w.buffer.constructor===ArrayBuffer});var Z=function(w,T){return function(L){return new D(T,!0).update(L)[w]()}},Q=function(w){var T=Z("hex",w);a&&(T=ue(T,w)),T.create=function(){return new D(w)},T.update=function(M){return T.create().update(M)};for(var L=0;L<U.length;++L){var E=U[L];T[E]=Z(E,w)}return T},ue=function(w,T){var L=Eo(),E=So().Buffer,M=T?"sha224":"sha256",F;E.from&&!n.JS_SHA256_NO_BUFFER_FROM?F=E.from:F=function(S){return new E(S)};var V=function(S){if(typeof S=="string")return L.createHash(M).update(S,"utf8").digest("hex");if(S==null)throw new Error(r);return S.constructor===ArrayBuffer&&(S=new Uint8Array(S)),Array.isArray(S)||ArrayBuffer.isView(S)||S.constructor===E?L.createHash(M).update(F(S)).digest("hex"):w(S)};return V},ie=function(w,T){return function(L,E){return new re(L,T,!0).update(E)[w]()}},K=function(w){var T=ie("hex",w);T.create=function(M){return new re(M,w)},T.update=function(M,F){return T.create(M).update(F)};for(var L=0;L<U.length;++L){var E=U[L];T[E]=ie(E,w)}return T};function D(w,T){T?(k[0]=k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0,this.blocks=k):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=w}D.prototype.update=function(w){if(!this.finalized){var T,L=typeof w;if(L!=="string"){if(L==="object"){if(w===null)throw new Error(r);if(h&&w.constructor===ArrayBuffer)w=new Uint8Array(w);else if(!Array.isArray(w)&&(!h||!ArrayBuffer.isView(w)))throw new Error(r)}else throw new Error(r);T=!0}for(var E,M=0,F,V=w.length,S=this.blocks;M<V;){if(this.hashed&&(this.hashed=!1,S[0]=this.block,this.block=S[16]=S[1]=S[2]=S[3]=S[4]=S[5]=S[6]=S[7]=S[8]=S[9]=S[10]=S[11]=S[12]=S[13]=S[14]=S[15]=0),T)for(F=this.start;M<V&&F<64;++M)S[F>>>2]|=w[M]<<A[F++&3];else for(F=this.start;M<V&&F<64;++M)E=w.charCodeAt(M),E<128?S[F>>>2]|=E<<A[F++&3]:E<2048?(S[F>>>2]|=(192|E>>>6)<<A[F++&3],S[F>>>2]|=(128|E&63)<<A[F++&3]):E<55296||E>=57344?(S[F>>>2]|=(224|E>>>12)<<A[F++&3],S[F>>>2]|=(128|E>>>6&63)<<A[F++&3],S[F>>>2]|=(128|E&63)<<A[F++&3]):(E=65536+((E&1023)<<10|w.charCodeAt(++M)&1023),S[F>>>2]|=(240|E>>>18)<<A[F++&3],S[F>>>2]|=(128|E>>>12&63)<<A[F++&3],S[F>>>2]|=(128|E>>>6&63)<<A[F++&3],S[F>>>2]|=(128|E&63)<<A[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=S[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},D.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var w=this.blocks,T=this.lastByteIndex;w[16]=this.block,w[T>>>2]|=c[T&3],this.block=w[16],T>=56&&(this.hashed||this.hash(),w[0]=this.block,w[16]=w[1]=w[2]=w[3]=w[4]=w[5]=w[6]=w[7]=w[8]=w[9]=w[10]=w[11]=w[12]=w[13]=w[14]=w[15]=0),w[14]=this.hBytes<<3|this.bytes>>>29,w[15]=this.bytes<<3,this.hash()}},D.prototype.hash=function(){var w=this.h0,T=this.h1,L=this.h2,E=this.h3,M=this.h4,F=this.h5,V=this.h6,S=this.h7,O=this.blocks,C,j,le,we,J,ke,he,je,ot,at,Qe;for(C=16;C<64;++C)J=O[C-15],j=(J>>>7|J<<25)^(J>>>18|J<<14)^J>>>3,J=O[C-2],le=(J>>>17|J<<15)^(J>>>19|J<<13)^J>>>10,O[C]=O[C-16]+j+O[C-7]+le<<0;for(Qe=T&L,C=0;C<64;C+=4)this.first?(this.is224?(je=300032,J=O[0]-1413257819,S=J-150054599<<0,E=J+24177077<<0):(je=704751109,J=O[0]-210244248,S=J-1521486534<<0,E=J+143694565<<0),this.first=!1):(j=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),le=(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7),je=w&T,we=je^w&L^Qe,he=M&F^~M&V,J=S+le+he+H[C]+O[C],ke=j+we,S=E+J<<0,E=J+ke<<0),j=(E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10),le=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),ot=E&w,we=ot^E&T^je,he=S&M^~S&F,J=V+le+he+H[C+1]+O[C+1],ke=j+we,V=L+J<<0,L=J+ke<<0,j=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),at=L&E,we=at^L&w^ot,he=V&S^~V&M,J=F+le+he+H[C+2]+O[C+2],ke=j+we,F=T+J<<0,T=J+ke<<0,j=(T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10),le=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),Qe=T&L,we=Qe^T&E^at,he=F&V^~F&S,J=M+le+he+H[C+3]+O[C+3],ke=j+we,M=w+J<<0,w=J+ke<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+w<<0,this.h1=this.h1+T<<0,this.h2=this.h2+L<<0,this.h3=this.h3+E<<0,this.h4=this.h4+M<<0,this.h5=this.h5+F<<0,this.h6=this.h6+V<<0,this.h7=this.h7+S<<0},D.prototype.hex=function(){this.finalize();var w=this.h0,T=this.h1,L=this.h2,E=this.h3,M=this.h4,F=this.h5,V=this.h6,S=this.h7,O=d[w>>>28&15]+d[w>>>24&15]+d[w>>>20&15]+d[w>>>16&15]+d[w>>>12&15]+d[w>>>8&15]+d[w>>>4&15]+d[w&15]+d[T>>>28&15]+d[T>>>24&15]+d[T>>>20&15]+d[T>>>16&15]+d[T>>>12&15]+d[T>>>8&15]+d[T>>>4&15]+d[T&15]+d[L>>>28&15]+d[L>>>24&15]+d[L>>>20&15]+d[L>>>16&15]+d[L>>>12&15]+d[L>>>8&15]+d[L>>>4&15]+d[L&15]+d[E>>>28&15]+d[E>>>24&15]+d[E>>>20&15]+d[E>>>16&15]+d[E>>>12&15]+d[E>>>8&15]+d[E>>>4&15]+d[E&15]+d[M>>>28&15]+d[M>>>24&15]+d[M>>>20&15]+d[M>>>16&15]+d[M>>>12&15]+d[M>>>8&15]+d[M>>>4&15]+d[M&15]+d[F>>>28&15]+d[F>>>24&15]+d[F>>>20&15]+d[F>>>16&15]+d[F>>>12&15]+d[F>>>8&15]+d[F>>>4&15]+d[F&15]+d[V>>>28&15]+d[V>>>24&15]+d[V>>>20&15]+d[V>>>16&15]+d[V>>>12&15]+d[V>>>8&15]+d[V>>>4&15]+d[V&15];return this.is224||(O+=d[S>>>28&15]+d[S>>>24&15]+d[S>>>20&15]+d[S>>>16&15]+d[S>>>12&15]+d[S>>>8&15]+d[S>>>4&15]+d[S&15]),O},D.prototype.toString=D.prototype.hex,D.prototype.digest=function(){this.finalize();var w=this.h0,T=this.h1,L=this.h2,E=this.h3,M=this.h4,F=this.h5,V=this.h6,S=this.h7,O=[w>>>24&255,w>>>16&255,w>>>8&255,w&255,T>>>24&255,T>>>16&255,T>>>8&255,T&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255,M>>>24&255,M>>>16&255,M>>>8&255,M&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255];return this.is224||O.push(S>>>24&255,S>>>16&255,S>>>8&255,S&255),O},D.prototype.array=D.prototype.digest,D.prototype.arrayBuffer=function(){this.finalize();var w=new ArrayBuffer(this.is224?28:32),T=new DataView(w);return T.setUint32(0,this.h0),T.setUint32(4,this.h1),T.setUint32(8,this.h2),T.setUint32(12,this.h3),T.setUint32(16,this.h4),T.setUint32(20,this.h5),T.setUint32(24,this.h6),this.is224||T.setUint32(28,this.h7),w};function re(w,T,L){var E,M=typeof w;if(M==="string"){var F=[],V=w.length,S=0,O;for(E=0;E<V;++E)O=w.charCodeAt(E),O<128?F[S++]=O:O<2048?(F[S++]=192|O>>>6,F[S++]=128|O&63):O<55296||O>=57344?(F[S++]=224|O>>>12,F[S++]=128|O>>>6&63,F[S++]=128|O&63):(O=65536+((O&1023)<<10|w.charCodeAt(++E)&1023),F[S++]=240|O>>>18,F[S++]=128|O>>>12&63,F[S++]=128|O>>>6&63,F[S++]=128|O&63);w=F}else if(M==="object"){if(w===null)throw new Error(r);if(h&&w.constructor===ArrayBuffer)w=new Uint8Array(w);else if(!Array.isArray(w)&&(!h||!ArrayBuffer.isView(w)))throw new Error(r)}else throw new Error(r);w.length>64&&(w=new D(T,!0).update(w).array());var C=[],j=[];for(E=0;E<64;++E){var le=w[E]||0;C[E]=92^le,j[E]=54^le}D.call(this,T,L),this.update(j),this.oKeyPad=C,this.inner=!0,this.sharedMemory=L}re.prototype=new D,re.prototype.finalize=function(){if(D.prototype.finalize.call(this),this.inner){this.inner=!1;var w=this.array();D.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(w),D.prototype.finalize.call(this)}};var de=Q();de.sha256=de,de.sha224=Q(!0),de.sha256.hmac=K(),de.sha224.hmac=K(!0),l?nn.exports=de:(n.sha256=de.sha256,n.sha224=de.sha224,u&&define(function(){return de}))})()});var cl={};iu(cl,{registerWorker:()=>ko});var Rt=Uint8Array.of(65,82,82,79,87,49),au=Uint8Array.of(255,255,255,255,0,0,0,0),xe={V1:0,V2:1,V3:2,V4:3,V5:4};var Ee={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3,Tensor:4,SparseTensor:5},y={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},pt={HALF:0,SINGLE:1,DOUBLE:2},Ne={DAY:0,MILLISECOND:1},fe={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},De={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},We={Sparse:0,Dense:1};var _t=Uint8Array,Zt=Uint16Array,er=Uint32Array,tr=BigUint64Array,Tt=Int8Array,Bi=Int16Array,ye=Int32Array,Se=BigInt64Array,Sn=Float32Array,Ye=Float64Array;function Ui(r){return r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer}function Mi(r,e){let n=Math.log2(r)-3;return(e?[Tt,Bi,ye,Se]:[_t,Zt,er,tr])[n]}var fl=Object.getPrototypeOf(Int8Array);function mt(r,e){let n=0,i=r.length;if(i<=2147483648)do{let a=n+i>>>1;r[a]<=e?n=a+1:i=a}while(n<i);else do{let a=Math.trunc((n+i)/2);r[a]<=e?n=a+1:i=a}while(n<i);return n}function rr(r,e,n){if(e(r))return r;throw new Error(n(r))}function Ae(r,e,n){return e=Array.isArray(e)?e:Object.values(e),rr(r,i=>e.includes(i),n!=null?n:()=>`${r} must be one of ${e}`)}function nr(r,e){for(let[n,i]of Object.entries(r))if(i===e)return n;return"<Unknown>"}var Ve=r=>`Unsupported data type: "${nr(y,r)}" (id ${r})`,Bt=(r,e,n=!0,i=null)=>({name:r,type:e,nullable:n,metadata:i});function Oi(r){return Object.hasOwn(r,"name")&&Li(r.type)}function Li(r){return typeof(r==null?void 0:r.typeId)=="number"}function Ke(r,e="",n=!0){return Oi(r)?r:Bt(e,rr(r,Li,()=>"Data type expected."),n)}var sr=(r,e,n=!1,i=-1)=>({typeId:y.Dictionary,id:i,dictionary:r,indices:e||bt(),ordered:n});var ir=(r=32,e=!0)=>({typeId:y.Int,bitWidth:Ae(r,[8,16,32,64]),signed:e,values:Mi(r,e)});var bt=()=>ir(32);var An=(r=2)=>({typeId:y.Float,precision:Ae(r,pt),values:[Zt,Sn,Ye][r]});var In=()=>({typeId:y.Binary,offsets:ye}),or=()=>({typeId:y.Utf8,offsets:ye});var Fn=(r,e,n=128)=>({typeId:y.Decimal,precision:r,scale:e,bitWidth:Ae(n,[32,64,128,256]),values:n===32?ye:tr});var xn=r=>({typeId:y.Date,unit:Ae(r,Ne),values:r===Ne.DAY?ye:Se});var Dn=(r=fe.MILLISECOND)=>{r=Ae(r,fe);let e=r===fe.SECOND||r===fe.MILLISECOND?32:64;return{typeId:y.Time,unit:r,bitWidth:e,values:e===32?ye:Se}};var ar=(r=fe.MILLISECOND,e=null)=>({typeId:y.Timestamp,unit:Ae(r,fe),timezone:e,values:Se}),kn=(r=De.MONTH_DAY_NANO)=>({typeId:y.Interval,unit:Ae(r,De),values:r===De.MONTH_DAY_NANO?void 0:ye}),cr=r=>({typeId:y.List,children:[Ke(r)],offsets:ye}),ur=r=>({typeId:y.Struct,children:Array.isArray(r)&&Oi(r[0])?r:Object.entries(r).map(([e,n])=>Bt(e,n))}),Rn=(r,e,n,i)=>(n!=null||(n=e.map((a,l)=>l)),{typeId:y.Union,mode:Ae(r,We),typeIds:n,typeMap:n.reduce((a,l,u)=>(a[l]=u,a),{}),children:e.map((a,l)=>Ke(a,`_${l}`)),typeIdForValue:i,offsets:ye}),Tn=r=>({typeId:y.FixedSizeBinary,stride:r}),lr=(r,e)=>({typeId:y.FixedSizeList,stride:e,children:[Ke(r)]}),Hi=(r,e)=>({typeId:y.Map,keysSorted:r,children:[e],offsets:ye});var Bn=(r=fe.MILLISECOND)=>({typeId:y.Duration,unit:Ae(r,fe),values:Se}),Un=()=>({typeId:y.LargeBinary,offsets:Se}),Mn=()=>({typeId:y.LargeUtf8,offsets:Se}),On=r=>({typeId:y.LargeList,children:[Ke(r)],offsets:Se}),Ln=(r,e)=>({typeId:y.RunEndEncoded,children:[rr(Ke(r,"run_ends"),n=>n.type.typeId===y.Int,()=>"Run-ends must have an integer type."),Ke(e,"values")]});var Hn=r=>({typeId:y.ListView,children:[Ke(r,"value")],offsets:ye}),Cn=r=>({typeId:y.LargeListView,children:[Ke(r,"value")],offsets:Se});var cu=new Ye(2),fr=cu.buffer,wl=new Se(fr),vl=new er(fr),El=new ye(fr),Sl=new _t(fr);function Oe(r){if(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${r}`);return Number(r)}function dr(r,e){return Number(r/e)+Number(r%e)/Number(e)}var gt=r=>BigInt.asUintN(64,r);function Pi(r,e){return BigInt.asIntN(64,r[e])}function Ni(r,e){let n=e<<1,i;return BigInt.asIntN(64,r[n+1])<0?(i=gt(~r[n])|gt(~r[n+1])<<64n,i=-(i+1n)):i=r[n]|r[n+1]<<64n,i}function Wi(r,e){let n=e<<2,i;return BigInt.asIntN(64,r[n+3])<0?(i=gt(~r[n])|gt(~r[n+1])<<64n|gt(~r[n+2])<<128n|gt(~r[n+3])<<192n,i=-(i+1n)):i=r[n]|r[n+1]<<64n|r[n+2]<<128n|r[n+3]<<192n,i}var lu=new TextDecoder("utf-8"),Dl=new TextEncoder;function yt(r){return lu.decode(r)}var et=4;function Pn(r,e){return(r[e>>3]&1<<e%8)!==0}function be(r,e){let n=e+ne(r,e),i=n-ne(r,n),a=me(r,i);return(l,u,h=null)=>{if(l<a){let d=me(r,i+l);if(d)return u(r,n+d)}return h}}function Te(r,e){return e}function qe(r,e){return!!fu(r,e)}function fu(r,e){return Ut(r,e)<<24>>24}function Ut(r,e){return r[e]}function me(r,e){return du(r,e)<<16>>16}function du(r,e){return r[e]|r[e+1]<<8}function ne(r,e){return r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24}function Vi(r,e){return ne(r,e)>>>0}function pe(r,e){return Oe(BigInt.asIntN(64,BigInt(Vi(r,e))+(BigInt(Vi(r,e+et))<<32n)))}function tt(r,e){let n=e+ne(r,e),i=ne(r,n);return n+=et,yt(r.subarray(n,n+i))}function Ie(r,e,n,i){if(!e)return[];let a=e+ne(r,e);return Array.from({length:ne(r,a)},(l,u)=>i(r,a+et+u*n))}var hr=Symbol("rowIndex");function Mt(r,e){class n{constructor(l){this[hr]=l}toJSON(){return $i(r,e,this[hr])}}let i=n.prototype;for(let a=0;a<r.length;++a){if(Object.hasOwn(i,r[a]))continue;let l=e[a];Object.defineProperty(i,r[a],{get(){return l.at(this[hr])},enumerable:!0})}return a=>new n(a)}function pr(r,e){return n=>$i(r,e,n)}function $i(r,e,n){let i={};for(let a=0;a<r.length;++a)i[r[a]]=e[a].at(n);return i}function Gi(r){return r instanceof $e}var Xe=class{constructor({length:e,nullCount:n,type:i,validity:a,values:l,offsets:u,sizes:h,children:d}){this.length=e,this.nullCount=n,this.type=i,this.validity=a,this.values=l,this.offsets=u,this.sizes=h,this.children=d,(!n||!this.validity)&&(this.at=c=>this.value(c))}get[Symbol.toStringTag](){return"Batch"}at(e){return this.isValid(e)?this.value(e):null}isValid(e){return Pn(this.validity,e)}value(e){return this.values[e]}slice(e,n){let i=n-e,a=Array(i);for(let l=0;l<i;++l)a[l]=this.at(e+l);return a}*[Symbol.iterator](){for(let e=0;e<this.length;++e)yield this.at(e)}};ht(Xe,"ArrayType",null);var $e=class extends Xe{constructor(e){super(e);let{length:n,values:i}=this;this.values=i.subarray(0,n)}slice(e,n){return this.nullCount?super.slice(e,n):this.values.subarray(e,n)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}},rt=class extends Xe{};ht(rt,"ArrayType",Ye);var ae=class extends Xe{};ht(ae,"ArrayType",Array);var Ht=class extends ae{value(e){return null}},Le=class extends rt{value(e){return Oe(this.values[e])}},_r=class extends rt{value(e){let n=this.values[e],i=(n&31744)>>10,a=(n&1023)/1024,l=(-1)**((n&32768)>>15);switch(i){case 31:return l*(a?Number.NaN:1/0);case 0:return l*(a?6103515625e-14*a:0)}return l*2**(i-15)*(1+a)}},mr=class extends ae{value(e){return Pn(this.values,e)}},br=class extends rt{constructor(e){super(e);let{scale:n}=this.type;this.scale=10**n}value(e){return this.values[e]/this.scale}},gr=class extends Xe{constructor(e){super(e);let{bitWidth:n,scale:i}=this.type;this.decimal=n===64?Pi:n===128?Ni:Wi,this.scale=10n**BigInt(i)}},Ot=class extends gr{value(e){return dr(this.decimal(this.values,e),this.scale)}};ht(Ot,"ArrayType",Ye);var Lt=class extends gr{value(e){return this.decimal(this.values,e)}};ht(Lt,"ArrayType",Array);var Ct=class extends ae{constructor(e){super(e),this.source=e}value(e){return new Date(this.source.value(e))}},yr=class extends rt{value(e){return 864e5*this.values[e]}},ji=Le,wr=class extends Le{value(e){return super.value(e)*1e3}},zi=Le,vr=class extends Le{value(e){return dr(this.values[e],1000n)}},Er=class extends Le{value(e){return dr(this.values[e],1000000n)}},Sr=class extends ae{value(e){return this.values.subarray(e<<1,e+1<<1)}},Ar=class extends ae{value(e){let n=this.values,i=e<<4;return Float64Array.of(ne(n,i),ne(n,i+4),pe(n,i+8))}},Yi=({values:r,offsets:e},n)=>r.subarray(e[n],e[n+1]),Ki=({values:r,offsets:e},n)=>r.subarray(Oe(e[n]),Oe(e[n+1])),Ir=class extends ae{value(e){return Yi(this,e)}},Fr=class extends ae{value(e){return Ki(this,e)}},xr=class extends ae{value(e){return yt(Yi(this,e))}},Dr=class extends ae{value(e){return yt(Ki(this,e))}},kr=class extends ae{value(e){let n=this.offsets;return this.children[0].slice(n[e],n[e+1])}},Rr=class extends ae{value(e){let n=this.offsets;return this.children[0].slice(Oe(n[e]),Oe(n[e+1]))}},Tr=class extends ae{value(e){let n=this.offsets[e],i=n+this.sizes[e];return this.children[0].slice(n,i)}},Br=class extends ae{value(e){let n=this.offsets[e],i=n+this.sizes[e];return this.children[0].slice(Oe(n),Oe(i))}},Ur=class extends ae{constructor(e){super(e),this.stride=this.type.stride}},Mr=class extends Ur{value(e){let{stride:n,values:i}=this;return i.subarray(e*n,(e+1)*n)}},Or=class extends Ur{value(e){let{children:n,stride:i}=this;return n[0].slice(e*i,(e+1)*i)}};function qi({children:r,offsets:e},n){let[i,a]=r[0].children,l=e[n],u=e[n+1],h=[];for(let d=l;d<u;++d)h.push([i.at(d),a.at(d)]);return h}var Lr=class extends ae{value(e){return qi(this,e)}},Hr=class extends ae{value(e){return new Map(qi(this,e))}},Pt=class extends ae{constructor({typeIds:e,...n}){super(n),this.typeIds=e,this.typeMap=this.type.typeMap}value(e,n=e){let{typeIds:i,children:a,typeMap:l}=this;return a[l[i[e]]].at(n)}},Cr=class extends Pt{value(e){return super.value(e,this.offsets[e])}},Nt=class extends ae{constructor(e,n=pr){super(e),this.names=this.type.children.map(i=>i.name),this.factory=n(this.names,this.children)}value(e){return this.factory(e)}},Pr=class extends Nt{constructor(e){super(e,Mt)}},Nr=class extends ae{value(e){let[{values:n},i]=this.children;return i.at(mt(n,e))}},Wr=class extends ae{setDictionary(e){return this.dictionary=e,this.cache=e.cache(),this}value(e){return this.cache[this.key(e)]}key(e){return this.values[e]}},Vr=class extends ae{constructor({data:e,...n}){super(n),this.data=e}view(e){let{values:n,data:i}=this,a=e<<4,l=a+4,u=n,h=ne(u,a);return h>12&&(l=ne(u,a+12),u=i[ne(u,a+8)]),u.subarray(l,l+h)}},$r=class extends Vr{value(e){return this.view(e)}},Gr=class extends Vr{value(e){return yt(this.view(e))}};function Nn(r){let e=[];return{add(n){return e.push(n),this},clear:()=>e=[],done:()=>new nt(e,r)}}var nt=class{constructor(e,n=(i=>(i=e[0])==null?void 0:i.type)()){this.type=n,this.length=e.reduce((u,h)=>u+h.length,0),this.nullCount=e.reduce((u,h)=>u+h.nullCount,0),this.data=e;let a=e.length,l=new Int32Array(a+1);if(a===1){let[u]=e;l[1]=u.length,this.at=h=>u.at(h)}else for(let u=0,h=0;u<a;++u)l[u+1]=h+=e[u].length;this.offsets=l}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){let e=this.data;return e.length===1?e[0][Symbol.iterator]():hu(e)}at(e){var l;let{data:n,offsets:i}=this,a=mt(i,e)-1;return(l=n[a])==null?void 0:l.at(e-i[a])}get(e){return this.at(e)}toArray(){var d;let{length:e,nullCount:n,data:i}=this,a=!n&&Gi(i[0]),l=i.length;if(a&&l===1)return i[0].values;let u=!l||n>0?Array:(d=i[0].constructor.ArrayType)!=null?d:i[0].values.constructor,h=new u(e);return a?pu(h,i):_u(h,i)}cache(){var e;return(e=this._cache)!=null?e:this._cache=this.toArray()}};function*hu(r){for(let e=0;e<r.length;++e){let n=r[e][Symbol.iterator]();for(let i=n.next();!i.done;i=n.next())yield i.value}}function pu(r,e){for(let n=0,i=0;n<e.length;++n){let{values:a}=e[n];r.set(a,i),i+=a.length}return r}function _u(r,e){let n=-1;for(let i=0;i<e.length;++i){let a=e[i];for(let l=0;l<a.length;++l)r[++n]=a.at(l)}return r}var wt=class r{constructor(e,n,i=!1){let a=e.fields.map(u=>u.name);this.schema=e,this.names=a,this.children=n,this.factory=i?Mt:pr;let l=[];this.getFactory=u=>{var h;return(h=l[u])!=null?h:l[u]=this.factory(a,n.map(d=>d.data[u]))}}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){var e,n;return(n=(e=this.children[0])==null?void 0:e.length)!=null?n:0}getChildAt(e){return this.children[e]}getChild(e){let n=this.names.findIndex(i=>i===e);return n>-1?this.children[n]:void 0}selectAt(e,n=[]){let{children:i,factory:a,schema:l}=this,{fields:u}=l;return new r({...l,fields:e.map((h,d)=>mu(u[h],n[d]))},e.map(h=>i[h]),a===Mt)}select(e,n){let i=this.names,a=e.map(l=>i.indexOf(l));return this.selectAt(a,n)}toColumns(){let{children:e,names:n}=this,i={};return n.forEach((a,l)=>{var u,h;return i[a]=(h=(u=e[l])==null?void 0:u.toArray())!=null?h:[]}),i}toArray(){var u,h;let{children:e,getFactory:n,numRows:i}=this,a=(h=(u=e[0])==null?void 0:u.data)!=null?h:[],l=Array(i);for(let d=0,c=-1;d<a.length;++d){let A=n(d);for(let H=0;H<a[d].length;++H)l[++c]=A(H)}return l}*[Symbol.iterator](){var a,l;let{children:e,getFactory:n}=this,i=(l=(a=e[0])==null?void 0:a.data)!=null?l:[];for(let u=0;u<i.length;++u){let h=n(u);for(let d=0;d<i[u].length;++d)yield h(d)}}at(e){let{children:n,getFactory:i,numRows:a}=this;if(e<0||e>=a)return null;let[{offsets:l}]=n,u=mt(l,e)-1;return i(u)(e-l[u])}get(e){return this.at(e)}};function mu(r,e){return e!=null&&e!==r.name?{...r,name:e}:r}function Wt(r,e={}){let{typeId:n,bitWidth:i,mode:a,precision:l,unit:u}=r,{useBigInt:h,useDate:d,useDecimalInt:c,useMap:A,useProxy:H}=e;switch(n){case y.Null:return Ht;case y.Bool:return mr;case y.Int:case y.Time:case y.Duration:return h||i<64?$e:Le;case y.Float:return l?$e:_r;case y.Date:return Xi(u===Ne.DAY?yr:ji,d&&Ct);case y.Timestamp:return Xi(u===fe.SECOND?wr:u===fe.MILLISECOND?zi:u===fe.MICROSECOND?vr:Er,d&&Ct);case y.Decimal:return i===32?c?$e:br:c?Lt:Ot;case y.Interval:return u===De.DAY_TIME?Sr:u===De.YEAR_MONTH?$e:Ar;case y.FixedSizeBinary:return Mr;case y.Utf8:return xr;case y.LargeUtf8:return Dr;case y.Binary:return Ir;case y.LargeBinary:return Fr;case y.BinaryView:return $r;case y.Utf8View:return Gr;case y.List:return kr;case y.LargeList:return Rr;case y.Map:return A?Hr:Lr;case y.ListView:return Tr;case y.LargeListView:return Br;case y.FixedSizeList:return Or;case y.Struct:return H?Pr:Nt;case y.RunEndEncoded:return Nr;case y.Dictionary:return Wr;case y.Union:return a?Cr:Pt}throw new Error(Ve(n))}function Xi(r,e){return e?class extends e{constructor(i){super(new r(i))}}:r}function bu(r,e){return{offset:pe(r,e),metadataLength:ne(r,e+8),bodyLength:pe(r,e+16)}}function Wn(r,e){return Ie(r,e,24,bu)}function jr(r,e,n){let i=be(r,e);if(i(10,Te,0))throw new Error("Record batch compression not implemented");let a=n<xe.V4?8:0;return{length:i(4,pe,0),nodes:Ie(r,i(6,Te),16,(l,u)=>({length:pe(l,u),nullCount:pe(l,u+8)})),regions:Ie(r,i(8,Te),16+a,(l,u)=>({offset:pe(l,u+a),length:pe(l,u+a+8)})),variadic:Ie(r,i(12,Te),8,pe)}}function Ji(r,e,n){let i=be(r,e);return{id:i(4,pe,0),data:i(6,(a,l)=>jr(a,l,n)),isDelta:i(8,qe,!1)}}function Vn(r,e,n,i){Ae(n,y,Ve);let a=be(r,e);switch(n){case y.Binary:return In();case y.Utf8:return or();case y.LargeBinary:return Un();case y.LargeUtf8:return Mn();case y.List:return cr(i[0]);case y.ListView:return Hn(i[0]);case y.LargeList:return On(i[0]);case y.LargeListView:return Cn(i[0]);case y.Struct:return ur(i);case y.RunEndEncoded:return Ln(i[0],i[1]);case y.Int:return ir(a(4,ne,0),a(6,qe,!1));case y.Float:return An(a(4,me,pt.HALF));case y.Decimal:return Fn(a(4,ne,0),a(6,ne,0),a(8,ne,128));case y.Date:return xn(a(4,me,Ne.MILLISECOND));case y.Time:return Dn(a(4,me,fe.MILLISECOND));case y.Timestamp:return ar(a(4,me,fe.SECOND),a(6,tt));case y.Interval:return kn(a(4,me,De.YEAR_MONTH));case y.Duration:return Bn(a(4,me,fe.MILLISECOND));case y.FixedSizeBinary:return Tn(a(4,ne,0));case y.FixedSizeList:return lr(i[0],a(4,ne,0));case y.Map:return Hi(a(4,qe,!1),i[0]);case y.Union:return Rn(a(4,me,We.Sparse),i,Ie(r,a(6,Te),4,ne))}return{typeId:n}}function Vt(r,e){let n=Ie(r,e,4,(i,a)=>{let l=be(i,a);return[l(4,tt),l(6,tt)]});return n.length?new Map(n):null}function zr(r,e,n){let i=be(r,e);return{version:n,endianness:i(4,me,0),fields:i(6,gu,[]),metadata:i(8,Vt)}}function gu(r,e){return Ie(r,e,4,Qi)}function Qi(r,e){let n=be(r,e),i=n(8,Ut,y.NONE),a=n(10,Te,0),l=n(12,wu),u=n(14,(d,c)=>yu(d,c)),h=Vn(r,a,i,u);return l&&(l.dictionary=h,h=l),{name:n(4,tt),type:h,nullable:n(6,qe,!1),metadata:n(16,Vt)}}function yu(r,e){let n=Ie(r,e,4,Qi);return n.length?n:null}function wu(r,e){if(!e)return null;let n=be(r,e);return sr(null,n(6,vu,bt()),n(8,qe,!1),n(4,pe,0))}function vu(r,e){return Vn(r,e,y.Int)}var Eu=(r,e)=>`Expected to read ${r} metadata bytes, but only read ${e}.`,Su=(r,e)=>`Expected to read ${r} bytes for message body, but only read ${e}.`,Au=r=>`Unsupported message type: ${r} (${nr(Ee,r)})`;function Yr(r,e){let n=ne(r,e)||0;if(e+=et,n===-1&&(n=ne(r,e)||0,e+=et),n===0)return null;let i=r.subarray(e,e+=n);if(i.byteLength<n)throw new Error(Eu(n,i.byteLength));let a=be(i,0),l=a(4,me,xe.V1),u=a(6,Ut,Ee.NONE),h=a(8,Te,0),d=a(10,pe,0),c;if(h){let A=u===Ee.Schema?zr:u===Ee.DictionaryBatch?Ji:u===Ee.RecordBatch?jr:null;if(!A)throw new Error(Au(u));if(c=A(i,h,l),d>0){let H=r.subarray(e,e+=d);if(H.byteLength<d)throw new Error(Su(d,H.byteLength));c.body=H}else u!==Ee.Schema&&(c.body=new Uint8Array(0))}return{version:l,type:u,index:e,content:c}}function Zi(r){let e=Ui(r)?new Uint8Array(r):r;return e instanceof Uint8Array&&Iu(e)?xu(e):Fu(e)}function Iu(r){if(!r||r.length<4)return!1;for(let e=0;e<6;++e)if(Rt[e]!==r[e])return!1;return!0}function Fu(r){let e=[r].flat(),n,i=[],a=[];for(let l of e){if(!(l instanceof Uint8Array))throw new Error("IPC data batch was not a Uint8Array.");let u=0;for(;;){let h=Yr(l,u);if(h===null)break;if(u=h.index,!!h.content)switch(h.type){case Ee.Schema:n||(n=h.content);break;case Ee.RecordBatch:i.push(h.content);break;case Ee.DictionaryBatch:a.push(h.content);break}}}return{schema:n,dictionaries:a,records:i,metadata:null}}function xu(r){let e=r.byteLength-(Rt.length+4),n=ne(r,e),i=be(r,e-n),a=i(4,me,xe.V1),l=i(8,Wn,[]),u=i(10,Wn,[]);return{schema:i(6,(h,d)=>zr(h,d,a)),dictionaries:l.map(({offset:h})=>Yr(r,h).content),records:u.map(({offset:h})=>Yr(r,h).content),metadata:i(12,Vt)}}function Kr(r,e){return Du(Zi(r),e)}function Du(r,e={}){let{schema:n={fields:[]},dictionaries:i,records:a}=r,{version:l,fields:u}=n,h=new Map,d=Ru(e,l,h),c=new Map;ku(n,U=>{let k=U.type;k.typeId===y.Dictionary&&c.set(k.id,k.dictionary)});let A=new Map;for(let U of i){let{id:k,data:Z,isDelta:Q,body:ue}=U,ie=c.get(k),K=$n(ie,d({...Z,body:ue}));if(A.has(k)){let D=A.get(k);Q||D.clear(),D.add(K)}else{if(Q)throw new Error("Delta update can not be first dictionary batch.");A.set(k,Nn(ie).add(K))}}A.forEach((U,k)=>h.set(k,U.done()));let H=u.map(U=>Nn(U.type));for(let U of a){let k=d(U);u.forEach((Z,Q)=>H[Q].add($n(Z.type,k)))}return new wt(n,H.map(U=>U.done()),e.useProxy)}function ku(r,e){r.fields.forEach(function n(i){var a,l,u;e(i),(l=(a=i.type.dictionary)==null?void 0:a.children)==null||l.forEach(n),(u=i.type.children)==null||u.forEach(n)})}function Ru(r,e,n){let i={version:e,options:r,dictionary:a=>n.get(a)};return a=>{let{length:l,nodes:u,regions:h,variadic:d,body:c}=a,A=-1,H=-1,U=-1;return{...i,length:l,node:()=>u[++A],buffer:k=>{let{length:Z,offset:Q}=h[++H];return k?new k(c.buffer,c.byteOffset+Q,Z/k.BYTES_PER_ELEMENT):c.subarray(Q,Q+Z)},variadic:()=>d[++U],visit(k){return k.map(Z=>$n(Z.type,this))}}}}function $n(r,e){let{typeId:n}=r,{options:i,node:a,buffer:l,variadic:u,version:h}=e,d=Wt(r,i),c={...a(),type:r};if(n===y.Null)return new d({...c,nullCount:c.length});switch(n){case y.Bool:case y.Int:case y.Time:case y.Duration:case y.Float:case y.Decimal:case y.Date:case y.Timestamp:case y.Interval:case y.FixedSizeBinary:return new d({...c,validity:l(),values:l(r.values)});case y.Utf8:case y.LargeUtf8:case y.Binary:case y.LargeBinary:return new d({...c,validity:l(),offsets:l(r.offsets),values:l()});case y.BinaryView:case y.Utf8View:return new d({...c,validity:l(),values:l(),data:Array.from({length:u()},()=>l())});case y.List:case y.LargeList:case y.Map:return new d({...c,validity:l(),offsets:l(r.offsets),children:e.visit(r.children)});case y.ListView:case y.LargeListView:return new d({...c,validity:l(),offsets:l(r.offsets),sizes:l(r.offsets),children:e.visit(r.children)});case y.FixedSizeList:case y.Struct:return new d({...c,validity:l(),children:e.visit(r.children)});case y.RunEndEncoded:return new d({...c,children:e.visit(r.children)});case y.Dictionary:{let{id:A,indices:H}=r;return new d({...c,validity:l(),values:l(H.values)}).setDictionary(e.dictionary(A))}case y.Union:return h<xe.V5&&l(),new d({...c,typeIds:l(Tt),offsets:r.mode===We.Sparse?null:l(r.offsets),children:e.visit(r.children)});default:throw new Error(Ve(n))}}var od=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var qr=class{constructor(e,n){this._bindings=e,this._conn=n}close(){this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}query(e){let n=this._bindings.runQuery(this._conn,e);return Kr(n)}async send(e,n=!1){let i=this._bindings.startPendingQuery(this._conn,e,n);for(;i==null;)i=await new Promise((a,l)=>{try{a(this._bindings.pollPendingQuery(this._conn))}catch(u){console.log(u),u.message.includes("worker is not set!")?l(new Error("Worker has been terminated")):l(u)}});return new Xr(this._bindings,this._conn,i)}cancelSent(){return this._bindings.cancelPendingQuery(this._conn)}getTableNames(e){return this._bindings.getTableNames(this._conn,e)}prepare(e){let n=this._bindings.createPrepared(this._conn,e);return new Gn(this._bindings,this._conn,n)}insertArrowFromIPCStream(e,n){this._bindings.insertArrowFromIPCStream(this._conn,e,n)}insertCSVFromPath(e,n){this._bindings.insertCSVFromPath(this._conn,e,n)}insertJSONFromPath(e,n){this._bindings.insertJSONFromPath(this._conn,e,n)}},Xr=class{constructor(e,n,i){this.bindings=e;this.conn=n;this.header=i;this._first=!0,this._depleted=!1}next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;do e=this.bindings.fetchQueryResults(this.conn);while(e==null);return this._depleted=e.length==0,{done:this._depleted,value:e}}[Symbol.iterator](){return this}},Gn=class{constructor(e,n,i){this.bindings=e,this.connectionId=n,this.statementId=i}close(){this.bindings.closePrepared(this.connectionId,this.statementId)}query(...e){let n=this.bindings.runPrepared(this.connectionId,this.statementId,e);return Kr(n)}send(...e){let n=this.bindings.sendPrepared(this.connectionId,this.statementId,e);return new Xr(this.bindings,this.connectionId,n)}};function oo(r){return r<=255}function ao(r){return r===256}var lo=new TextEncoder,co=new TextDecoder("utf-8");function jn(r,e,n){let i=lo.encode(n),a=r._malloc(i.byteLength),l=r.HEAPU8.subarray(a,a+i.byteLength);l.set(i),r.HEAPF64[(e>>3)+0]=1,r.HEAPF64[(e>>3)+1]=a,r.HEAPF64[(e>>3)+2]=l.byteLength}function Yn(r){switch(r){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function zn(r,e,n,i){let a=r.HEAPU8.subarray(e,e+i*Yn(n));switch(n){case"UINT8":return new Uint8Array(a.buffer,a.byteOffset,i);case"INT8":return new Int8Array(a.buffer,a.byteOffset,i);case"INT32":return new Int32Array(a.buffer,a.byteOffset,i);case"FLOAT":return new Float32Array(a.buffer,a.byteOffset,i);case"DOUBLE":return new Float64Array(a.buffer,a.byteOffset,i);case"VARCHAR":return new Float64Array(a.buffer,a.byteOffset,i);default:return new Array(0)}}function uo(r,e,n){let i=r.HEAPU8.subarray(e,e+n);return new Uint8Array(i.buffer,i.byteOffset,n)}function Jr(r,e,n){let i=r.HEAPU8.subarray(e,e+n*8);return new Float64Array(i.buffer,i.byteOffset,n)}function fo(r,e,n,i,a,l,u,h){try{let d=r._udfFunctions.get(i);if(!d){jn(e,n,"Unknown UDF with id: "+i);return}let c=co.decode(e.HEAPU8.subarray(a,a+l)),A=JSON.parse(c),H=Jr(e,u,h/8),U=E=>{var F;let M=null;switch(E.validityBuffer!==void 0&&(M=uo(e,H[E.validityBuffer],A.rows)),E.physicalType){case"VARCHAR":{if(E.dataBuffer===null||E.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(E.lengthBuffer===null||E.lengthBuffer===void 0)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let V=zn(e,H[E.dataBuffer],E.physicalType,A.rows),S=[],O=Jr(e,H[E.lengthBuffer],A.rows);for(let C=0;C<A.rows;++C){if(M!=null&&!M[C]){S.push(null);continue}let j=e.HEAPU8.subarray(V[C],V[C]+O[C]),le=co.decode(j);S.push(le)}return C=>S[C]}case"STRUCT":{let V={},S=[];for(let O=0;O<(((F=E.children)==null?void 0:F.length)||0);++O){let C=E.children[O],j=U(C);S.push(le=>{V[C.name]=j(le)})}return M!=null?O=>{if(!M[O])return null;for(let C of S)C(O);return V}:O=>{for(let C of S)C(O);return V}}default:{if(E.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for argument of type: "+E.physicalType);let V=zn(e,H[E.dataBuffer],E.physicalType,A.rows);return M!=null?S=>M[S]?V[S]:null:S=>V[S]}}},k=[];for(let E=0;E<A.args.length;++E)k.push(U(A.args[E]));let Z=A.rows*Yn(A.ret.physicalType),Q=e._malloc(Z),ue=zn(e,Q,A.ret.physicalType,A.rows),ie=e._malloc(A.rows),K=uo(e,ie,A.rows);if(ue.length==0||K.length==0){jn(e,n,"Can't create physical arrays for result");return}let D=ue;A.ret.physicalType=="VARCHAR"&&(D=new Array(A.rows));let re=[];for(let E=0;E<A.args.length;++E)re.push(null);for(let E=0;E<A.rows;++E){for(let F=0;F<A.args.length;++F)re[F]=k[F](E);let M=d.func(...re);D[E]=M,K[E]=M==null?0:1}let de=0;switch(A.ret.physicalType){case"VARCHAR":{let E=new Array(0);de=e._malloc(A.rows*Yn("DOUBLE"));let M=Jr(e,de,A.rows),F=0;for(let C=0;C<A.rows;++C){let j=lo.encode(D[C]||"");E.push(j),M[C]=j.length,F+=j.length}let V=e._malloc(F),S=e.HEAPU8.subarray(V,V+F),O=0;for(let C=0;C<A.rows;++C){ue[C]=O;let j=E[C];S.subarray(O,O+j.length).set(j),O+=j.length}}}let w=3*8,T=e._malloc(w),L=Jr(e,T,3);L[0]=Q,L[1]=ie,L[2]=de,e.HEAPF64[(n>>3)+0]=0,e.HEAPF64[(n>>3)+1]=T,e.HEAPF64[(n>>3)+2]=0}catch(d){jn(e,n,d.toString())}}function el(){let r=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),r.decode(e))}var tl=el();function Be(r,e){console.error(`FAIL WITH: ${e}`),r.ccall("duckdb_web_fail_with",null,["string"],[e])}function it(r,e,n){let i=r.HEAPU8.subarray(e,e+n),a=new Uint8Array(new ArrayBuffer(i.byteLength));return a.set(i),a}function Y(r,e,n){return tl(r.HEAPU8.subarray(e,e+n))}function te(r,e,n,i){let a=r.stackSave(),l=r.stackAlloc(3*8);n.unshift("number"),i.unshift(l),r.ccall(e,null,n,i);let u=r.HEAPF64[(l>>3)+0],h=r.HEAPF64[(l>>3)+1],d=r.HEAPF64[(l>>3)+2];return r.stackRestore(a),[u,h,d]}function se(r){r.ccall("duckdb_web_clear_response",null,[],[])}var Qr=class{constructor(e){let n=new Float64Array(e.buffer,e.byteOffset,e.byteLength/8),i=new Uint8Array(new ArrayBuffer(e.byteLength));i.set(e.subarray(7*8)),this.totalFileReadsCold=n[0],this.totalFileReadsAhead=n[1],this.totalFileReadsCached=n[2],this.totalFileWrites=n[3],this.totalPageAccesses=n[4],this.totalPageLoads=n[5],this.blockSize=n[6],this.blockStats=i}getBlockStats(e,n){return n=n||{file_reads_cold:0,file_reads_ahead:0,file_reads_cached:0,file_writes:0,page_accesses:0,page_loads:0},n.file_writes=this.blockStats[e*3+0]&15,n.file_reads_cold=this.blockStats[e*3+0]>>4,n.file_reads_ahead=this.blockStats[e*3+1]&15,n.file_reads_cached=this.blockStats[e*3+1]>>4,n.page_accesses=this.blockStats[e*3+1]&15,n.page_loads=this.blockStats[e*3+1]>>4,n}};var vt=new TextEncoder;var Zr=class{constructor(e,n){this._instance=null;this._initPromise=null;this._initPromiseResolver=()=>{};this.onInstantiationProgress=[];this._logger=e,this._runtime=n}get logger(){return this._logger}get mod(){return this._instance}get pthread(){return this.mod.PThread||null}async instantiate(e=n=>{}){return this._instance!=null?this:(this._initPromise!=null&&(this.onInstantiationProgress.push(e),await this._initPromise),this._initPromise=new Promise(n=>{this._initPromiseResolver=n}),this.onInstantiationProgress=[e],this._instance=await this.instantiateImpl({print:console.log.bind(console),printErr:console.log.bind(console),onRuntimeInitialized:this._initPromiseResolver}),await this._initPromise,this._initPromise=null,this.onInstantiationProgress=this.onInstantiationProgress.filter(n=>n!=e),globalThis.DUCKDB_BINDINGS=this,this)}open(e){let[n,i,a]=te(this.mod,"duckdb_web_open",["string"],[JSON.stringify(e)]);if(n!==0)throw new Error(Y(this.mod,i,a));se(this.mod)}reset(){let[e,n,i]=te(this.mod,"duckdb_web_reset",[],[]);if(e!==0)throw new Error(Y(this.mod,n,i));se(this.mod)}getVersion(){let[e,n,i]=te(this.mod,"duckdb_web_get_version",[],[]);if(e!==0)throw new Error(Y(this.mod,n,i));let a=Y(this.mod,n,i);return se(this.mod),a}getFeatureFlags(){return this.mod.ccall("duckdb_web_get_feature_flags","number",[],[])}tokenize(e){let n=vt.encode(e),i=this.mod._malloc(n.length);this.mod.HEAPU8.subarray(i,i+n.length).set(n);let[l,u,h]=te(this.mod,"duckdb_web_tokenize_buffer",["number","number"],[i,n.length]);if(this.mod._free(i),l!==0)throw new Error(Y(this.mod,u,h));let d=Y(this.mod,u,h);return se(this.mod),JSON.parse(d)}connect(){let e=this.mod.ccall("duckdb_web_connect","number",[],[]);return new qr(this,e)}disconnect(e){if(this.mod.ccall("duckdb_web_disconnect",null,["number"],[e]),this.pthread)for(let n of[...this.pthread.runningWorkers,...this.pthread.unusedWorkers])n.postMessage({cmd:"dropUDFFunctions",connectionId:e})}runQuery(e,n){let i=vt.encode(n),a=this.mod._malloc(i.length);this.mod.HEAPU8.subarray(a,a+i.length).set(i);let[u,h,d]=te(this.mod,"duckdb_web_query_run_buffer",["number","number","number"],[e,a,i.length]);if(this.mod._free(a),u!==0)throw new Error(Y(this.mod,h,d));let c=it(this.mod,h,d);return se(this.mod),c}startPendingQuery(e,n,i=!1){let a=vt.encode(n),l=this.mod._malloc(a.length);this.mod.HEAPU8.subarray(l,l+a.length).set(a);let[h,d,c]=te(this.mod,"duckdb_web_pending_query_start_buffer",["number","number","number","boolean"],[e,l,a.length,i]);if(this.mod._free(l),h!==0)throw new Error(Y(this.mod,d,c));if(d==0)return null;let A=it(this.mod,d,c);return se(this.mod),A}pollPendingQuery(e){let[n,i,a]=te(this.mod,"duckdb_web_pending_query_poll",["number"],[e]);if(n!==0)throw new Error(Y(this.mod,i,a));if(i==0)return null;let l=it(this.mod,i,a);return se(this.mod),l}cancelPendingQuery(e){return this.mod.ccall("duckdb_web_pending_query_cancel","boolean",["number"],[e])}fetchQueryResults(e){let[n,i,a]=te(this.mod,"duckdb_web_query_fetch_results",["number"],[e]);if(ao(n))return se(this.mod),null;if(!oo(n))throw new Error("Unexpected StatusCode from duckdb_web_query_fetch_results ("+n+") and with self reported error as"+Y(this.mod,i,a));if(n!==0)throw new Error(Y(this.mod,i,a));let l=it(this.mod,i,a);return se(this.mod),l}getTableNames(e,n){let i=vt.encode(n),a=this.mod._malloc(i.length);this.mod.HEAPU8.subarray(a,a+i.length).set(i);let[u,h,d]=te(this.mod,"duckdb_web_get_tablenames_buffer",["number","number","number"],[e,a,i.length]);if(this.mod._free(a),u!==0)throw new Error(Y(this.mod,h,d));let c=Y(this.mod,h,d);return se(this.mod),JSON.parse(c)}createPrepared(e,n){let i=vt.encode(n),a=this.mod._malloc(i.length);this.mod.HEAPU8.subarray(a,a+i.length).set(i);let[u,h,d]=te(this.mod,"duckdb_web_prepared_create_buffer",["number","number","number"],[e,a,i.length]);if(this.mod._free(a),u!==0)throw new Error(Y(this.mod,h,d));return se(this.mod),h}closePrepared(e,n){let[i,a,l]=te(this.mod,"duckdb_web_prepared_close",["number","number"],[e,n]);if(i!==0)throw new Error(Y(this.mod,a,l));se(this.mod)}runPrepared(e,n,i){let[a,l,u]=te(this.mod,"duckdb_web_prepared_run",["number","number","string"],[e,n,JSON.stringify(i)]);if(a!==0)throw new Error(Y(this.mod,l,u));let h=it(this.mod,l,u);return se(this.mod),h}sendPrepared(e,n,i){let[a,l,u]=te(this.mod,"duckdb_web_prepared_send",["number","number","string"],[e,n,JSON.stringify(i)]);if(a!==0)throw new Error(Y(this.mod,l,u));let h=it(this.mod,l,u);return se(this.mod),h}insertArrowFromIPCStream(e,n,i){if(n.length==0)return;let a=this.mod._malloc(n.length);this.mod.HEAPU8.subarray(a,a+n.length).set(n);let u=i?JSON.stringify(i):"",[h,d,c]=te(this.mod,"duckdb_web_insert_arrow_from_ipc_stream",["number","number","number","string"],[e,a,n.length,u]);if(h!==0)throw new Error(Y(this.mod,d,c))}insertCSVFromPath(e,n,i){let a=JSON.stringify(i),[l,u,h]=te(this.mod,"duckdb_web_insert_csv_from_path",["number","string","string"],[e,n,a]);if(l!==0)throw new Error(Y(this.mod,u,h))}insertJSONFromPath(e,n,i){let a=JSON.stringify(i),[l,u,h]=te(this.mod,"duckdb_web_insert_json_from_path",["number","string","string"],[e,n,a]);if(l!==0)throw new Error(Y(this.mod,u,h))}globFiles(e){let[n,i,a]=te(this.mod,"duckdb_web_fs_glob_file_infos",["string"],[e]);if(n!==0)throw new Error(Y(this.mod,i,a));let l=Y(this.mod,i,a);se(this.mod);let u=JSON.parse(l);return u==null?[]:u}registerFileURL(e,n,i,a=!1){n===void 0&&(n=e);let[l,u,h]=te(this.mod,"duckdb_web_fs_register_file_url",["string","string"],[e,n,i,a]);if(l!==0)throw new Error(Y(this.mod,u,h));se(this.mod)}registerFileText(e,n){let i=vt.encode(n);this.registerFileBuffer(e,i)}registerFileBuffer(e,n){let i=this.mod._malloc(n.length);this.mod.HEAPU8.subarray(i,i+n.length).set(n);let[l,u,h]=te(this.mod,"duckdb_web_fs_register_file_buffer",["string","number","number"],[e,i,n.length]);if(l!==0)throw new Error(Y(this.mod,u,h));se(this.mod)}async prepareFileHandle(e,n){if(n===3&&this._runtime.prepareFileHandles){let i=await this._runtime.prepareFileHandles([e],3);for(let a of i){let{handle:l,path:u,fromCached:h}=a;!h&&l.getSize()&&await this.registerFileHandleAsync(u,l,3,!0)}return}throw new Error(`prepareFileHandle: unsupported protocol ${n}`)}async prepareDBFileHandle(e,n){if(n===3&&this._runtime.prepareDBFileHandle){let i=await this._runtime.prepareDBFileHandle(e,3);for(let a of i){let{handle:l,path:u,fromCached:h}=a;!h&&l.getSize()&&await this.registerFileHandleAsync(u,l,3,!0)}return}throw new Error(`prepareDBFileHandle: unsupported protocol ${n}`)}async prepareFileHandleAsync(e,n,i,a){if(i===3&&!(n instanceof FileSystemSyncAccessHandle)){if(n instanceof FileSystemFileHandle){let l=n;try{n=await l.createSyncAccessHandle()}catch(u){throw new Error(u.message+":"+e)}}else if(e!=null)try{n=await(await(await navigator.storage.getDirectory()).getFileHandle(e)).createSyncAccessHandle()}catch(l){throw new Error(l.message+":"+e)}}return n}async registerFileHandleAsync(e,n,i,a){let l=await this.prepareFileHandleAsync(e,n,i,a);this.registerFileHandle(e,l,i,a)}registerFileHandle(e,n,i,a){var d;let[l,u,h]=te(this.mod,"duckdb_web_fs_register_file_url",["string","string","number","boolean"],[e,e,i,a]);if(l!==0)throw new Error(Y(this.mod,u,h));if(se(this.mod),globalThis.DUCKDB_RUNTIME._files=(globalThis.DUCKDB_RUNTIME._files||new Map).set(e,n),(d=globalThis.DUCKDB_RUNTIME._preparedHandles)!=null&&d[e]&&delete globalThis.DUCKDB_RUNTIME._preparedHandles[e],this.pthread){for(let c of this.pthread.runningWorkers)c.postMessage({cmd:"registerFileHandle",fileName:e,fileHandle:n});for(let c of this.pthread.unusedWorkers)c.postMessage({cmd:"dropFileHandle",fileName:e})}}dropFile(e){let[n,i,a]=te(this.mod,"duckdb_web_fs_drop_file",["string"],[e]);if(n!==0)throw new Error(Y(this.mod,i,a));se(this.mod)}dropFiles(e){let n=[],i=-1;try{for(let h of e!=null?e:[])if(h!=null&&h.length>0){let d=this.mod.lengthBytesUTF8(h)+1,c=this.mod._malloc(d);if(!c)throw new Error(`Failed to allocate memory for string: ${h}`);this.mod.stringToUTF8(h,c,d),n.push(c)}if(i=this.mod._malloc(n.length*4),!i)throw new Error("Failed to allocate memory for pointers array");for(let h=0;h<n.length;h++)this.mod.HEAP32[(i>>2)+h]=n[h];let[a,l,u]=te(this.mod,"duckdb_web_fs_drop_files",["number","number"],[i,n.length]);if(a!==0)throw new Error(Y(this.mod,l,u));se(this.mod)}finally{for(let a of n)this.mod._free(a);i>0&&this.mod._free(i)}}flushFiles(){this.mod.ccall("duckdb_web_flush_files",null,[],[])}copyFileToPath(e,n){let[i,a,l]=te(this.mod,"duckdb_web_copy_file_to_path",["string","string"],[e,n]);if(i!==0)throw new Error(Y(this.mod,a,l));se(this.mod)}copyFileToBuffer(e){let[n,i,a]=te(this.mod,"duckdb_web_copy_file_to_buffer",["string"],[e]);if(n!==0)throw new Error(Y(this.mod,i,a));let l=this.mod.HEAPU8.subarray(i,i+a),u=new Uint8Array(l.length);return u.set(l),se(this.mod),u}async registerOPFSFileName(e){if(e.startsWith("opfs://"))return this.prepareFileHandle(e,3);throw new Error("Not an OPFS file name: "+e)}collectFileStatistics(e,n){let[i,a,l]=te(this.mod,"duckdb_web_collect_file_stats",["string","boolean"],[e,n]);if(i!==0)throw new Error(Y(this.mod,a,l))}exportFileStatistics(e){let[n,i,a]=te(this.mod,"duckdb_web_export_file_stats",["string"],[e]);if(n!==0)throw new Error(Y(this.mod,i,a));return new Qr(this.mod.HEAPU8.subarray(i,i+a))}};var en=class{constructor(){this._bindings=null;this._nextMessageId=0}log(e){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:e},[])}sendOK(e){this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"OK",data:null},[])}failWith(e,n){let i={name:n.name,message:n.message,stack:n.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"ERROR",data:i},[])}async onMessage(e){switch(e.type){case"PING":this.sendOK(e);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(e,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(e.data[0],e.data[1],n=>{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"INSTANTIATE_PROGRESS",data:n},[])}),this.sendOK(e)}catch(n){console.log(n),this._bindings=null,this.failWith(e,n)}return;default:break}if(!this._bindings)return this.failWith(e,new Error("duckdb is not initialized"));try{switch(e.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(e);break;case"OPEN":{let n=e.data.path;n!=null&&n.startsWith("opfs://")&&(await this._bindings.prepareDBFileHandle(n,3),e.data.useDirectIO=!0),this._bindings.open(e.data),this.sendOK(e);break}case"DROP_FILE":this._bindings.dropFile(e.data),this.sendOK(e);break;case"DROP_FILES":this._bindings.dropFiles(e.data),this.sendOK(e);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(e);break;case"CONNECT":{let n=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"CONNECTION_INFO",data:n.useUnsafe((i,a)=>a)},[]);break}case"DISCONNECT":this._bindings.disconnect(e.data),this.sendOK(e);break;case"CREATE_PREPARED":{let n=this._bindings.createPrepared(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"PREPARED_STATEMENT_ID",data:n},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(e.data[0],e.data[1]),this.sendOK(e);break}case"RUN_PREPARED":{let n=this._bindings.runPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:n},[n.buffer]);break}case"RUN_QUERY":{let n=this._bindings.runQuery(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:n},[n.buffer]);break}case"SEND_PREPARED":{let n=this._bindings.sendPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER",data:n},[n.buffer]);break}case"START_PENDING_QUERY":{let n=this._bindings.startPendingQuery(e.data[0],e.data[1],e.data[2]),i=[];n&&i.push(n.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:n},i);break}case"POLL_PENDING_QUERY":{let n=this._bindings.pollPendingQuery(e.data),i=[];n&&i.push(n.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:n},i);break}case"CANCEL_PENDING_QUERY":{let n=this._bindings.cancelPendingQuery(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SUCCESS",data:n},[]);break}case"FETCH_QUERY_RESULTS":{let n=this._bindings.fetchQueryResults(e.data),i=n?[n.buffer]:[];this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_CHUNK",data:n},i);break}case"GET_TABLE_NAMES":{let n=this._bindings.getTableNames(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"TABLE_NAMES",data:n},[]);break}case"GLOB_FILE_INFOS":{let n=this._bindings.globFiles(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_INFOS",data:n},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_FILE_HANDLE":await this._bindings.registerFileHandleAsync(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(e.data[0],e.data[1]),this.sendOK(e);break;case"COPY_FILE_TO_BUFFER":{let n=this._bindings.copyFileToBuffer(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_BUFFER",data:n},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_OPFS_FILE_NAME":await this._bindings.registerOPFSFileName(e.data[0]),this.sendOK(e);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(e.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"TOKENIZE":{let n=this._bindings.tokenize(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SCRIPT_TOKENS",data:n},[]);break}}}catch(n){return console.log(n),this.failWith(e,n)}}};var vo=Ti(wo());var tn=class extends Zr{constructor(e,n,i,a){super(e,n),this.mainModuleURL=i,this.pthreadWorkerURL=a}locateFile(e,n){if(e.endsWith(".wasm"))return this.mainModuleURL;if(e.endsWith(".worker.js")){if(!this.pthreadWorkerURL)throw new Error("Missing DuckDB worker URL!");return this.pthreadWorkerURL}throw new Error(`WASM instantiation requested unexpected file: prefix=${n} path=${e}`)}instantiateWasm(e,n){globalThis.DUCKDB_RUNTIME=this._runtime;let i=this.onInstantiationProgress;if(WebAssembly.instantiateStreaming)if(typeof TransformStream=="function"){let l=(async()=>{var Z;let u=new Request(this.mainModuleURL),h=await fetch(u),d=h.headers.get("content-length"),c=d&&parseInt(d,10)||0,A=new Date,H={startedAt:A,updatedAt:A,bytesTotal:c||0,bytesLoaded:0},U={transform(Q,ue){H.bytesLoaded+=Q.byteLength;let ie=new Date;if(ie.getTime()-H.updatedAt.getTime()<20){H.updatedAt=ie,ue.enqueue(Q);return}for(let K of i)K(H);ue.enqueue(Q)}},k=new TransformStream(U);return new Response((Z=h.body)==null?void 0:Z.pipeThrough(k),h)})();WebAssembly.instantiateStreaming(l,e).then(u=>{n(u.instance,u.module)})}else{console.warn("instantiating without progress handler since transform streams are unavailable");let a=new Request(this.mainModuleURL);WebAssembly.instantiateStreaming(fetch(a),e).then(l=>{n(l.instance,l.module)})}else if(typeof XMLHttpRequest=="function"){let a=new XMLHttpRequest,l=this.mainModuleURL,u=new Date,h={startedAt:u,updatedAt:u,bytesTotal:0,bytesLoaded:0};a.open("GET",l),a.responseType="arraybuffer",a.onerror=d=>{throw this.logger.log({timestamp:new Date,level:4,origin:3,topic:5,event:2,value:"Failed to load WASM: "+d}),new Error(d.toString())},a.onprogress=d=>{h.bytesTotal=d.total,h.bytesLoaded=d.loaded;let c=new Date;if(c.getTime()-h.updatedAt.getTime()<20){h.updatedAt=c;return}for(let A of i)A(h)},a.onload=()=>{WebAssembly.instantiate(a.response,e).then(d=>{n(d.instance,d.module)}).catch(d=>{throw this.logger.log({timestamp:new Date,level:4,origin:3,topic:5,event:2,value:"Failed to instantiate WASM: "+d}),new Error(d)})},a.send()}else console.warn("instantiating with manual fetch since streaming instantiation and xhrs are unavailable"),(async()=>{let l=new Request(this.mainModuleURL),h=await(await fetch(l)).arrayBuffer();WebAssembly.instantiate(h,e).then(d=>{n(d.instance,d.module)})})();return[]}};var rn=class extends tn{constructor(e,n,i,a=null){super(e,n,i,a)}instantiateImpl(e){return(0,vo.default)({...e,instantiateWasm:this.instantiateWasm.bind(this),locateFile:this.locateFile.bind(this)})}};var Je=Ti(Ao()),Io=function(r,e,n){var i;if((i=r==null?void 0:r.endpoint)!=null&&i.startsWith("http")){let a=`${r==null?void 0:r.endpoint}`,l=a.indexOf("://")+3;return a.substring(l)}else return r!=null&&r.endpoint?`${n}.${r==null?void 0:r.endpoint}`:`${n}.s3.amazonaws.com`};function nl(r,e,n){var l,u,h,d;let i=Fo(e),a=i.path;return xo(r)&&(a=`/${i.bucket}${a}`),{url:a,query:"",host:Io(r,e,i.bucket),region:(l=r==null?void 0:r.region)!=null?l:"",service:"s3",method:n,accessKeyId:(u=r==null?void 0:r.accessKeyId)!=null?u:"",secretAccessKey:(h=r==null?void 0:r.secretAccessKey)!=null?h:"",sessionToken:(d=r==null?void 0:r.sessionToken)!=null?d:"",dateNow:new Date().toISOString().replace(/-/g,"").split("T")[0],datetimeNow:new Date().toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}function sl(r,e=!1){let n="0123456789ABCDEF",i="";for(let a=0;a<r.length;a++){let l=r[a];l>="A"&&l<="Z"||l>="a"&&l<="z"||l>="0"&&l<="9"||l=="_"||l=="-"||l=="~"||l=="."?i+=l:l=="/"?e?i+="%2F":i+=l:(i+="%",i+=n[l.charCodeAt(0)>>4],i+=n[l.charCodeAt(0)&15])}return i}function il(r,e=null){var Z;let n=(Z=e==null?void 0:e.contentHash)!=null?Z:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",i=new Map;i.set("x-amz-date",r.datetimeNow),i.set("x-amz-content-sha256",n),r.sessionToken&&i.set("x-amz-security-token",r.sessionToken);let a="";e!=null&&e.contentType&&(a+="content-type;"),a+="host;x-amz-content-sha256;x-amz-date",r.sessionToken&&(a+=";x-amz-security-token");let l=r.method+`
`+sl(r.url)+`
`+r.query;e!=null&&e.contentType&&(l+=`
content-type:`+(e==null?void 0:e.contentType)),l+=`
host:`+r.host+`
x-amz-content-sha256:`+n+`
x-amz-date:`+r.datetimeNow,r.sessionToken&&r.sessionToken.length>0&&(l+=`
x-amz-security-token:`+r.sessionToken),l+=`

`+a+`
`+n;let u=(0,Je.sha256)(l),h=`AWS4-HMAC-SHA256
`+r.datetimeNow+`
`+r.dateNow+"/"+r.region+"/"+r.service+`/aws4_request
`+u,d="AWS4"+r.secretAccessKey,c=Je.sha256.hmac.arrayBuffer(d,r.dateNow),A=Je.sha256.hmac.arrayBuffer(c,r.region),H=Je.sha256.hmac.arrayBuffer(A,r.service),U=Je.sha256.hmac.arrayBuffer(H,"aws4_request"),k=Je.sha256.hmac(U,h);return i.set("Authorization","AWS4-HMAC-SHA256 Credential="+r.accessKeyId+"/"+r.dateNow+"/"+r.region+"/"+r.service+"/aws4_request, SignedHeaders="+a+", Signature="+k),i}var ol=function(r,e,n,i=null,a=null){let l=nl(r,e,n),u={contentType:i,contentHash:a?Je.sha256.hex(a):null};return il(l,u)};function Ue(r,e,n,i,a=null,l=null){(e!=null&&e.accessKeyId||e!=null&&e.sessionToken)&&(ol(e,n,i,a,l).forEach((h,d)=>{r.setRequestHeader(d,h)}),a&&r.setRequestHeader("content-type",a))}function Fo(r){if(r.indexOf("s3://")!=0)throw new Error("URL needs to start with s3://");let e=r.indexOf("/",5);if(e==-1)throw new Error("URL needs to contain a '/' after the host");let n=r.substring(5,e);if(!n)throw new Error("URL needs to contain a bucket name");let i=r.substring(e);if(!i)throw new Error("URL needs to contain key");return{bucket:n,path:i}}function xo(r){var e;return!!((e=r==null?void 0:r.endpoint)!=null&&e.startsWith("http"))}function Me(r,e){let n=Fo(e);return xo(r)?`${r==null?void 0:r.endpoint}/${n.bucket}`+n.path:"https://"+Io(r,e,n.bucket)+n.path}var al=7,Do=/\/|\\/,N={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,_preparedHandles:{},_opfsRoot:null,getFileInfo(r,e){try{let n=N._fileInfoCache.get(e),[i,a,l]=te(r,"duckdb_web_fs_get_file_info_by_id",["number","number"],[e,(n==null?void 0:n.cacheEpoch)||0]);if(i!==0)return null;if(l===0)return n;let u=Y(r,a,l);se(r);try{let h=JSON.parse(u);if(h==null)return null;let d={...h,blob:null};return N._fileInfoCache.set(e,d),!N._files.has(d.fileName)&&N._preparedHandles[d.fileName]&&(N._files.set(d.fileName,N._preparedHandles[d.fileName]),delete N._preparedHandles[d.fileName]),d}catch(h){return console.warn(h),null}}catch(n){return console.log(n),null}},getGlobalFileInfo(r){var e;try{let[n,i,a]=te(r,"duckdb_web_get_global_file_info",["number"],[((e=N._globalFileInfo)==null?void 0:e.cacheEpoch)||0]);if(n!==0)return null;if(a===0)return N._globalFileInfo;let l=Y(r,i,a);se(r);let u=JSON.parse(l);return u==null?null:(N._globalFileInfo={...u,blob:null},N._globalFileInfo)}catch(n){return console.log(n),null}},async assignOPFSRoot(){N._opfsRoot||(N._opfsRoot=await navigator.storage.getDirectory())},async prepareFileHandles(r,e){if(e===3){await N.assignOPFSRoot();let n=async a=>{if(N._files.has(a))return{path:a,handle:N._files.get(a),fromCached:!0};let u=N._opfsRoot,h=a.slice(al),d=h;if(Do.test(h)){let A=h.split(Do);if(A.length===0)throw new Error(`Invalid path ${h}`);if(d=A[A.length-1],!d)throw new Error(`Invalid path ${h}. File Not Found.`);A.pop();for(let H of A)u=await u.getDirectoryHandle(H,{create:!0})}let c=await u.getFileHandle(d,{create:!1}).catch(A=>{if((A==null?void 0:A.name)==="NotFoundError")return console.debug(`File ${a} does not exists yet, creating...`),u.getFileHandle(d,{create:!0});throw A});try{let A=await c.createSyncAccessHandle();return N._preparedHandles[a]=A,{path:a,handle:A,fromCached:!1}}catch(A){throw new Error(A.message+":"+name)}},i=[];for(let a of r){let l=await n(a);i.push(l)}return i}throw new Error(`Unsupported protocol ${e} for paths ${r} with protocol ${e}`)},async prepareDBFileHandle(r,e){if(e===3&&this.prepareFileHandles){let n=[r,`${r}.wal`];return this.prepareFileHandles(n,e)}throw new Error(`Unsupported protocol ${e} for path ${r} with protocol ${e}`)},testPlatformFeature:(r,e)=>{switch(e){case 1:return typeof BigInt64Array<"u";default:return console.warn(`test for unknown feature: ${e}`),!1}},getDefaultDataProtocol(r){return 2},openFile:(r,e,n)=>{var i,a,l,u,h,d;try{N._fileInfoCache.delete(e);let c=N.getFileInfo(r,e);switch(c==null?void 0:c.dataProtocol){case 4:case 5:{if(n&1&&n&2)throw new Error(`Opening file ${c.fileName} failed: cannot open file with both read and write flags set`);if(n&32)throw new Error(`Opening file ${c.fileName} failed: appending to HTTP/S3 files is not supported`);if(n&2){let U=new XMLHttpRequest;if(c.dataProtocol==5?(U.open("HEAD",Me(c.s3Config,c.dataUrl),!1),Ue(U,c.s3Config,c.dataUrl,"HEAD")):(U.open("HEAD",c.dataUrl,!1),c.bearerToken&&U.setRequestHeader("Authorization",`Bearer ${c.bearerToken}`)),U.send(null),U.status!=200&&U.status!=404)throw new Error(`Opening file ${c.fileName} failed: Unexpected return status from server (${U.status})`);if(U.status==404&&!(n&8||n&16))throw new Error(`Opening file ${c.fileName} failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag.`);let k=r._malloc(1),Z=new Uint8Array;r.HEAPU8.set(Z,k);let Q=r._malloc(3*8);return r.HEAPF64[(Q>>3)+0]=1,r.HEAPF64[(Q>>3)+1]=k,r.HEAPF64[(Q>>3)+2]=new Date().getTime()/1e3,Q}else if(!(n&1))throw new Error(`Opening file ${c.fileName} failed: unsupported file flags: ${n}`);let A=null,H=null;if(!c.forceFullHttpReads&&(c.reliableHeadRequests||!c.allowFullHttpReads))try{let U=new XMLHttpRequest;c.dataProtocol==5?(U.open("HEAD",Me(c.s3Config,c.dataUrl),!1),Ue(U,c.s3Config,c.dataUrl,"HEAD")):(U.open("HEAD",c.dataUrl,!1),c.bearerToken&&U.setRequestHeader("Authorization",`Bearer ${c.bearerToken}`)),U.setRequestHeader("Range","bytes=0-"),U.send(null),A=null;try{A=U.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}if(A!==null&&U.status==206){let k=r._malloc(24);r.HEAPF64[(k>>3)+0]=+A,r.HEAPF64[(k>>3)+1]=0;let Z=0;try{Z=new Date((i=U.getResponseHeader("Last-Modified"))!=null?i:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(k>>3)+2]=+Z,k}}catch(U){H=U,console.warn(`HEAD request with range header failed: ${U}`)}if(c.allowFullHttpReads){if(!c.forceFullHttpReads){let k=new XMLHttpRequest;c.dataProtocol==5?(k.open("GET",Me(c.s3Config,c.dataUrl),!1),Ue(k,c.s3Config,c.dataUrl,"GET")):(k.open("GET",c.dataUrl,!1),c.bearerToken&&k.setRequestHeader("Authorization",`Bearer ${c.bearerToken}`)),k.responseType="arraybuffer",k.setRequestHeader("Range","bytes=0-0"),k.send(null);let Z=null;try{Z=k.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}let Q=Z==null?void 0:Z.split("/")[1],ue=Z,ie=null;if(Q!==void 0)ie=Q;else if(!c.reliableHeadRequests){let K=new XMLHttpRequest;c.dataProtocol==5?(K.open("HEAD",Me(c.s3Config,c.dataUrl),!1),Ue(K,c.s3Config,c.dataUrl,"HEAD")):(K.open("HEAD",c.dataUrl,!1),c.bearerToken&&K.setRequestHeader("Authorization",`Bearer ${c.bearerToken}`)),K.setRequestHeader("Range","bytes=0-"),K.send(null),A=null;try{A=K.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}A!==null&&+A>1&&(ie=A)}if(k.status==206&&ue!==null&&+ue==1&&ie!==null){let K=r._malloc(24);r.HEAPF64[(K>>3)+0]=+ie,r.HEAPF64[(K>>3)+1]=0;let D=0;try{D=new Date((a=k.getResponseHeader("Last-Modified"))!=null?a:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(K>>3)+2]=+D,K}if(k.status==200&&ue!==null&&A!==null&&+ue==+A){console.warn(`fall back to full HTTP read for: ${c.dataUrl}`);let K=r._malloc(k.response.byteLength),D=new Uint8Array(k.response,0,k.response.byteLength);r.HEAPU8.set(D,K);let re=r._malloc(3*8);r.HEAPF64[(re>>3)+0]=k.response.byteLength,r.HEAPF64[(re>>3)+1]=K;let de=0;try{de=new Date((l=k.getResponseHeader("Last-Modified"))!=null?l:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(re>>3)+2]=+de,re}}let U=new XMLHttpRequest;if(c.dataProtocol==5?(U.open("GET",Me(c.s3Config,c.dataUrl),!1),Ue(U,c.s3Config,c.dataUrl,"GET")):(U.open("GET",c.dataUrl,!1),c.bearerToken&&U.setRequestHeader("Authorization",`Bearer ${c.bearerToken}`)),U.responseType="arraybuffer",U.send(null),U.status==200){let k=r._malloc(U.response.byteLength),Z=new Uint8Array(U.response,0,U.response.byteLength);r.HEAPU8.set(Z,k);let Q=r._malloc(3*8);r.HEAPF64[(Q>>3)+0]=U.response.byteLength,r.HEAPF64[(Q>>3)+1]=k;let ue=0;try{ue=new Date((u=U.getResponseHeader("Last-Modified"))!=null?u:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(Q>>3)+2]=+ue,Q}}if(H!=null)throw new Error(`Reading file ${c.fileName} failed with error: ${H}`);return 0}case 2:{let A=(h=N._files)==null?void 0:h.get(c.fileName);if(A){let k=r._malloc(24);return r.HEAPF64[(k>>3)+0]=A.size,r.HEAPF64[(k>>3)+1]=0,r.HEAPF64[(k>>3)+2]=0,k}if(n&128)return 0;console.warn(`Buffering missing file: ${c.fileName}`);let H=r._malloc(3*8),U=r._malloc(1);return r.HEAPF64[(H>>3)+0]=1,r.HEAPF64[(H>>3)+1]=U,r.HEAPF64[(H>>3)+2]=0,H}case 3:{let A=(d=N._files)==null?void 0:d.get(c.fileName);if(!A)throw new Error(`No OPFS access handle registered with name: ${c.fileName}`);n&16&&A.truncate(0);let H=r._malloc(3*8),U=A.getSize();return r.HEAPF64[(H>>3)+0]=U,r.HEAPF64[(H>>3)+1]=0,r.HEAPF64[(H>>3)+2]=0,H}}}catch(c){console.error(c.toString()),Be(r,c.toString())}return 0},glob:(r,e,n)=>{var i;try{let a=Y(r,e,n);if(a.startsWith("http")||a.startsWith("s3://")){let l=new XMLHttpRequest;if(a.startsWith("s3://")){let u=N.getGlobalFileInfo(r);l.open("HEAD",Me(u==null?void 0:u.s3Config,a),!1),Ue(l,u==null?void 0:u.s3Config,a,"HEAD")}else{l.open("HEAD",a,!1);let u=N.getGlobalFileInfo(r);u!=null&&u.bearerToken&&l.setRequestHeader("Authorization",`Bearer ${u.bearerToken}`)}if(l.send(null),l.status!=200&&l.status!==206){if(!((i=N.getGlobalFileInfo(r))!=null&&i.allowFullHttpReads))return console.log(`HEAD request failed: ${a}, with full http reads are disabled`),0;let u=new XMLHttpRequest;if(a.startsWith("s3://")){let d=N.getGlobalFileInfo(r);u.open("GET",Me(d==null?void 0:d.s3Config,a),!1),Ue(u,d==null?void 0:d.s3Config,a,"HEAD")}else{u.open("GET",a,!1);let d=N.getGlobalFileInfo(r);d!=null&&d.bearerToken&&u.setRequestHeader("Authorization",`Bearer ${d.bearerToken}`)}if(u.setRequestHeader("Range","bytes=0-0"),u.send(null),u.status!=200&&u.status!==206)return console.log(`HEAD and GET requests failed: ${a}`),0;let h=null;try{h=u.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}h&&+h>1&&console.warn(`Range request for ${a} did not return a partial response: ${u.status} "${u.statusText}"`)}r.ccall("duckdb_web_fs_glob_add_path",null,["string"],[a])}else for(let[l]of N._files.entries()||[])l.startsWith(a)&&r.ccall("duckdb_web_fs_glob_add_path",null,["string"],[l])}catch(a){return console.log(a),Be(r,a.toString()),0}},checkFile:(r,e,n)=>{try{let i=Y(r,e,n);if(i.startsWith("http")||i.startsWith("s3://")){let a=new XMLHttpRequest;if(i.startsWith("s3://")){let l=N.getGlobalFileInfo(r);a.open("HEAD",Me(l==null?void 0:l.s3Config,i),!1),Ue(a,l==null?void 0:l.s3Config,i,"HEAD")}else{a.open("HEAD",i,!1);let l=N.getGlobalFileInfo(r);l!=null&&l.bearerToken&&a.setRequestHeader("Authorization",`Bearer ${l.bearerToken}`)}return a.send(null),a.status==206||a.status==200}else return N._files.has(i)}catch(i){return console.log(i),!1}return!1},syncFile:(r,e)=>{},closeFile:(r,e)=>{var i;let n=N.getFileInfo(r,e);N._fileInfoCache.delete(e);try{switch(n==null?void 0:n.dataProtocol){case 0:case 4:case 5:break;case 1:case 2:return;case 3:{let a=(i=N._files)==null?void 0:i.get(n.fileName);if(!a)throw new Error(`No OPFS access handle registered with name: ${n.fileName}`);return a.flush()}}}catch(a){console.log(a),Be(r,a.toString())}},dropFile:(r,e,n)=>{var l;let i=Y(r,e,n),a=(l=N._files)==null?void 0:l.get(i);if(a){if(N._files.delete(i),a instanceof FileSystemSyncAccessHandle)try{a.flush(),a.close()}catch{throw new Error(`Cannot drop file with name: ${i}`)}a instanceof Blob}},truncateFile:(r,e,n)=>{var a;let i=N.getFileInfo(r,e);switch(i==null?void 0:i.dataProtocol){case 4:Be(r,"Cannot truncate a http file");return;case 5:Be(r,"Cannot truncate an s3 file");return;case 0:case 1:case 2:Be(r,"truncateFile not implemented");return;case 3:{let l=(a=N._files)==null?void 0:a.get(i.fileName);if(!l)throw new Error(`No OPFS access handle registered with name: ${i.fileName}`);return l.truncate(n)}}return 0},readFile(r,e,n,i,a){var l;if(i==0)return 0;try{let u=N.getFileInfo(r,e);switch(u==null?void 0:u.dataProtocol){case 4:case 5:{if(!u.dataUrl)throw new Error(`Missing data URL for file ${e}`);try{let h=new XMLHttpRequest;if(u.dataProtocol==5?(h.open("GET",Me(u==null?void 0:u.s3Config,u.dataUrl),!1),Ue(h,u==null?void 0:u.s3Config,u.dataUrl,"GET")):(h.open("GET",u.dataUrl,!1),u.bearerToken&&h.setRequestHeader("Authorization",`Bearer ${u.bearerToken}`)),h.responseType="arraybuffer",h.setRequestHeader("Range",`bytes=${a}-${a+i-1}`),h.send(null),h.status==206||h.status==200&&i==h.response.byteLength&&a==0){let d=new Uint8Array(h.response,0,Math.min(h.response.byteLength,i));return r.HEAPU8.set(d,n),d.byteLength}else if(h.status==200){console.warn(`Range request for ${u.dataUrl} did not return a partial response: ${h.status} "${h.statusText}"`);let d=new Uint8Array(h.response,a,Math.min(h.response.byteLength-a,i));return r.HEAPU8.set(d,n),d.byteLength}else throw new Error(`Range request for ${u.dataUrl} did returned non-success status: ${h.status} "${h.statusText}"`)}catch(h){throw console.log(h),new Error(`Range request for ${u.dataUrl} failed with error: ${h}"`)}}case 2:{let h=(l=N._files)==null?void 0:l.get(u.fileName);if(!h)throw new Error(`No HTML5 file registered with name: ${u.fileName}`);let d=h.slice(a,a+i),c=new Uint8Array(new FileReaderSync().readAsArrayBuffer(d));return r.HEAPU8.set(c,n),c.byteLength}case 3:{let h=N._files.get(u.fileName);if(!h)throw new Error(`No OPFS access handle registered with name: ${u.fileName}`);let d=r.HEAPU8.subarray(n,n+i);return h.read(d,{at:a})}}return 0}catch(u){return console.log(u),Be(r,u.toString()),0}},writeFile:(r,e,n,i,a)=>{var u;let l=N.getFileInfo(r,e);switch(l==null?void 0:l.dataProtocol){case 4:return Be(r,"Cannot write to HTTP file"),0;case 5:{let h=r.HEAPU8.subarray(n,n+i),d=new XMLHttpRequest;return d.open("PUT",Me(l==null?void 0:l.s3Config,l.dataUrl),!1),Ue(d,l==null?void 0:l.s3Config,l.dataUrl,"PUT","",h),d.send(h),d.status!==200?(Be(r,"Failed writing file: HTTP "+d.status),0):i}case 2:return Be(r,"cannot write using the html5 file reader api"),0;case 3:{let h=(u=N._files)==null?void 0:u.get(l.fileName);if(!h)throw new Error(`No OPFS access handle registered with name: ${l.fileName}`);let d=r.HEAPU8.subarray(n,n+i);return h.write(d,{at:a})}}return 0},getLastFileModificationTime:(r,e)=>{var i;let n=N.getFileInfo(r,e);switch(n==null?void 0:n.dataProtocol){case 2:{if(!((i=N._files)==null?void 0:i.get(n.fileName)))throw Error(`No handle available for file: ${n.fileName}`);return 0}case 4:case 5:return new Date().getTime()/1e3}return 0},progressUpdate:(r,e,n)=>{postMessage&&postMessage({requestId:0,type:"PROGRESS_UPDATE",data:{status:r?"completed":"in-progress",percentage:e,repetitions:n}})},checkDirectory:(r,e,n)=>{let i=Y(r,e,n);return console.log(`checkDirectory: ${i}`),!1},createDirectory:(r,e,n)=>{let i=Y(r,e,n);console.log(`createDirectory: ${i}`)},removeDirectory:(r,e,n)=>{let i=Y(r,e,n);console.log(`removeDirectory: ${i}`)},listDirectoryEntries:(r,e,n)=>{let i=Y(r,e,n);return console.log(`listDirectoryEntries: ${i}`),!1},moveFile:(r,e,n,i,a)=>{var d,c;let l=Y(r,e,n),u=Y(r,i,a),h=(d=N._files)==null?void 0:d.get(l);h!==void 0&&(N._files.delete(h),N._files.set(u,h));for(let[A,H]of((c=N._fileInfoCache)==null?void 0:c.entries())||[])if(H.dataUrl==l){N._fileInfoCache.delete(A);break}return!0},removeFile:(r,e,n)=>{},callScalarUDF:(r,e,n,i,a,l,u)=>{fo(N,r,e,n,i,a,l,u)}};var qn=class extends en{postMessage(e,n){globalThis.postMessage(e,n)}async instantiate(e,n,i){return await new rn(this,N,e,n).instantiate(i)}};function ko(){let r=new qn;globalThis.onmessage=async e=>{await r.onMessage(e.data)}}ko();return ou(cl);})();
/*! Bundled license information:

js-sha256/src/sha256.js:
  (**
   * [js-sha256]{@link https://github.com/emn178/js-sha256}
   *
   * @version 0.11.1
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2025
   * @license MIT
   *)
*/
//# sourceMappingURL=duckdb-browser-coi.worker.js.map
