"use strict";var duckdb=(()=>{var qa=Object.create;var St=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var Ja=Object.getOwnPropertyNames;var Qa=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty;var ec=(r,e,t)=>e in r?St(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var tc=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var ct=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),rc=(r,e)=>{for(var t in e)St(r,t,{get:e[t],enumerable:!0})},ls=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ja(e))!Za.call(r,o)&&o!==t&&St(r,o,{get:()=>e[o],enumerable:!(i=Xa(e,o))||i.enumerable});return r};var ds=(r,e,t)=>(t=r!=null?qa(Qa(r)):{},ls(e||!r||!r.__esModule?St(t,"default",{value:r,enumerable:!0}):t,r)),nc=r=>ls(St({},"__esModule",{value:!0}),r);var ut=(r,e,t)=>(ec(r,typeof e!="symbol"?e+"":e,t),t);var js=ct(()=>{});var Ys=ct(()=>{});var Xs=ct((qs,Bn)=>{"use strict";var Ks=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r||(r=__filename)),function(e={}){var t=e,i,o;t.ready=new Promise((n,s)=>{i=n,o=s});var c=Object.assign({},t),u=[],f="./this.program",l=(n,s)=>{throw s},p=typeof window=="object",A=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",k="";function x(n){return t.locateFile?t.locateFile(n,k):k+n}var j,Y,se;if(H){var ue=js(),X=Ys();A?k=X.dirname(k)+"/":k=__dirname+"/",j=(n,s)=>(n=Mn(n)?new URL(n):X.normalize(n),ue.readFileSync(n,s?void 0:"utf8")),se=n=>{var s=j(n,!0);return s.buffer||(s=new Uint8Array(s)),s},Y=(n,s,a,d=!0)=>{n=Mn(n)?new URL(n):X.normalize(n),ue.readFile(n,d?void 0:"utf8",(h,y)=>{h?a(h):s(d?y.buffer:y)})},!t.thisProgram&&process.argv.length>1&&(f=process.argv[1].replace(/\\/g,"/")),u=process.argv.slice(2),l=(n,s)=>{throw process.exitCode=n,s}}else(p||A)&&(A?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),r&&(k=r),k.startsWith("blob:")?k="":k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1),j=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.send(null),s.responseText},A&&(se=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),Y=(n,s,a)=>{var d=new XMLHttpRequest;d.open("GET",n,!0),d.responseType="arraybuffer",d.onload=()=>{if(d.status==200||d.status==0&&d.response){s(d.response);return}a()},d.onerror=a,d.send(null)});var K=t.print||console.log.bind(console),ae=t.printErr||console.error.bind(console);Object.assign(t,c),c=null,t.arguments&&(u=t.arguments),t.thisProgram&&(f=t.thisProgram),t.quit&&(l=t.quit);var oe;t.wasmBinary&&(oe=t.wasmBinary);var g,B=!1,L;function E(n,s){n||Ie(s)}var U,D,C,F,m,O,ee,ce;function Fe(){var n=g.buffer;t.HEAP8=U=new Int8Array(n),t.HEAP16=C=new Int16Array(n),t.HEAPU8=D=new Uint8Array(n),t.HEAPU16=F=new Uint16Array(n),t.HEAP32=m=new Int32Array(n),t.HEAPU32=O=new Uint32Array(n),t.HEAPF32=ee=new Float32Array(n),t.HEAPF64=ce=new Float64Array(n)}var q=[],De=[],Be=[],We=[],tt=!1;function gt(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ci(t.preRun.shift());Ht(q)}function rt(){tt=!0,Ht(De)}function oi(){Ht(Be)}function ai(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)li(t.postRun.shift());Ht(We)}function ci(n){q.unshift(n)}function ui(n){De.unshift(n)}function li(n){We.unshift(n)}var Ke=0,qr=null,yt=null;function di(n){var s;Ke++,(s=t.monitorRunDependencies)==null||s.call(t,Ke)}function fi(n){var a;if(Ke--,(a=t.monitorRunDependencies)==null||a.call(t,Ke),Ke==0&&(qr!==null&&(clearInterval(qr),qr=null),yt)){var s=yt;yt=null,s()}}function Ie(n){var a;(a=t.onAbort)==null||a.call(t,n),n="Aborted("+n+")",ae(n),B=!0,L=1,n+=". Build with -sASSERTIONS for more info.",tt&&___trap();var s=new WebAssembly.RuntimeError(n);throw o(s),s}var hi="data:application/octet-stream;base64,",On=n=>n.startsWith(hi),Mn=n=>n.startsWith("file://"),nt;nt="./duckdb-eh.wasm",On(nt)||(nt=x(nt));function Ln(n){if(n==nt&&oe)return new Uint8Array(oe);if(se)return se(n);throw"both async and sync fetching of the wasm failed"}function pi(n){return!oe&&(p||A)&&typeof fetch=="function"?fetch(n,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw`failed to load wasm binary file at '${n}'`;return s.arrayBuffer()}).catch(()=>Ln(n)):Promise.resolve().then(()=>Ln(n))}function Hn(n,s,a){return pi(n).then(d=>WebAssembly.instantiate(d,s)).then(a,d=>{ae(`failed to asynchronously prepare wasm: ${d}`),Ie(d)})}function _i(n,s,a,d){return!n&&typeof WebAssembly.instantiateStreaming=="function"&&!On(s)&&!H&&typeof fetch=="function"?fetch(s,{credentials:"same-origin"}).then(h=>{var y=WebAssembly.instantiateStreaming(h,a);return y.then(d,function(w){return ae(`wasm streaming compile failed: ${w}`),ae("falling back to ArrayBuffer instantiation"),Hn(s,a,d)})}):Hn(s,a,d)}function mi(){var n={a:ea};function s(d,h){return M=d.exports,M=ja(M),g=M.qa,Fe(),is=M.ta,ui(M.ra),fi("wasm-instantiate"),M}di("wasm-instantiate");function a(d){s(d.instance)}if(t.instantiateWasm)try{return t.instantiateWasm(n,s)}catch(d){ae(`Module.instantiateWasm callback failed with error: ${d}`),o(d)}return _i(oe,nt,n,a).catch(o),{}}var Ee,st,bi={2498797:(n,s,a,d)=>{var h=J(n);if(typeof XMLHttpRequest>"u")return 0;let y=new XMLHttpRequest;y.open(J(d),h,!1),y.responseType="arraybuffer";for(var w=0,_=s;w<_*2;){var S=m[a/4+w>>>0],T=m[a/4+w+1>>>0];try{var R=encodeURI(J(S));R==="Host"&&(R="X-Host-Override"),R==="User-Agent"&&(R="X-user-agent"),R==="Authorization"?y.setRequestHeader(R,J(T)):y.setRequestHeader(R,encodeURI(J(T)))}catch(re){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",re)}w+=2}try{y.send(null)}catch{return 0}if(y.status>=400)return 0;for(var W=y.response,_=W.byteLength,V=Me(_+4),G=new Uint8Array(W),$=0;$<_;$++)t.HEAPU8[$+V+4]=G[$];var I=new Uint8Array(4);return I[0]=_%256,_-=I[0],_/=256,I[1]=_%256,_-=I[1],_/=256,I[2]=_%256,_-=I[2],_/=256,I[3]=_%256,_-=I[3],_/=256,t.HEAPU8.set(I,V),V},2500204:(n,s,a,d,h,y)=>{var w=J(n);if(typeof XMLHttpRequest>"u")return 0;let S=new XMLHttpRequest;S.open(J(d),w,!1),S.responseType="arraybuffer";for(var T=0,I=s;T<I*2;){var R=m[a/4+T>>>0],W=m[a/4+T+1>>>0];try{var _=encodeURI(J(R));_==="Host"&&(_="X-Host-Override"),_==="User-Agent"&&(_="X-user-agent"),_==="Authorization"?S.setRequestHeader(_,J(W)):S.setRequestHeader(_,encodeURI(J(W)))}catch(P){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",P)}T+=2}try{for(var V=new Uint8Array(y),G=0;G<y;G++)V[G]=t.HEAPU8[G+h];S.send(V)}catch{return 0}if(S.status>=400)return 0;for(var $=Uint8Array.from(Array.from(S.getResponseHeader("Etag")).map(P=>P.charCodeAt(0))),I=$.byteLength,re=Me(I+4),_e=new Uint8Array($),G=0;G<I;G++)t.HEAPU8[G+re+4]=_e[G];var v=new Uint8Array(4);return v[0]=I%256,I-=v[0],I/=256,v[1]=I%256,I-=v[1],I/=256,v[2]=I%256,I-=v[2],I/=256,v[3]=I%256,I-=v[3],I/=256,t.HEAPU8.set(v,re),re},2501824:(n,s,a,d)=>{var h=J(n);if(typeof XMLHttpRequest>"u")return 0;let y=new XMLHttpRequest;y.open(J(d),h,!1),y.responseType="arraybuffer";for(var w=0,_=s;w<_*2;){var S=m[a/4+w>>>0],T=m[a/4+w+1>>>0];try{var R=encodeURI(J(S));R==="Host"&&(R="X-Host-Override"),R==="User-Agent"&&(R="X-user-agent"),R==="Authorization"?y.setRequestHeader(R,J(T)):y.setRequestHeader(R,encodeURI(J(T)))}catch(v){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",v)}w+=2}try{y.send(null)}catch{return 0}if(y.status>=400)return 0;for(var W=y.response,_=W.byteLength,V=Me(_+8),G=new Uint8Array(W),$=0;$<_;$++)t.HEAPU8[$+V+8]=G[$];var I=new Uint8Array(4);I[0]=_%256,_-=I[0],_/=256,I[1]=_%256,_-=I[1],_/=256,I[2]=_%256,_-=I[2],_/=256,I[3]=_%256,_-=I[3],_/=256,t.HEAPU8.set(I,V+4);var re=Uint8Array.from(Array.from(y.getAllResponseHeaders()).map(v=>v.charCodeAt(0)));_=re.byteLength;for(var _e=Me(_+8),$=0;$<_;$++)t.HEAPU8[$+_e+8]=re[$];return I=new Uint8Array(4),I[0]=_%256,_-=I[0],_/=256,I[1]=_%256,_-=I[1],_/=256,I[2]=_%256,_-=I[2],_/=256,I[3]=_%256,_-=I[3],_/=256,t.HEAPU8.set(I,_e+4),_=_e,I=new Uint8Array(4),I[0]=_%256,_-=I[0],_/=256,I[1]=_%256,_-=I[1],_/=256,I[2]=_%256,_-=I[2],_/=256,I[3]=_%256,_-=I[3],_/=256,t.HEAPU8.set(I,V),V},2504108:(n,s,a,d)=>{var h=J(n);if(typeof XMLHttpRequest>"u")return 0;let y=new XMLHttpRequest;y.open(J(d),h,!1),y.responseType="arraybuffer";for(var w=0,_=s;w<_*2;){var S=m[a/4+w>>>0],T=m[a/4+w+1>>>0];try{var R=encodeURI(J(S));R==="Host"&&(R="X-Host-Override"),R==="User-Agent"&&(R="X-user-agent"),R==="Authorization"?y.setRequestHeader(R,J(T)):y.setRequestHeader(R,encodeURI(J(T)))}catch(re){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",re)}w+=2}try{y.send(null)}catch{return 0}if(y.status>=400)return 0;for(var W=y.response,_=W.byteLength,V=Me(_+4),G=new Uint8Array(W),$=0;$<_;$++)t.HEAPU8[$+V+4]=G[$];var I=new Uint8Array(4);return I[0]=_%256,_-=I[0],_/=256,I[1]=_%256,_-=I[1],_/=256,I[2]=_%256,_-=I[2],_/=256,I[3]=_%256,_-=I[3],_/=256,t.HEAPU8.set(I,V),V},2505515:(n,s,a,d,h,y)=>{var w=J(n);if(typeof XMLHttpRequest>"u")return 0;let S=new XMLHttpRequest;S.open(J(d),w,!1),S.responseType="arraybuffer";for(var T=0,I=s;T<I*2;){var R=m[a/4+T>>>0],W=m[a/4+T+1>>>0];try{var _=encodeURI(J(R));_==="Host"&&(_="X-Host-Override"),_==="User-Agent"&&(_="X-user-agent"),_==="Authorization"?S.setRequestHeader(_,J(W)):S.setRequestHeader(_,encodeURI(J(W)))}catch(P){console.warn("Error while performing XMLHttpRequest.setRequestHeader()",P)}T+=2}try{for(var V=new Uint8Array(y),G=0;G<y;G++)V[G]=t.HEAPU8[G+h];S.send(V)}catch{return 0}if(S.status>=400)return 0;for(var $=S.response,I=$.byteLength,re=Me(I+4),_e=new Uint8Array($),G=0;G<I;G++)t.HEAPU8[G+re+4]=_e[G];var v=new Uint8Array(4);return v[0]=I%256,I-=v[0],I/=256,v[1]=I%256,I-=v[1],I/=256,v[2]=I%256,I-=v[2],I/=256,v[3]=I%256,I-=v[3],I/=256,t.HEAPU8.set(v,re),re}};function Cn(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Ht=n=>{for(;n.length>0;)n.shift()(t)},gi=t.noExitRuntime||!0;function Pn(){Ie("missing function: $SOCKFS")}Pn.stub=!0;function Xr(){Ie("missing function: $FS")}Xr.stub=!0;var it=n=>{var s=Pn.getSocket(n);if(!s)throw new Xr.ErrnoError(8);return s},Jr=n=>(n&255)+"."+(n>>8&255)+"."+(n>>16&255)+"."+(n>>24&255),Nn=n=>{var s="",a=0,d=0,h=0,y=0,w=0,S=0,T=[n[0]&65535,n[0]>>16,n[1]&65535,n[1]>>16,n[2]&65535,n[2]>>16,n[3]&65535,n[3]>>16],R=!0,W="";for(S=0;S<5;S++)if(T[S]!==0){R=!1;break}if(R){if(W=Jr(T[6]|T[7]<<16),T[5]===-1)return s="::ffff:",s+=W,s;if(T[5]===0)return s="::",W==="0.0.0.0"&&(W=""),W==="0.0.0.1"&&(W="1"),s+=W,s}for(a=0;a<8;a++)T[a]===0&&(a-h>1&&(w=0),h=a,w++),w>d&&(d=w,y=a-d+1);for(a=0;a<8;a++){if(d>1&&T[a]===0&&a>=y&&a<y+d){a===y&&(s+=":",y===0&&(s+=":"));continue}s+=Number(_ntohs(T[a]&65535)).toString(16),s+=a<7?":":""}return s},Wn=(n,s)=>{var a=C[n>>>1>>>0],d=_ntohs(F[n+2>>>1>>>0]),h;switch(a){case 2:if(s!==16)return{errno:28};h=m[n+4>>>2>>>0],h=Jr(h);break;case 10:if(s!==28)return{errno:28};h=[m[n+8>>>2>>>0],m[n+12>>>2>>>0],m[n+16>>>2>>>0],m[n+20>>>2>>>0]],h=Nn(h);break;default:return{errno:5}}return{family:a,addr:h,port:d}},Ct=n=>{for(var s=n.split("."),a=0;a<4;a++){var d=Number(s[a]);if(isNaN(d))return null;s[a]=d}return(s[0]|s[1]<<8|s[2]<<16|s[3]<<24)>>>0},Pt=n=>parseInt(n),Qr=n=>{var s,a,d,h,y=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,w=[];if(!y.test(n))return null;if(n==="::")return[0,0,0,0,0,0,0,0];for(n.startsWith("::")?n=n.replace("::","Z:"):n=n.replace("::",":Z:"),n.indexOf(".")>0?(n=n.replace(new RegExp("[.]","g"),":"),s=n.split(":"),s[s.length-4]=Pt(s[s.length-4])+Pt(s[s.length-3])*256,s[s.length-3]=Pt(s[s.length-2])+Pt(s[s.length-1])*256,s=s.slice(0,s.length-2)):s=n.split(":"),d=0,h=0,a=0;a<s.length;a++)if(typeof s[a]=="string")if(s[a]==="Z"){for(h=0;h<8-s.length+1;h++)w[a+h]=0;d=h-1}else w[a+d]=_htons(parseInt(s[a],16));else w[a+d]=s[a];return[w[1]<<16|w[0],w[3]<<16|w[2],w[5]<<16|w[4],w[7]<<16|w[6]]},be={address_map:{id:1,addrs:{},names:{}},lookup_name(n){var s=Ct(n);if(s!==null||(s=Qr(n),s!==null))return n;var a;if(be.address_map.addrs[n])a=be.address_map.addrs[n];else{var d=be.address_map.id++;E(d<65535,"exceeded max address mappings of 65535"),a="172.29."+(d&255)+"."+(d&65280),be.address_map.names[a]=n,be.address_map.addrs[n]=a}return a},lookup_addr(n){return be.address_map.names[n]?be.address_map.names[n]:null}},Vn=(n,s,a)=>{if(a&&n===0)return null;var d=Wn(n,s);if(d.errno)throw new Xr.ErrnoError(d.errno);return d.addr=be.lookup_addr(d.addr)||d.addr,d},wt=(n,s)=>s+2097152>>>0<4194305-!!n?(n>>>0)+s*4294967296:NaN;function yi(n,s,a,d,h,y){s>>>=0,a>>>=0;var w=it(n),S=Vn(s,a);return w.sock_ops.bind(w,S.addr,S.port),0}function wi(n,s,a,d,h,y){s>>>=0,a>>>=0;var w=it(n),S=Vn(s,a);return w.sock_ops.connect(w,S.addr,S.port),0}function vi(n,s,a,d){s>>>=0}var $n=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,zn=(n,s,a)=>{s>>>=0;for(var d=s+a,h=s;n[h]&&!(h>=d);)++h;if(h-s>16&&n.buffer&&$n)return $n.decode(n.subarray(s,h));for(var y="";s<h;){var w=n[s++];if(!(w&128)){y+=String.fromCharCode(w);continue}var S=n[s++]&63;if((w&224)==192){y+=String.fromCharCode((w&31)<<6|S);continue}var T=n[s++]&63;if((w&240)==224?w=(w&15)<<12|S<<6|T:w=(w&7)<<18|S<<12|T<<6|n[s++]&63,w<65536)y+=String.fromCharCode(w);else{var R=w-65536;y+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return y},J=(n,s)=>(n>>>=0,n?zn(D,n,s):""),ot={varargs:void 0,get(){var n=m[+ot.varargs>>>2>>>0];return ot.varargs+=4,n},getp(){return ot.get()},getStr(n){var s=J(n);return s}};function Ei(n,s,a){return a>>>=0,ot.varargs=a,0}function Si(n,s){s>>>=0}function Ai(n,s,a){var d=wt(s,a)}var Zr=n=>{for(var s=0,a=0;a<n.length;++a){var d=n.charCodeAt(a);d<=127?s++:d<=2047?s+=2:d>=55296&&d<=57343?(s+=4,++a):s+=3}return s};t.lengthBytesUTF8=Zr;var Gn=(n,s,a,d)=>{if(a>>>=0,!(d>0))return 0;for(var h=a,y=a+d-1,w=0;w<n.length;++w){var S=n.charCodeAt(w);if(S>=55296&&S<=57343){var T=n.charCodeAt(++w);S=65536+((S&1023)<<10)|T&1023}if(S<=127){if(a>=y)break;s[a++>>>0]=S}else if(S<=2047){if(a+1>=y)break;s[a++>>>0]=192|S>>6,s[a++>>>0]=128|S&63}else if(S<=65535){if(a+2>=y)break;s[a++>>>0]=224|S>>12,s[a++>>>0]=128|S>>6&63,s[a++>>>0]=128|S&63}else{if(a+3>=y)break;s[a++>>>0]=240|S>>18,s[a++>>>0]=128|S>>12&63,s[a++>>>0]=128|S>>6&63,s[a++>>>0]=128|S&63}}return s[a>>>0]=0,a-h},Ve=(n,s,a)=>Gn(n,D,s,a);t.stringToUTF8=Ve;function Fi(n,s){n>>>=0,s>>>=0}function Di(n,s,a){s>>>=0,a>>>=0}var jn=(n,s)=>(D.fill(0,n,n+s),n),Nt=(n,s,a,d,h)=>{switch(s){case 2:a=Ct(a),jn(n,16),h&&(m[h>>>2>>>0]=16),C[n>>>1>>>0]=s,m[n+4>>>2>>>0]=a,C[n+2>>>1>>>0]=_htons(d);break;case 10:a=Qr(a),jn(n,28),h&&(m[h>>>2>>>0]=28),m[n>>>2>>>0]=s,m[n+8>>>2>>>0]=a[0],m[n+12>>>2>>>0]=a[1],m[n+16>>>2>>>0]=a[2],m[n+20>>>2>>>0]=a[3],C[n+2>>>1>>>0]=_htons(d);break;default:return 5}return 0};function Ii(n,s,a,d,h,y){s>>>=0,a>>>=0;var w=it(n);if(!w.daddr)return-53;var S=Nt(s,w.family,be.lookup_name(w.daddr),w.dport,a);return 0}function xi(n,s,a,d,h,y){s>>>=0,a>>>=0;var w=it(n),S=Nt(s,w.family,be.lookup_name(w.saddr||"0.0.0.0"),w.sport,a);return 0}function ki(n,s,a,d,h,y){d>>>=0,h>>>=0;var w=it(n);return s===1&&a===4?(m[d>>>2>>>0]=w.error,m[h>>>2>>>0]=4,w.error=null,0):-50}function Ri(n,s,a){return a>>>=0,ot.varargs=a,0}function Ti(n,s){n>>>=0,s>>>=0}function Bi(n,s,a){s>>>=0}function Ui(n,s,a,d){s>>>=0,a>>>=0}function Oi(n,s,a,d){s>>>=0,d>>>=0,ot.varargs=d}function Mi(n,s,a){n>>>=0}function Li(n,s,a,d,h,y){s>>>=0,a>>>=0,h>>>=0,y>>>=0;var w=it(n),S=w.sock_ops.recvmsg(w,a);if(!S)return 0;if(h)var T=Nt(h,w.family,be.lookup_name(S.addr),S.port,y);return D.set(S.buffer,s>>>0),S.buffer.byteLength}function Hi(n,s,a,d){s>>>=0,d>>>=0}function Ci(n){n>>>=0}function Pi(n,s,a,d,h,y){s>>>=0,a>>>=0,h>>>=0,y>>>=0}var Ni=(n,s,a)=>{};function Wi(n,s){n>>>=0,s>>>=0}function Vi(n,s,a){n>>>=0,s>>>=0,a>>>=0}function $i(n,s,a){s>>>=0}var zi=1,Gi=()=>zi;function Yn(){Ie("missing function: _emval_call_method")}Yn.stub=!0;function Kn(){Ie("missing function: _emval_decref")}Kn.stub=!0;function qn(){Ie("missing function: _emval_get_global")}qn.stub=!0;function Xn(){Ie("missing function: _emval_get_method_caller")}Xn.stub=!0;function Jn(){Ie("missing function: _emval_run_destructors")}Jn.stub=!0;var vt=n=>n%4===0&&(n%100!==0||n%400===0),ji=[0,31,60,91,121,152,182,213,244,274,305,335],Yi=[0,31,59,90,120,151,181,212,243,273,304,334],Ki=n=>{var s=vt(n.getFullYear()),a=s?ji:Yi,d=a[n.getMonth()]+n.getDate()-1;return d};function qi(n,s,a){var d=wt(n,s);a>>>=0;var h=new Date(d*1e3);m[a>>>2>>>0]=h.getSeconds(),m[a+4>>>2>>>0]=h.getMinutes(),m[a+8>>>2>>>0]=h.getHours(),m[a+12>>>2>>>0]=h.getDate(),m[a+16>>>2>>>0]=h.getMonth(),m[a+20>>>2>>>0]=h.getFullYear()-1900,m[a+24>>>2>>>0]=h.getDay();var y=Ki(h)|0;m[a+28>>>2>>>0]=y,m[a+36>>>2>>>0]=-(h.getTimezoneOffset()*60);var w=new Date(h.getFullYear(),0,1),S=new Date(h.getFullYear(),6,1).getTimezoneOffset(),T=w.getTimezoneOffset(),R=(S!=T&&h.getTimezoneOffset()==Math.min(T,S))|0;m[a+32>>>2>>>0]=R}function Xi(n,s,a,d){n>>>=0,s>>>=0,a>>>=0,d>>>=0;var h=new Date().getFullYear(),y=new Date(h,0,1),w=new Date(h,6,1),S=y.getTimezoneOffset(),T=w.getTimezoneOffset(),R=Math.max(S,T);O[n>>>2>>>0]=R*60,m[s>>>2>>>0]=+(S!=T);function W(G){var $=G.toTimeString().match(/\(([A-Za-z ]+)\)$/);return $?$[1]:"GMT"}var _=W(y),V=W(w);T<S?(Ve(_,a,7),Ve(V,d,7)):(Ve(_,d,7),Ve(V,a,7))}var Ji=()=>{Ie("")};function Qi(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.createDirectory(t,n,s)}function Zi(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.checkDirectory(t,n,s)}function eo(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.listDirectoryEntries(t,n,s)}function to(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.removeDirectory(t,n,s)}function ro(n){return globalThis.DUCKDB_RUNTIME.closeFile(t,n)}function no(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.dropFile(t,n,s)}function so(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.checkFile(t,n,s)}function io(n,s,a,d){return n>>>=0,a>>>=0,globalThis.DUCKDB_RUNTIME.moveFile(t,n,s,a,d)}function oo(n,s){return globalThis.DUCKDB_RUNTIME.openFile(t,n,s)}function ao(n,s,a,d){return s>>>=0,globalThis.DUCKDB_RUNTIME.readFile(t,n,s,a,d)}function co(n,s){return globalThis.DUCKDB_RUNTIME.truncateFile(t,n,s)}function uo(n,s,a,d){return s>>>=0,globalThis.DUCKDB_RUNTIME.writeFile(t,n,s,a,d)}function lo(n){return globalThis.DUCKDB_RUNTIME.getDefaultDataProtocol(n)}function fo(n,s){return n>>>=0,globalThis.DUCKDB_RUNTIME.glob(t,n,s)}function ho(n){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(t,n)}function po(n,s,a,d,h,y){return n>>>=0,a>>>=0,h>>>=0,globalThis.DUCKDB_RUNTIME.callScalarUDF(t,n,s,a,d,h,y)}var en=[],_o=(n,s)=>{en.length=0;for(var a;a=D[n++>>>0];){var d=a!=105;d&=a!=112,s+=d&&s%8?4:0,en.push(a==112?O[s>>>2>>>0]:a==105?m[s>>>2>>>0]:ce[s>>>3>>>0]),s+=d?8:4}return en},mo=(n,s,a)=>{var d=_o(s,a);return bi[n](...d)};function bo(n,s,a){return n>>>=0,s>>>=0,a>>>=0,mo(n,s,a)}var go=()=>Date.now(),Qn=()=>4294901760;function yo(){return Qn()}var Zn;Zn=()=>performance.now();var wo=n=>{var s=g.buffer,a=(n-s.byteLength+65535)/65536;try{return g.grow(a),Fe(),1}catch{}};function vo(n){n>>>=0;var s=D.length,a=Qn();if(n>a)return!1;for(var d=(T,R)=>T+(R-T%R)%R,h=1;h<=4;h*=2){var y=s*(1+.2/h);y=Math.min(y,n+100663296);var w=Math.min(a,d(Math.max(n,y),65536)),S=wo(w);if(S)return!0}return!1}var tn={},Eo=()=>f||"./this.program",Et=()=>{if(!Et.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Eo()};for(var a in tn)tn[a]===void 0?delete s[a]:s[a]=tn[a];var d=[];for(var a in s)d.push(`${a}=${s[a]}`);Et.strings=d}return Et.strings},So=(n,s)=>{for(var a=0;a<n.length;++a)U[s++>>>0]=n.charCodeAt(a);U[s>>>0]=0},Ao=function(n,s){n>>>=0,s>>>=0;var a=0;return Et().forEach((d,h)=>{var y=s+a;O[n+h*4>>>2>>>0]=y,So(d,y),a+=d.length+1}),0},Fo=function(n,s){n>>>=0,s>>>=0;var a=Et();O[n>>>2>>>0]=a.length;var d=0;return a.forEach(h=>d+=h.length+1),O[s>>>2>>>0]=d,0},Do=0,Io=()=>gi||Do>0,xo=n=>{var s;L=n,Io()||((s=t.onExit)==null||s.call(t,n),B=!0),l(n,new Cn(n))},es=(n,s)=>{L=n,xo(n)},ko=es,Ro=n=>52;function To(n,s){s>>>=0;var a=0,d=0,h=0;{var y=2;n==0?a=2:(n==1||n==2)&&(a=64),h=1}return U[s>>>0]=y,C[s+2>>>1>>>0]=h,st=[a>>>0,(Ee=a,+Math.abs(Ee)>=1?Ee>0?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],m[s+8>>>2>>>0]=st[0],m[s+12>>>2>>>0]=st[1],st=[d>>>0,(Ee=d,+Math.abs(Ee)>=1?Ee>0?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],m[s+16>>>2>>>0]=st[0],m[s+20>>>2>>>0]=st[1],0}function Bo(n,s,a,d,h,y){s>>>=0,a>>>=0;var w=wt(d,h);return y>>>=0,52}function Uo(n,s,a,d,h,y){s>>>=0,a>>>=0;var w=wt(d,h);return y>>>=0,52}function Oo(n,s,a,d){return s>>>=0,a>>>=0,d>>>=0,52}function Mo(n,s,a,d,h){var y=wt(s,a);return h>>>=0,70}var Lo=n=>52,Ho=[null,[],[]],Co=(n,s)=>{var a=Ho[n];s===0||s===10?((n===1?K:ae)(zn(a,0)),a.length=0):a.push(s)};function Po(n,s,a,d){s>>>=0,a>>>=0,d>>>=0;for(var h=0,y=0;y<a;y++){var w=O[s>>>2>>>0],S=O[s+4>>>2>>>0];s+=8;for(var T=0;T<S;T++)Co(n,D[w+T>>>0]);h+=S}return O[d>>>2>>>0]=h,0}function No(n,s,a,d){n>>>=0,s>>>=0,a>>>=0,d>>>=0;var h=0,y=0,w=0,S=0,T=0,R=0,W;function _(V,G,$,I,re,_e){var v,P,ie,fe;return P=V===10?28:16,re=V===10?Nn(re):Jr(re),v=Me(P),fe=Nt(v,V,re,_e),E(!fe),ie=Me(32),m[ie+4>>>2>>>0]=V,m[ie+8>>>2>>>0]=G,m[ie+12>>>2>>>0]=$,O[ie+24>>>2>>>0]=I,O[ie+20>>>2>>>0]=v,V===10?m[ie+16>>>2>>>0]=28:m[ie+16>>>2>>>0]=16,m[ie+28>>>2>>>0]=0,ie}if(a&&(w=m[a>>>2>>>0],S=m[a+4>>>2>>>0],T=m[a+8>>>2>>>0],R=m[a+12>>>2>>>0]),T&&!R&&(R=T===2?17:6),!T&&R&&(T=R===17?2:1),R===0&&(R=6),T===0&&(T=1),!n&&!s)return-2;if(w&-1088||a!==0&&m[a>>>2>>>0]&2&&!n)return-1;if(w&32)return-2;if(T!==0&&T!==1&&T!==2)return-7;if(S!==0&&S!==2&&S!==10)return-6;if(s&&(s=J(s),y=parseInt(s,10),isNaN(y)))return w&1024?-2:-8;if(!n)return S===0&&(S=2),w&1||(S===2?h=_htonl(2130706433):h=[0,0,0,1]),W=_(S,T,R,null,h,y),O[d>>>2>>>0]=W,0;if(n=J(n),h=Ct(n),h!==null)if(S===0||S===2)S=2;else if(S===10&&w&8)h=[0,0,_htonl(65535),h],S=10;else return-2;else if(h=Qr(n),h!==null)if(S===0||S===10)S=10;else return-2;return h!=null?(W=_(S,T,R,n,h,y),O[d>>>2>>>0]=W,0):w&4?-2:(n=be.lookup_name(n),h=Ct(n),S===0?S=2:S===10&&(h=[0,0,_htonl(65535),h]),W=_(S,T,R,null,h,y),O[d>>>2>>>0]=W,0)}var Wo=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return d=>crypto.getRandomValues(d);if(H)try{var n=tc("crypto"),s=n.randomFillSync;if(s)return d=>n.randomFillSync(d);var a=n.randomBytes;return d=>(d.set(a(d.byteLength)),d)}catch{}Ie("initRandomDevice")},ts=n=>(ts=Wo())(n);function Vo(n,s){return n>>>=0,s>>>=0,ts(D.subarray(n>>>0,n+s>>>0)),0}function $o(n,s,a,d,h,y,w){n>>>=0,a>>>=0,h>>>=0;var S=Wn(n,s);if(S.errno)return-6;var T=S.port,R=S.addr,W=!1;if(a&&d){var _;if(w&1||!(_=be.lookup_addr(R))){if(w&8)return-2}else R=_;var V=Ve(R,a,d);V+1>=d&&(W=!0)}if(h&&y){T=""+T;var V=Ve(T,h,y);V+1>=y&&(W=!0)}return W?-12:0}var zo=(n,s)=>{for(var a=0,d=0;d<=s;a+=n[d++]);return a},rs=[31,29,31,30,31,30,31,31,30,31,30,31],ns=[31,28,31,30,31,30,31,31,30,31,30,31],Go=(n,s)=>{for(var a=new Date(n.getTime());s>0;){var d=vt(a.getFullYear()),h=a.getMonth(),y=(d?rs:ns)[h];if(s>y-a.getDate())s-=y-a.getDate()+1,a.setDate(1),h<11?a.setMonth(h+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else return a.setDate(a.getDate()+s),a}return a};function jo(n,s,a){var d=a>0?a:Zr(n)+1,h=new Array(d),y=Gn(n,h,0,h.length);return s&&(h.length=y),h}var ss=(n,s)=>{U.set(n,s>>>0)};function Yo(n,s,a,d){n>>>=0,s>>>=0,a>>>=0,d>>>=0;var h=O[d+40>>>2>>>0],y={tm_sec:m[d>>>2>>>0],tm_min:m[d+4>>>2>>>0],tm_hour:m[d+8>>>2>>>0],tm_mday:m[d+12>>>2>>>0],tm_mon:m[d+16>>>2>>>0],tm_year:m[d+20>>>2>>>0],tm_wday:m[d+24>>>2>>>0],tm_yday:m[d+28>>>2>>>0],tm_isdst:m[d+32>>>2>>>0],tm_gmtoff:m[d+36>>>2>>>0],tm_zone:h?J(h):""},w=J(a),S={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var T in S)w=w.replace(new RegExp(T,"g"),S[T]);var R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],W=["January","February","March","April","May","June","July","August","September","October","November","December"];function _(v,P,ie){for(var fe=typeof v=="number"?v.toString():v||"";fe.length<P;)fe=ie[0]+fe;return fe}function V(v,P){return _(v,P,"0")}function G(v,P){function ie($t){return $t<0?-1:$t>0?1:0}var fe;return(fe=ie(v.getFullYear()-P.getFullYear()))===0&&(fe=ie(v.getMonth()-P.getMonth()))===0&&(fe=ie(v.getDate()-P.getDate())),fe}function $(v){switch(v.getDay()){case 0:return new Date(v.getFullYear()-1,11,29);case 1:return v;case 2:return new Date(v.getFullYear(),0,3);case 3:return new Date(v.getFullYear(),0,2);case 4:return new Date(v.getFullYear(),0,1);case 5:return new Date(v.getFullYear()-1,11,31);case 6:return new Date(v.getFullYear()-1,11,30)}}function I(v){var P=Go(new Date(v.tm_year+1900,0,1),v.tm_yday),ie=new Date(P.getFullYear(),0,4),fe=new Date(P.getFullYear()+1,0,4),$t=$(ie),Ka=$(fe);return G($t,P)<=0?G(Ka,P)<=0?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}var re={"%a":v=>R[v.tm_wday].substring(0,3),"%A":v=>R[v.tm_wday],"%b":v=>W[v.tm_mon].substring(0,3),"%B":v=>W[v.tm_mon],"%C":v=>{var P=v.tm_year+1900;return V(P/100|0,2)},"%d":v=>V(v.tm_mday,2),"%e":v=>_(v.tm_mday,2," "),"%g":v=>I(v).toString().substring(2),"%G":I,"%H":v=>V(v.tm_hour,2),"%I":v=>{var P=v.tm_hour;return P==0?P=12:P>12&&(P-=12),V(P,2)},"%j":v=>V(v.tm_mday+zo(vt(v.tm_year+1900)?rs:ns,v.tm_mon-1),3),"%m":v=>V(v.tm_mon+1,2),"%M":v=>V(v.tm_min,2),"%n":()=>`
`,"%p":v=>v.tm_hour>=0&&v.tm_hour<12?"AM":"PM","%S":v=>V(v.tm_sec,2),"%t":()=>"	","%u":v=>v.tm_wday||7,"%U":v=>{var P=v.tm_yday+7-v.tm_wday;return V(Math.floor(P/7),2)},"%V":v=>{var P=Math.floor((v.tm_yday+7-(v.tm_wday+6)%7)/7);if((v.tm_wday+371-v.tm_yday-2)%7<=2&&P++,P){if(P==53){var fe=(v.tm_wday+371-v.tm_yday)%7;fe!=4&&(fe!=3||!vt(v.tm_year))&&(P=1)}}else{P=52;var ie=(v.tm_wday+7-v.tm_yday-1)%7;(ie==4||ie==5&&vt(v.tm_year%400-1))&&P++}return V(P,2)},"%w":v=>v.tm_wday,"%W":v=>{var P=v.tm_yday+7-(v.tm_wday+6)%7;return V(Math.floor(P/7),2)},"%y":v=>(v.tm_year+1900).toString().substring(2),"%Y":v=>v.tm_year+1900,"%z":v=>{var P=v.tm_gmtoff,ie=P>=0;return P=Math.abs(P)/60,P=P/60*100+P%60,(ie?"+":"-")+("0000"+P).slice(-4)},"%Z":v=>v.tm_zone,"%%":()=>"%"};w=w.replace(/%%/g,"\0\0");for(var T in re)w.includes(T)&&(w=w.replace(new RegExp(T,"g"),re[T](y)));w=w.replace(/\0\0/g,"%");var _e=jo(w,!1);return _e.length>s?0:(ss(_e,n),_e.length-1)}function Ko(n,s,a,d,h){return n>>>=0,s>>>=0,a>>>=0,d>>>=0,h>>>=0,Yo(n,s,a,d)}var qo=n=>{if(n instanceof Cn||n=="unwind")return L;l(1,n)},Xo=n=>{var s=t["_"+n];return s},Jo=n=>{var s=Zr(n)+1,a=Wt(s);return Ve(n,a,s),a},Qo=(n,s,a,d,h)=>{var y={string:$=>{var I=0;return $!=null&&$!==0&&(I=Jo($)),I},array:$=>{var I=Wt($.length);return ss($,I),I}};function w($){return s==="string"?J($):s==="boolean"?!!$:$}var S=Xo(n),T=[],R=0;if(d)for(var W=0;W<d.length;W++){var _=y[a[W]];_?(R===0&&(R=sn()),T[W]=_(d[W])):T[W]=d[W]}var V=S(...T);function G($){return R!==0&&on(R),w($)}return V=G(V),V},at=(n,s)=>{n<128?s.push(n):s.push(n%128|128,n>>7)},rn=(n,s)=>{var a=n.slice(0,1),d=n.slice(1),h={i:127,p:127,j:126,f:125,d:124,e:111};s.push(96),at(d.length,s);for(var y=0;y<d.length;++y)s.push(h[d[y]]);a=="v"?s.push(0):s.push(1,h[a])},is,Zo=n=>{var s=[],a=[0,97,115,109,1,0,0,0];s.push(a);var d=[n[0].replace("j","i"),"i",n.slice(1).replace(/j/g,"ii")].join(""),h=[3];rn(d,h),rn(n,h),rn("vi",h);var y=[1];at(h.length,y),y.push(...h),s.push(y);var w=[2,15,2,1,101,1,116,1,112,0,0,1,101,1,114,0,2];s.push(w);var S=[3,2,1,0];s.push(S);var T=[7,5,1,1,102,0,1];s.push(T);var R=[];n[0]==="j"?R=[1,1,126]:R.push(0);function W(P){R.push(32),at(P,R)}for(var _=1,V=1;V<n.length;V++)n[V]=="j"?(W(_+1),R.push(173,66,32,134),W(_),R.push(172,132),_+=2):(W(_),_++);R.push(32,0,17,1,0),n[0]==="j"&&(R.push(34),at(_,R),R.push(66,32,136,167,16,0),W(_),R.push(167)),R.push(11);var G=[1];at(R.length,G),G.push(...R);var $=[10];at(G.length,$),$.push(...G),s.push($);var I=new Uint8Array([].concat.apply([],s)),re=new WebAssembly.Module(I),_e=new WebAssembly.Instance(re,{e:{t:is,r:nn}}),v=_e.exports.f;return v},ea={la:yi,ja:wi,aa:vi,d:Ei,$:Si,w:Ai,ba:Fi,W:Di,ea:Ii,da:xi,ha:ki,j:Ri,Y:Ti,X:Bi,Z:Ui,s:Oi,ia:Mi,fa:Li,U:Hi,n:Ci,ga:Pi,r:Ni,_:Wi,ca:Vi,o:$i,ma:Gi,C:Yn,D:Kn,F:qn,B:Xn,A:Jn,v:qi,S:Xi,a:Ji,L:Qi,M:Zi,J:eo,K:to,m:ro,P:no,H:so,I:io,O:oo,g:ao,N:co,i:uo,Q:lo,G:fo,k:ho,R:po,f:bo,na:go,oa:yo,c:Zn,pa:vo,t:Ao,u:Fo,ka:ko,e:Ro,E:To,y:Bo,x:Uo,l:Oo,z:Mo,V:Lo,h:Po,q:No,T:Vo,p:$o,b:Ko},M=mi(),os=t._main=(n,s)=>(os=t._main=M.sa)(n,s),ta=t._duckdb_web_fs_glob_add_path=n=>(ta=t._duckdb_web_fs_glob_add_path=M.ua)(n),ra=t._duckdb_web_clear_response=()=>(ra=t._duckdb_web_clear_response=M.va)(),na=t._duckdb_web_fail_with=n=>(na=t._duckdb_web_fail_with=M.wa)(n),sa=t._duckdb_web_reset=n=>(sa=t._duckdb_web_reset=M.xa)(n),ia=t._duckdb_web_connect=()=>(ia=t._duckdb_web_connect=M.ya)(),oa=t._duckdb_web_disconnect=n=>(oa=t._duckdb_web_disconnect=M.za)(n),aa=t._duckdb_web_flush_files=()=>(aa=t._duckdb_web_flush_files=M.Aa)(),ca=t._duckdb_web_flush_file=n=>(ca=t._duckdb_web_flush_file=M.Ba)(n),ua=t._duckdb_web_open=(n,s)=>(ua=t._duckdb_web_open=M.Ca)(n,s),la=t._duckdb_web_get_global_file_info=(n,s)=>(la=t._duckdb_web_get_global_file_info=M.Da)(n,s),da=t._duckdb_web_collect_file_stats=(n,s,a)=>(da=t._duckdb_web_collect_file_stats=M.Ea)(n,s,a),fa=t._duckdb_web_export_file_stats=(n,s)=>(fa=t._duckdb_web_export_file_stats=M.Fa)(n,s),ha=t._duckdb_web_fs_drop_file=(n,s)=>(ha=t._duckdb_web_fs_drop_file=M.Ga)(n,s),pa=t._duckdb_web_fs_drop_files=(n,s,a)=>(pa=t._duckdb_web_fs_drop_files=M.Ha)(n,s,a),_a=t._duckdb_web_fs_glob_file_infos=(n,s)=>(_a=t._duckdb_web_fs_glob_file_infos=M.Ia)(n,s),ma=t._duckdb_web_fs_get_file_info_by_id=(n,s,a)=>(ma=t._duckdb_web_fs_get_file_info_by_id=M.Ja)(n,s,a),ba=t._duckdb_web_fs_get_file_info_by_name=(n,s,a)=>(ba=t._duckdb_web_fs_get_file_info_by_name=M.Ka)(n,s,a),ga=t._duckdb_web_fs_register_file_url=(n,s,a,d,h)=>(ga=t._duckdb_web_fs_register_file_url=M.La)(n,s,a,d,h),ya=t._duckdb_web_fs_register_file_buffer=(n,s,a,d)=>(ya=t._duckdb_web_fs_register_file_buffer=M.Ma)(n,s,a,d),wa=t._duckdb_web_copy_file_to_buffer=(n,s)=>(wa=t._duckdb_web_copy_file_to_buffer=M.Na)(n,s),va=t._duckdb_web_copy_file_to_path=(n,s,a)=>(va=t._duckdb_web_copy_file_to_path=M.Oa)(n,s,a),Ea=t._duckdb_web_get_version=n=>(Ea=t._duckdb_web_get_version=M.Pa)(n),Sa=t._duckdb_web_get_feature_flags=()=>(Sa=t._duckdb_web_get_feature_flags=M.Qa)(),Aa=t._duckdb_web_tokenize=(n,s)=>(Aa=t._duckdb_web_tokenize=M.Ra)(n,s),Fa=t._duckdb_web_tokenize_buffer=(n,s,a)=>(Fa=t._duckdb_web_tokenize_buffer=M.Sa)(n,s,a),Da=t._duckdb_web_udf_scalar_create=(n,s,a)=>(Da=t._duckdb_web_udf_scalar_create=M.Ta)(n,s,a),Ia=t._duckdb_web_prepared_create=(n,s,a)=>(Ia=t._duckdb_web_prepared_create=M.Ua)(n,s,a),xa=t._duckdb_web_prepared_create_buffer=(n,s,a,d)=>(xa=t._duckdb_web_prepared_create_buffer=M.Va)(n,s,a,d),ka=t._duckdb_web_prepared_close=(n,s,a)=>(ka=t._duckdb_web_prepared_close=M.Wa)(n,s,a),Ra=t._duckdb_web_prepared_run=(n,s,a,d)=>(Ra=t._duckdb_web_prepared_run=M.Xa)(n,s,a,d),Ta=t._duckdb_web_prepared_send=(n,s,a,d)=>(Ta=t._duckdb_web_prepared_send=M.Ya)(n,s,a,d),Ba=t._duckdb_web_query_run=(n,s,a)=>(Ba=t._duckdb_web_query_run=M.Za)(n,s,a),Ua=t._duckdb_web_query_run_buffer=(n,s,a,d)=>(Ua=t._duckdb_web_query_run_buffer=M._a)(n,s,a,d),Oa=t._duckdb_web_pending_query_start=(n,s,a,d)=>(Oa=t._duckdb_web_pending_query_start=M.$a)(n,s,a,d),Ma=t._duckdb_web_pending_query_start_buffer=(n,s,a,d,h)=>(Ma=t._duckdb_web_pending_query_start_buffer=M.ab)(n,s,a,d,h),La=t._duckdb_web_pending_query_poll=(n,s,a)=>(La=t._duckdb_web_pending_query_poll=M.bb)(n,s,a),Ha=t._duckdb_web_pending_query_cancel=(n,s)=>(Ha=t._duckdb_web_pending_query_cancel=M.cb)(n,s),Ca=t._duckdb_web_query_fetch_results=(n,s)=>(Ca=t._duckdb_web_query_fetch_results=M.db)(n,s),Pa=t._duckdb_web_get_tablenames=(n,s,a)=>(Pa=t._duckdb_web_get_tablenames=M.eb)(n,s,a),Na=t._duckdb_web_get_tablenames_buffer=(n,s,a,d)=>(Na=t._duckdb_web_get_tablenames_buffer=M.fb)(n,s,a,d),Wa=t._duckdb_web_insert_arrow_from_ipc_stream=(n,s,a,d,h)=>(Wa=t._duckdb_web_insert_arrow_from_ipc_stream=M.gb)(n,s,a,d,h),Va=t._duckdb_web_insert_csv_from_path=(n,s,a,d)=>(Va=t._duckdb_web_insert_csv_from_path=M.hb)(n,s,a,d),$a=t._duckdb_web_insert_json_from_path=(n,s,a,d)=>($a=t._duckdb_web_insert_json_from_path=M.ib)(n,s,a,d),Me=t._malloc=n=>(Me=t._malloc=M.mb)(n),za=t._free=n=>(za=t._free=M.nb)(n),Ga=t._calloc=(n,s)=>(Ga=t._calloc=M.ob)(n,s),nn=n=>(nn=M.qb)(n),as=()=>(as=M.rb)(),sn=()=>(sn=M.sb)(),on=n=>(on=M.tb)(n),Wt=t.stackAlloc=n=>(Wt=t.stackAlloc=M.ub)(n);function ja(n){n=Object.assign({},n);var s=d=>h=>d(h)>>>0,a=d=>()=>d()>>>0;return n.mb=s(n.mb),n.sb=a(n.sb),n.ub=s(n.ub),n}t.stackAlloc=Wt,t.stackSave=sn,t.stackRestore=on,t.getTempRet0=as,t.setTempRet0=nn,t.ccall=Qo,t.createDyncallWrapper=Zo;var Vt;yt=function n(){Vt||cs(),Vt||(yt=n)};function Ya(){var n=os,s=0,a=0;try{var d=n(s,a);return es(d,!0),d}catch(h){return qo(h)}}function cs(){if(Ke>0||(gt(),Ke>0))return;function n(){Vt||(Vt=!0,t.calledRun=!0,!B&&(rt(),oi(),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),us&&Ya(),ai()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();var us=!0;return t.noInitialRun&&(us=!1),cs(),e.ready}})();typeof qs=="object"&&typeof Bn=="object"?Bn.exports=Ks:typeof define=="function"&&define.amd&&define([],()=>Ks)});var Qs=ct(()=>{});var Zs=ct(()=>{});var ei=ct((r_,Kr)=>{(function(){"use strict";var r="input is invalid type",e=typeof window=="object",t=e?window:{};t.JS_SHA256_NO_WINDOW&&(e=!1);var i=!e&&typeof self=="object",o=!t.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";o?t=global:i&&(t=self);var c=!t.JS_SHA256_NO_COMMON_JS&&typeof Kr=="object"&&Kr.exports,u=typeof define=="function"&&define.amd,f=!t.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),p=[-2147483648,8388608,32768,128],A=[24,16,8,0],H=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],k=["hex","array","digest","arrayBuffer"],x=[];(t.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"}),f&&(t.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(g){return typeof g=="object"&&g.buffer&&g.buffer.constructor===ArrayBuffer});var j=function(g,B){return function(L){return new K(B,!0).update(L)[g]()}},Y=function(g){var B=j("hex",g);o&&(B=se(B,g)),B.create=function(){return new K(g)},B.update=function(U){return B.create().update(U)};for(var L=0;L<k.length;++L){var E=k[L];B[E]=j(E,g)}return B},se=function(g,B){var L=Qs(),E=Zs().Buffer,U=B?"sha224":"sha256",D;E.from&&!t.JS_SHA256_NO_BUFFER_FROM?D=E.from:D=function(F){return new E(F)};var C=function(F){if(typeof F=="string")return L.createHash(U).update(F,"utf8").digest("hex");if(F==null)throw new Error(r);return F.constructor===ArrayBuffer&&(F=new Uint8Array(F)),Array.isArray(F)||ArrayBuffer.isView(F)||F.constructor===E?L.createHash(U).update(D(F)).digest("hex"):g(F)};return C},ue=function(g,B){return function(L,E){return new ae(L,B,!0).update(E)[g]()}},X=function(g){var B=ue("hex",g);B.create=function(U){return new ae(U,g)},B.update=function(U,D){return B.create(U).update(D)};for(var L=0;L<k.length;++L){var E=k[L];B[E]=ue(E,g)}return B};function K(g,B){B?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=g}K.prototype.update=function(g){if(!this.finalized){var B,L=typeof g;if(L!=="string"){if(L==="object"){if(g===null)throw new Error(r);if(f&&g.constructor===ArrayBuffer)g=new Uint8Array(g);else if(!Array.isArray(g)&&(!f||!ArrayBuffer.isView(g)))throw new Error(r)}else throw new Error(r);B=!0}for(var E,U=0,D,C=g.length,F=this.blocks;U<C;){if(this.hashed&&(this.hashed=!1,F[0]=this.block,this.block=F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0),B)for(D=this.start;U<C&&D<64;++U)F[D>>>2]|=g[U]<<A[D++&3];else for(D=this.start;U<C&&D<64;++U)E=g.charCodeAt(U),E<128?F[D>>>2]|=E<<A[D++&3]:E<2048?(F[D>>>2]|=(192|E>>>6)<<A[D++&3],F[D>>>2]|=(128|E&63)<<A[D++&3]):E<55296||E>=57344?(F[D>>>2]|=(224|E>>>12)<<A[D++&3],F[D>>>2]|=(128|E>>>6&63)<<A[D++&3],F[D>>>2]|=(128|E&63)<<A[D++&3]):(E=65536+((E&1023)<<10|g.charCodeAt(++U)&1023),F[D>>>2]|=(240|E>>>18)<<A[D++&3],F[D>>>2]|=(128|E>>>12&63)<<A[D++&3],F[D>>>2]|=(128|E>>>6&63)<<A[D++&3],F[D>>>2]|=(128|E&63)<<A[D++&3]);this.lastByteIndex=D,this.bytes+=D-this.start,D>=64?(this.block=F[16],this.start=D-64,this.hash(),this.hashed=!0):this.start=D}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},K.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var g=this.blocks,B=this.lastByteIndex;g[16]=this.block,g[B>>>2]|=p[B&3],this.block=g[16],B>=56&&(this.hashed||this.hash(),g[0]=this.block,g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0),g[14]=this.hBytes<<3|this.bytes>>>29,g[15]=this.bytes<<3,this.hash()}},K.prototype.hash=function(){var g=this.h0,B=this.h1,L=this.h2,E=this.h3,U=this.h4,D=this.h5,C=this.h6,F=this.h7,m=this.blocks,O,ee,ce,Fe,q,De,Be,We,tt,gt,rt;for(O=16;O<64;++O)q=m[O-15],ee=(q>>>7|q<<25)^(q>>>18|q<<14)^q>>>3,q=m[O-2],ce=(q>>>17|q<<15)^(q>>>19|q<<13)^q>>>10,m[O]=m[O-16]+ee+m[O-7]+ce<<0;for(rt=B&L,O=0;O<64;O+=4)this.first?(this.is224?(We=300032,q=m[0]-1413257819,F=q-150054599<<0,E=q+24177077<<0):(We=704751109,q=m[0]-210244248,F=q-1521486534<<0,E=q+143694565<<0),this.first=!1):(ee=(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10),ce=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),We=g&B,Fe=We^g&L^rt,Be=U&D^~U&C,q=F+ce+Be+H[O]+m[O],De=ee+Fe,F=E+q<<0,E=q+De<<0),ee=(E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10),ce=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),tt=E&g,Fe=tt^E&B^We,Be=F&U^~F&D,q=C+ce+Be+H[O+1]+m[O+1],De=ee+Fe,C=L+q<<0,L=q+De<<0,ee=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),ce=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),gt=L&E,Fe=gt^L&g^tt,Be=C&F^~C&U,q=D+ce+Be+H[O+2]+m[O+2],De=ee+Fe,D=B+q<<0,B=q+De<<0,ee=(B>>>2|B<<30)^(B>>>13|B<<19)^(B>>>22|B<<10),ce=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7),rt=B&L,Fe=rt^B&E^gt,Be=D&C^~D&F,q=U+ce+Be+H[O+3]+m[O+3],De=ee+Fe,U=g+q<<0,g=q+De<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+g<<0,this.h1=this.h1+B<<0,this.h2=this.h2+L<<0,this.h3=this.h3+E<<0,this.h4=this.h4+U<<0,this.h5=this.h5+D<<0,this.h6=this.h6+C<<0,this.h7=this.h7+F<<0},K.prototype.hex=function(){this.finalize();var g=this.h0,B=this.h1,L=this.h2,E=this.h3,U=this.h4,D=this.h5,C=this.h6,F=this.h7,m=l[g>>>28&15]+l[g>>>24&15]+l[g>>>20&15]+l[g>>>16&15]+l[g>>>12&15]+l[g>>>8&15]+l[g>>>4&15]+l[g&15]+l[B>>>28&15]+l[B>>>24&15]+l[B>>>20&15]+l[B>>>16&15]+l[B>>>12&15]+l[B>>>8&15]+l[B>>>4&15]+l[B&15]+l[L>>>28&15]+l[L>>>24&15]+l[L>>>20&15]+l[L>>>16&15]+l[L>>>12&15]+l[L>>>8&15]+l[L>>>4&15]+l[L&15]+l[E>>>28&15]+l[E>>>24&15]+l[E>>>20&15]+l[E>>>16&15]+l[E>>>12&15]+l[E>>>8&15]+l[E>>>4&15]+l[E&15]+l[U>>>28&15]+l[U>>>24&15]+l[U>>>20&15]+l[U>>>16&15]+l[U>>>12&15]+l[U>>>8&15]+l[U>>>4&15]+l[U&15]+l[D>>>28&15]+l[D>>>24&15]+l[D>>>20&15]+l[D>>>16&15]+l[D>>>12&15]+l[D>>>8&15]+l[D>>>4&15]+l[D&15]+l[C>>>28&15]+l[C>>>24&15]+l[C>>>20&15]+l[C>>>16&15]+l[C>>>12&15]+l[C>>>8&15]+l[C>>>4&15]+l[C&15];return this.is224||(m+=l[F>>>28&15]+l[F>>>24&15]+l[F>>>20&15]+l[F>>>16&15]+l[F>>>12&15]+l[F>>>8&15]+l[F>>>4&15]+l[F&15]),m},K.prototype.toString=K.prototype.hex,K.prototype.digest=function(){this.finalize();var g=this.h0,B=this.h1,L=this.h2,E=this.h3,U=this.h4,D=this.h5,C=this.h6,F=this.h7,m=[g>>>24&255,g>>>16&255,g>>>8&255,g&255,B>>>24&255,B>>>16&255,B>>>8&255,B&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255,U>>>24&255,U>>>16&255,U>>>8&255,U&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,C>>>24&255,C>>>16&255,C>>>8&255,C&255];return this.is224||m.push(F>>>24&255,F>>>16&255,F>>>8&255,F&255),m},K.prototype.array=K.prototype.digest,K.prototype.arrayBuffer=function(){this.finalize();var g=new ArrayBuffer(this.is224?28:32),B=new DataView(g);return B.setUint32(0,this.h0),B.setUint32(4,this.h1),B.setUint32(8,this.h2),B.setUint32(12,this.h3),B.setUint32(16,this.h4),B.setUint32(20,this.h5),B.setUint32(24,this.h6),this.is224||B.setUint32(28,this.h7),g};function ae(g,B,L){var E,U=typeof g;if(U==="string"){var D=[],C=g.length,F=0,m;for(E=0;E<C;++E)m=g.charCodeAt(E),m<128?D[F++]=m:m<2048?(D[F++]=192|m>>>6,D[F++]=128|m&63):m<55296||m>=57344?(D[F++]=224|m>>>12,D[F++]=128|m>>>6&63,D[F++]=128|m&63):(m=65536+((m&1023)<<10|g.charCodeAt(++E)&1023),D[F++]=240|m>>>18,D[F++]=128|m>>>12&63,D[F++]=128|m>>>6&63,D[F++]=128|m&63);g=D}else if(U==="object"){if(g===null)throw new Error(r);if(f&&g.constructor===ArrayBuffer)g=new Uint8Array(g);else if(!Array.isArray(g)&&(!f||!ArrayBuffer.isView(g)))throw new Error(r)}else throw new Error(r);g.length>64&&(g=new K(B,!0).update(g).array());var O=[],ee=[];for(E=0;E<64;++E){var ce=g[E]||0;O[E]=92^ce,ee[E]=54^ce}K.call(this,B,L),this.update(ee),this.oKeyPad=O,this.inner=!0,this.sharedMemory=L}ae.prototype=new K,ae.prototype.finalize=function(){if(K.prototype.finalize.call(this),this.inner){this.inner=!1;var g=this.array();K.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(g),K.prototype.finalize.call(this)}};var oe=Y();oe.sha256=oe,oe.sha224=Y(!0),oe.sha256.hmac=X(),oe.sha224.hmac=X(!0),c?Kr.exports=oe:(t.sha256=oe.sha256,t.sha224=oe.sha224,u&&define(function(){return oe}))})()});var iu={};rc(iu,{registerWorker:()=>ii});var At=Uint8Array.of(65,82,82,79,87,49),sc=Uint8Array.of(255,255,255,255,0,0,0,0),Se={V1:0,V2:1,V3:2,V4:3,V5:4};var ge={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3,Tensor:4,SparseTensor:5},b={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},lt={HALF:0,SINGLE:1,DOUBLE:2},Le={DAY:0,MILLISECOND:1},le={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},Ae={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},He={Sparse:0,Dense:1};var dt=Uint8Array,zt=Uint16Array,Gt=Uint32Array,jt=BigUint64Array,Ft=Int8Array,fs=Int16Array,me=Int32Array,ye=BigInt64Array,an=Float32Array,$e=Float64Array;function hs(r){return r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer}function ps(r,e){let t=Math.log2(r)-3;return(e?[Ft,fs,me,ye]:[dt,zt,Gt,jt])[t]}var cu=Object.getPrototypeOf(Int8Array);function ft(r,e){let t=0,i=r.length;if(i<=2147483648)do{let o=t+i>>>1;r[o]<=e?t=o+1:i=o}while(t<i);else do{let o=Math.trunc((t+i)/2);r[o]<=e?t=o+1:i=o}while(t<i);return t}function Yt(r,e,t){if(e(r))return r;throw new Error(t(r))}function we(r,e,t){return e=Array.isArray(e)?e:Object.values(e),Yt(r,i=>e.includes(i),t!=null?t:()=>`${r} must be one of ${e}`)}function Kt(r,e){for(let[t,i]of Object.entries(r))if(i===e)return t;return"<Unknown>"}var Ce=r=>`Unsupported data type: "${Kt(b,r)}" (id ${r})`,Dt=(r,e,t=!0,i=null)=>({name:r,type:e,nullable:t,metadata:i});function _s(r){return Object.hasOwn(r,"name")&&ms(r.type)}function ms(r){return typeof(r==null?void 0:r.typeId)=="number"}function ze(r,e="",t=!0){return _s(r)?r:Dt(e,Yt(r,ms,()=>"Data type expected."),t)}var qt=(r,e,t=!1,i=-1)=>({typeId:b.Dictionary,id:i,dictionary:r,indices:e||ht(),ordered:t});var Xt=(r=32,e=!0)=>({typeId:b.Int,bitWidth:we(r,[8,16,32,64]),signed:e,values:ps(r,e)});var ht=()=>Xt(32);var cn=(r=2)=>({typeId:b.Float,precision:we(r,lt),values:[zt,an,$e][r]});var un=()=>({typeId:b.Binary,offsets:me}),Jt=()=>({typeId:b.Utf8,offsets:me});var ln=(r,e,t=128)=>({typeId:b.Decimal,precision:r,scale:e,bitWidth:we(t,[32,64,128,256]),values:t===32?me:jt});var dn=r=>({typeId:b.Date,unit:we(r,Le),values:r===Le.DAY?me:ye});var fn=(r=le.MILLISECOND)=>{r=we(r,le);let e=r===le.SECOND||r===le.MILLISECOND?32:64;return{typeId:b.Time,unit:r,bitWidth:e,values:e===32?me:ye}};var Qt=(r=le.MILLISECOND,e=null)=>({typeId:b.Timestamp,unit:we(r,le),timezone:e,values:ye}),hn=(r=Ae.MONTH_DAY_NANO)=>({typeId:b.Interval,unit:we(r,Ae),values:r===Ae.MONTH_DAY_NANO?void 0:me}),Zt=r=>({typeId:b.List,children:[ze(r)],offsets:me}),er=r=>({typeId:b.Struct,children:Array.isArray(r)&&_s(r[0])?r:Object.entries(r).map(([e,t])=>Dt(e,t))}),pn=(r,e,t,i)=>(t!=null||(t=e.map((o,c)=>c)),{typeId:b.Union,mode:we(r,He),typeIds:t,typeMap:t.reduce((o,c,u)=>(o[c]=u,o),{}),children:e.map((o,c)=>ze(o,`_${c}`)),typeIdForValue:i,offsets:me}),_n=r=>({typeId:b.FixedSizeBinary,stride:r}),tr=(r,e)=>({typeId:b.FixedSizeList,stride:e,children:[ze(r)]}),bs=(r,e)=>({typeId:b.Map,keysSorted:r,children:[e],offsets:me});var mn=(r=le.MILLISECOND)=>({typeId:b.Duration,unit:we(r,le),values:ye}),bn=()=>({typeId:b.LargeBinary,offsets:ye}),gn=()=>({typeId:b.LargeUtf8,offsets:ye}),yn=r=>({typeId:b.LargeList,children:[ze(r)],offsets:ye}),wn=(r,e)=>({typeId:b.RunEndEncoded,children:[Yt(ze(r,"run_ends"),t=>t.type.typeId===b.Int,()=>"Run-ends must have an integer type."),ze(e,"values")]});var vn=r=>({typeId:b.ListView,children:[ze(r,"value")],offsets:me}),En=r=>({typeId:b.LargeListView,children:[ze(r,"value")],offsets:ye});var ic=new $e(2),rr=ic.buffer,bu=new ye(rr),gu=new Gt(rr),yu=new me(rr),wu=new dt(rr);function Ue(r){if(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${r}`);return Number(r)}function nr(r,e){return Number(r/e)+Number(r%e)/Number(e)}var pt=r=>BigInt.asUintN(64,r);function ys(r,e){return BigInt.asIntN(64,r[e])}function ws(r,e){let t=e<<1,i;return BigInt.asIntN(64,r[t+1])<0?(i=pt(~r[t])|pt(~r[t+1])<<64n,i=-(i+1n)):i=r[t]|r[t+1]<<64n,i}function vs(r,e){let t=e<<2,i;return BigInt.asIntN(64,r[t+3])<0?(i=pt(~r[t])|pt(~r[t+1])<<64n|pt(~r[t+2])<<128n|pt(~r[t+3])<<192n,i=-(i+1n)):i=r[t]|r[t+1]<<64n|r[t+2]<<128n|r[t+3]<<192n,i}var ac=new TextDecoder("utf-8"),Fu=new TextEncoder;function _t(r){return ac.decode(r)}var qe=4;function Sn(r,e){return(r[e>>3]&1<<e%8)!==0}function pe(r,e){let t=e+Z(r,e),i=t-Z(r,t),o=he(r,i);return(c,u,f=null)=>{if(c<o){let l=he(r,i+c);if(l)return u(r,t+l)}return f}}function xe(r,e){return e}function Ge(r,e){return!!cc(r,e)}function cc(r,e){return It(r,e)<<24>>24}function It(r,e){return r[e]}function he(r,e){return uc(r,e)<<16>>16}function uc(r,e){return r[e]|r[e+1]<<8}function Z(r,e){return r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24}function Es(r,e){return Z(r,e)>>>0}function de(r,e){return Ue(BigInt.asIntN(64,BigInt(Es(r,e))+(BigInt(Es(r,e+qe))<<32n)))}function Xe(r,e){let t=e+Z(r,e),i=Z(r,t);return t+=qe,_t(r.subarray(t,t+i))}function ve(r,e,t,i){if(!e)return[];let o=e+Z(r,e);return Array.from({length:Z(r,o)},(c,u)=>i(r,o+qe+u*t))}var sr=Symbol("rowIndex");function xt(r,e){class t{constructor(c){this[sr]=c}toJSON(){return Ss(r,e,this[sr])}}let i=t.prototype;for(let o=0;o<r.length;++o){if(Object.hasOwn(i,r[o]))continue;let c=e[o];Object.defineProperty(i,r[o],{get(){return c.at(this[sr])},enumerable:!0})}return o=>new t(o)}function ir(r,e){return t=>Ss(r,e,t)}function Ss(r,e,t){let i={};for(let o=0;o<r.length;++o)i[r[o]]=e[o].at(t);return i}function As(r){return r instanceof Pe}var je=class{constructor({length:e,nullCount:t,type:i,validity:o,values:c,offsets:u,sizes:f,children:l}){this.length=e,this.nullCount=t,this.type=i,this.validity=o,this.values=c,this.offsets=u,this.sizes=f,this.children=l,(!t||!this.validity)&&(this.at=p=>this.value(p))}get[Symbol.toStringTag](){return"Batch"}at(e){return this.isValid(e)?this.value(e):null}isValid(e){return Sn(this.validity,e)}value(e){return this.values[e]}slice(e,t){let i=t-e,o=Array(i);for(let c=0;c<i;++c)o[c]=this.at(e+c);return o}*[Symbol.iterator](){for(let e=0;e<this.length;++e)yield this.at(e)}};ut(je,"ArrayType",null);var Pe=class extends je{constructor(e){super(e);let{length:t,values:i}=this;this.values=i.subarray(0,t)}slice(e,t){return this.nullCount?super.slice(e,t):this.values.subarray(e,t)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}},Je=class extends je{};ut(Je,"ArrayType",$e);var ne=class extends je{};ut(ne,"ArrayType",Array);var Tt=class extends ne{value(e){return null}},Oe=class extends Je{value(e){return Ue(this.values[e])}},or=class extends Je{value(e){let t=this.values[e],i=(t&31744)>>10,o=(t&1023)/1024,c=(-1)**((t&32768)>>15);switch(i){case 31:return c*(o?Number.NaN:1/0);case 0:return c*(o?6103515625e-14*o:0)}return c*2**(i-15)*(1+o)}},ar=class extends ne{value(e){return Sn(this.values,e)}},cr=class extends Je{constructor(e){super(e);let{scale:t}=this.type;this.scale=10**t}value(e){return this.values[e]/this.scale}},ur=class extends je{constructor(e){super(e);let{bitWidth:t,scale:i}=this.type;this.decimal=t===64?ys:t===128?ws:vs,this.scale=10n**BigInt(i)}},kt=class extends ur{value(e){return nr(this.decimal(this.values,e),this.scale)}};ut(kt,"ArrayType",$e);var Rt=class extends ur{value(e){return this.decimal(this.values,e)}};ut(Rt,"ArrayType",Array);var Bt=class extends ne{constructor(e){super(e),this.source=e}value(e){return new Date(this.source.value(e))}},lr=class extends Je{value(e){return 864e5*this.values[e]}},Fs=Oe,dr=class extends Oe{value(e){return super.value(e)*1e3}},Ds=Oe,fr=class extends Oe{value(e){return nr(this.values[e],1000n)}},hr=class extends Oe{value(e){return nr(this.values[e],1000000n)}},pr=class extends ne{value(e){return this.values.subarray(e<<1,e+1<<1)}},_r=class extends ne{value(e){let t=this.values,i=e<<4;return Float64Array.of(Z(t,i),Z(t,i+4),de(t,i+8))}},Is=({values:r,offsets:e},t)=>r.subarray(e[t],e[t+1]),xs=({values:r,offsets:e},t)=>r.subarray(Ue(e[t]),Ue(e[t+1])),mr=class extends ne{value(e){return Is(this,e)}},br=class extends ne{value(e){return xs(this,e)}},gr=class extends ne{value(e){return _t(Is(this,e))}},yr=class extends ne{value(e){return _t(xs(this,e))}},wr=class extends ne{value(e){let t=this.offsets;return this.children[0].slice(t[e],t[e+1])}},vr=class extends ne{value(e){let t=this.offsets;return this.children[0].slice(Ue(t[e]),Ue(t[e+1]))}},Er=class extends ne{value(e){let t=this.offsets[e],i=t+this.sizes[e];return this.children[0].slice(t,i)}},Sr=class extends ne{value(e){let t=this.offsets[e],i=t+this.sizes[e];return this.children[0].slice(Ue(t),Ue(i))}},Ar=class extends ne{constructor(e){super(e),this.stride=this.type.stride}},Fr=class extends Ar{value(e){let{stride:t,values:i}=this;return i.subarray(e*t,(e+1)*t)}},Dr=class extends Ar{value(e){let{children:t,stride:i}=this;return t[0].slice(e*i,(e+1)*i)}};function ks({children:r,offsets:e},t){let[i,o]=r[0].children,c=e[t],u=e[t+1],f=[];for(let l=c;l<u;++l)f.push([i.at(l),o.at(l)]);return f}var Ir=class extends ne{value(e){return ks(this,e)}},xr=class extends ne{value(e){return new Map(ks(this,e))}},Ut=class extends ne{constructor({typeIds:e,...t}){super(t),this.typeIds=e,this.typeMap=this.type.typeMap}value(e,t=e){let{typeIds:i,children:o,typeMap:c}=this;return o[c[i[e]]].at(t)}},kr=class extends Ut{value(e){return super.value(e,this.offsets[e])}},Ot=class extends ne{constructor(e,t=ir){super(e),this.names=this.type.children.map(i=>i.name),this.factory=t(this.names,this.children)}value(e){return this.factory(e)}},Rr=class extends Ot{constructor(e){super(e,xt)}},Tr=class extends ne{value(e){let[{values:t},i]=this.children;return i.at(ft(t,e))}},Br=class extends ne{setDictionary(e){return this.dictionary=e,this.cache=e.cache(),this}value(e){return this.cache[this.key(e)]}key(e){return this.values[e]}},Ur=class extends ne{constructor({data:e,...t}){super(t),this.data=e}view(e){let{values:t,data:i}=this,o=e<<4,c=o+4,u=t,f=Z(u,o);return f>12&&(c=Z(u,o+12),u=i[Z(u,o+8)]),u.subarray(c,c+f)}},Or=class extends Ur{value(e){return this.view(e)}},Mr=class extends Ur{value(e){return _t(this.view(e))}};function An(r){let e=[];return{add(t){return e.push(t),this},clear:()=>e=[],done:()=>new Qe(e,r)}}var Qe=class{constructor(e,t=(i=>(i=e[0])==null?void 0:i.type)()){this.type=t,this.length=e.reduce((u,f)=>u+f.length,0),this.nullCount=e.reduce((u,f)=>u+f.nullCount,0),this.data=e;let o=e.length,c=new Int32Array(o+1);if(o===1){let[u]=e;c[1]=u.length,this.at=f=>u.at(f)}else for(let u=0,f=0;u<o;++u)c[u+1]=f+=e[u].length;this.offsets=c}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){let e=this.data;return e.length===1?e[0][Symbol.iterator]():lc(e)}at(e){var c;let{data:t,offsets:i}=this,o=ft(i,e)-1;return(c=t[o])==null?void 0:c.at(e-i[o])}get(e){return this.at(e)}toArray(){var l;let{length:e,nullCount:t,data:i}=this,o=!t&&As(i[0]),c=i.length;if(o&&c===1)return i[0].values;let u=!c||t>0?Array:(l=i[0].constructor.ArrayType)!=null?l:i[0].values.constructor,f=new u(e);return o?dc(f,i):fc(f,i)}cache(){var e;return(e=this._cache)!=null?e:this._cache=this.toArray()}};function*lc(r){for(let e=0;e<r.length;++e){let t=r[e][Symbol.iterator]();for(let i=t.next();!i.done;i=t.next())yield i.value}}function dc(r,e){for(let t=0,i=0;t<e.length;++t){let{values:o}=e[t];r.set(o,i),i+=o.length}return r}function fc(r,e){let t=-1;for(let i=0;i<e.length;++i){let o=e[i];for(let c=0;c<o.length;++c)r[++t]=o.at(c)}return r}var mt=class r{constructor(e,t,i=!1){let o=e.fields.map(u=>u.name);this.schema=e,this.names=o,this.children=t,this.factory=i?xt:ir;let c=[];this.getFactory=u=>{var f;return(f=c[u])!=null?f:c[u]=this.factory(o,t.map(l=>l.data[u]))}}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){var e,t;return(t=(e=this.children[0])==null?void 0:e.length)!=null?t:0}getChildAt(e){return this.children[e]}getChild(e){let t=this.names.findIndex(i=>i===e);return t>-1?this.children[t]:void 0}selectAt(e,t=[]){let{children:i,factory:o,schema:c}=this,{fields:u}=c;return new r({...c,fields:e.map((f,l)=>hc(u[f],t[l]))},e.map(f=>i[f]),o===xt)}select(e,t){let i=this.names,o=e.map(c=>i.indexOf(c));return this.selectAt(o,t)}toColumns(){let{children:e,names:t}=this,i={};return t.forEach((o,c)=>{var u,f;return i[o]=(f=(u=e[c])==null?void 0:u.toArray())!=null?f:[]}),i}toArray(){var u,f;let{children:e,getFactory:t,numRows:i}=this,o=(f=(u=e[0])==null?void 0:u.data)!=null?f:[],c=Array(i);for(let l=0,p=-1;l<o.length;++l){let A=t(l);for(let H=0;H<o[l].length;++H)c[++p]=A(H)}return c}*[Symbol.iterator](){var o,c;let{children:e,getFactory:t}=this,i=(c=(o=e[0])==null?void 0:o.data)!=null?c:[];for(let u=0;u<i.length;++u){let f=t(u);for(let l=0;l<i[u].length;++l)yield f(l)}}at(e){let{children:t,getFactory:i,numRows:o}=this;if(e<0||e>=o)return null;let[{offsets:c}]=t,u=ft(c,e)-1;return i(u)(e-c[u])}get(e){return this.at(e)}};function hc(r,e){return e!=null&&e!==r.name?{...r,name:e}:r}function Mt(r,e={}){let{typeId:t,bitWidth:i,mode:o,precision:c,unit:u}=r,{useBigInt:f,useDate:l,useDecimalInt:p,useMap:A,useProxy:H}=e;switch(t){case b.Null:return Tt;case b.Bool:return ar;case b.Int:case b.Time:case b.Duration:return f||i<64?Pe:Oe;case b.Float:return c?Pe:or;case b.Date:return Rs(u===Le.DAY?lr:Fs,l&&Bt);case b.Timestamp:return Rs(u===le.SECOND?dr:u===le.MILLISECOND?Ds:u===le.MICROSECOND?fr:hr,l&&Bt);case b.Decimal:return i===32?p?Pe:cr:p?Rt:kt;case b.Interval:return u===Ae.DAY_TIME?pr:u===Ae.YEAR_MONTH?Pe:_r;case b.FixedSizeBinary:return Fr;case b.Utf8:return gr;case b.LargeUtf8:return yr;case b.Binary:return mr;case b.LargeBinary:return br;case b.BinaryView:return Or;case b.Utf8View:return Mr;case b.List:return wr;case b.LargeList:return vr;case b.Map:return A?xr:Ir;case b.ListView:return Er;case b.LargeListView:return Sr;case b.FixedSizeList:return Dr;case b.Struct:return H?Rr:Ot;case b.RunEndEncoded:return Tr;case b.Dictionary:return Br;case b.Union:return o?kr:Ut}throw new Error(Ce(t))}function Rs(r,e){return e?class extends e{constructor(i){super(new r(i))}}:r}function pc(r,e){return{offset:de(r,e),metadataLength:Z(r,e+8),bodyLength:de(r,e+16)}}function Fn(r,e){return ve(r,e,24,pc)}function Lr(r,e,t){let i=pe(r,e);if(i(10,xe,0))throw new Error("Record batch compression not implemented");let o=t<Se.V4?8:0;return{length:i(4,de,0),nodes:ve(r,i(6,xe),16,(c,u)=>({length:de(c,u),nullCount:de(c,u+8)})),regions:ve(r,i(8,xe),16+o,(c,u)=>({offset:de(c,u+o),length:de(c,u+o+8)})),variadic:ve(r,i(12,xe),8,de)}}function Ts(r,e,t){let i=pe(r,e);return{id:i(4,de,0),data:i(6,(o,c)=>Lr(o,c,t)),isDelta:i(8,Ge,!1)}}function Dn(r,e,t,i){we(t,b,Ce);let o=pe(r,e);switch(t){case b.Binary:return un();case b.Utf8:return Jt();case b.LargeBinary:return bn();case b.LargeUtf8:return gn();case b.List:return Zt(i[0]);case b.ListView:return vn(i[0]);case b.LargeList:return yn(i[0]);case b.LargeListView:return En(i[0]);case b.Struct:return er(i);case b.RunEndEncoded:return wn(i[0],i[1]);case b.Int:return Xt(o(4,Z,0),o(6,Ge,!1));case b.Float:return cn(o(4,he,lt.HALF));case b.Decimal:return ln(o(4,Z,0),o(6,Z,0),o(8,Z,128));case b.Date:return dn(o(4,he,Le.MILLISECOND));case b.Time:return fn(o(4,he,le.MILLISECOND));case b.Timestamp:return Qt(o(4,he,le.SECOND),o(6,Xe));case b.Interval:return hn(o(4,he,Ae.YEAR_MONTH));case b.Duration:return mn(o(4,he,le.MILLISECOND));case b.FixedSizeBinary:return _n(o(4,Z,0));case b.FixedSizeList:return tr(i[0],o(4,Z,0));case b.Map:return bs(o(4,Ge,!1),i[0]);case b.Union:return pn(o(4,he,He.Sparse),i,ve(r,o(6,xe),4,Z))}return{typeId:t}}function Lt(r,e){let t=ve(r,e,4,(i,o)=>{let c=pe(i,o);return[c(4,Xe),c(6,Xe)]});return t.length?new Map(t):null}function Hr(r,e,t){let i=pe(r,e);return{version:t,endianness:i(4,he,0),fields:i(6,_c,[]),metadata:i(8,Lt)}}function _c(r,e){return ve(r,e,4,Bs)}function Bs(r,e){let t=pe(r,e),i=t(8,It,b.NONE),o=t(10,xe,0),c=t(12,bc),u=t(14,(l,p)=>mc(l,p)),f=Dn(r,o,i,u);return c&&(c.dictionary=f,f=c),{name:t(4,Xe),type:f,nullable:t(6,Ge,!1),metadata:t(16,Lt)}}function mc(r,e){let t=ve(r,e,4,Bs);return t.length?t:null}function bc(r,e){if(!e)return null;let t=pe(r,e);return qt(null,t(6,gc,ht()),t(8,Ge,!1),t(4,de,0))}function gc(r,e){return Dn(r,e,b.Int)}var yc=(r,e)=>`Expected to read ${r} metadata bytes, but only read ${e}.`,wc=(r,e)=>`Expected to read ${r} bytes for message body, but only read ${e}.`,vc=r=>`Unsupported message type: ${r} (${Kt(ge,r)})`;function Cr(r,e){let t=Z(r,e)||0;if(e+=qe,t===-1&&(t=Z(r,e)||0,e+=qe),t===0)return null;let i=r.subarray(e,e+=t);if(i.byteLength<t)throw new Error(yc(t,i.byteLength));let o=pe(i,0),c=o(4,he,Se.V1),u=o(6,It,ge.NONE),f=o(8,xe,0),l=o(10,de,0),p;if(f){let A=u===ge.Schema?Hr:u===ge.DictionaryBatch?Ts:u===ge.RecordBatch?Lr:null;if(!A)throw new Error(vc(u));if(p=A(i,f,c),l>0){let H=r.subarray(e,e+=l);if(H.byteLength<l)throw new Error(wc(l,H.byteLength));p.body=H}else u!==ge.Schema&&(p.body=new Uint8Array(0))}return{version:c,type:u,index:e,content:p}}function Us(r){let e=hs(r)?new Uint8Array(r):r;return e instanceof Uint8Array&&Ec(e)?Ac(e):Sc(e)}function Ec(r){if(!r||r.length<4)return!1;for(let e=0;e<6;++e)if(At[e]!==r[e])return!1;return!0}function Sc(r){let e=[r].flat(),t,i=[],o=[];for(let c of e){if(!(c instanceof Uint8Array))throw new Error("IPC data batch was not a Uint8Array.");let u=0;for(;;){let f=Cr(c,u);if(f===null)break;if(u=f.index,!!f.content)switch(f.type){case ge.Schema:t||(t=f.content);break;case ge.RecordBatch:i.push(f.content);break;case ge.DictionaryBatch:o.push(f.content);break}}}return{schema:t,dictionaries:o,records:i,metadata:null}}function Ac(r){let e=r.byteLength-(At.length+4),t=Z(r,e),i=pe(r,e-t),o=i(4,he,Se.V1),c=i(8,Fn,[]),u=i(10,Fn,[]);return{schema:i(6,(f,l)=>Hr(f,l,o)),dictionaries:c.map(({offset:f})=>Cr(r,f).content),records:u.map(({offset:f})=>Cr(r,f).content),metadata:i(12,Lt)}}function Pr(r,e){return Fc(Us(r),e)}function Fc(r,e={}){let{schema:t={fields:[]},dictionaries:i,records:o}=r,{version:c,fields:u}=t,f=new Map,l=Ic(e,c,f),p=new Map;Dc(t,k=>{let x=k.type;x.typeId===b.Dictionary&&p.set(x.id,x.dictionary)});let A=new Map;for(let k of i){let{id:x,data:j,isDelta:Y,body:se}=k,ue=p.get(x),X=In(ue,l({...j,body:se}));if(A.has(x)){let K=A.get(x);Y||K.clear(),K.add(X)}else{if(Y)throw new Error("Delta update can not be first dictionary batch.");A.set(x,An(ue).add(X))}}A.forEach((k,x)=>f.set(x,k.done()));let H=u.map(k=>An(k.type));for(let k of o){let x=l(k);u.forEach((j,Y)=>H[Y].add(In(j.type,x)))}return new mt(t,H.map(k=>k.done()),e.useProxy)}function Dc(r,e){r.fields.forEach(function t(i){var o,c,u;e(i),(c=(o=i.type.dictionary)==null?void 0:o.children)==null||c.forEach(t),(u=i.type.children)==null||u.forEach(t)})}function Ic(r,e,t){let i={version:e,options:r,dictionary:o=>t.get(o)};return o=>{let{length:c,nodes:u,regions:f,variadic:l,body:p}=o,A=-1,H=-1,k=-1;return{...i,length:c,node:()=>u[++A],buffer:x=>{let{length:j,offset:Y}=f[++H];return x?new x(p.buffer,p.byteOffset+Y,j/x.BYTES_PER_ELEMENT):p.subarray(Y,Y+j)},variadic:()=>l[++k],visit(x){return x.map(j=>In(j.type,this))}}}}function In(r,e){let{typeId:t}=r,{options:i,node:o,buffer:c,variadic:u,version:f}=e,l=Mt(r,i),p={...o(),type:r};if(t===b.Null)return new l({...p,nullCount:p.length});switch(t){case b.Bool:case b.Int:case b.Time:case b.Duration:case b.Float:case b.Decimal:case b.Date:case b.Timestamp:case b.Interval:case b.FixedSizeBinary:return new l({...p,validity:c(),values:c(r.values)});case b.Utf8:case b.LargeUtf8:case b.Binary:case b.LargeBinary:return new l({...p,validity:c(),offsets:c(r.offsets),values:c()});case b.BinaryView:case b.Utf8View:return new l({...p,validity:c(),values:c(),data:Array.from({length:u()},()=>c())});case b.List:case b.LargeList:case b.Map:return new l({...p,validity:c(),offsets:c(r.offsets),children:e.visit(r.children)});case b.ListView:case b.LargeListView:return new l({...p,validity:c(),offsets:c(r.offsets),sizes:c(r.offsets),children:e.visit(r.children)});case b.FixedSizeList:case b.Struct:return new l({...p,validity:c(),children:e.visit(r.children)});case b.RunEndEncoded:return new l({...p,children:e.visit(r.children)});case b.Dictionary:{let{id:A,indices:H}=r;return new l({...p,validity:c(),values:c(H.values)}).setDictionary(e.dictionary(A))}case b.Union:return f<Se.V5&&c(),new l({...p,typeIds:c(Ft),offsets:r.mode===He.Sparse?null:c(r.offsets),children:e.visit(r.children)});default:throw new Error(Ce(t))}}var rd=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Nr=class{constructor(e,t){this._bindings=e,this._conn=t}close(){this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}query(e){let t=this._bindings.runQuery(this._conn,e);return Pr(t)}async send(e,t=!1){let i=this._bindings.startPendingQuery(this._conn,e,t);for(;i==null;)i=await new Promise((o,c)=>{try{o(this._bindings.pollPendingQuery(this._conn))}catch(u){console.log(u),u.message.includes("worker is not set!")?c(new Error("Worker has been terminated")):c(u)}});return new Wr(this._bindings,this._conn,i)}cancelSent(){return this._bindings.cancelPendingQuery(this._conn)}getTableNames(e){return this._bindings.getTableNames(this._conn,e)}prepare(e){let t=this._bindings.createPrepared(this._conn,e);return new xn(this._bindings,this._conn,t)}insertArrowFromIPCStream(e,t){this._bindings.insertArrowFromIPCStream(this._conn,e,t)}insertCSVFromPath(e,t){this._bindings.insertCSVFromPath(this._conn,e,t)}insertJSONFromPath(e,t){this._bindings.insertJSONFromPath(this._conn,e,t)}},Wr=class{constructor(e,t,i){this.bindings=e;this.conn=t;this.header=i;this._first=!0,this._depleted=!1}next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;do e=this.bindings.fetchQueryResults(this.conn);while(e==null);return this._depleted=e.length==0,{done:this._depleted,value:e}}[Symbol.iterator](){return this}},xn=class{constructor(e,t,i){this.bindings=e,this.connectionId=t,this.statementId=i}close(){this.bindings.closePrepared(this.connectionId,this.statementId)}query(...e){let t=this.bindings.runPrepared(this.connectionId,this.statementId,e);return Pr(t)}send(...e){let t=this.bindings.sendPrepared(this.connectionId,this.statementId,e);return new Wr(this.bindings,this.connectionId,t)}};function Ns(r){return r<=255}function Ws(r){return r===256}var zs=new TextEncoder,Vs=new TextDecoder("utf-8");function kn(r,e,t){let i=zs.encode(t),o=r._malloc(i.byteLength),c=r.HEAPU8.subarray(o,o+i.byteLength);c.set(i),r.HEAPF64[(e>>3)+0]=1,r.HEAPF64[(e>>3)+1]=o,r.HEAPF64[(e>>3)+2]=c.byteLength}function Tn(r){switch(r){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function Rn(r,e,t,i){let o=r.HEAPU8.subarray(e,e+i*Tn(t));switch(t){case"UINT8":return new Uint8Array(o.buffer,o.byteOffset,i);case"INT8":return new Int8Array(o.buffer,o.byteOffset,i);case"INT32":return new Int32Array(o.buffer,o.byteOffset,i);case"FLOAT":return new Float32Array(o.buffer,o.byteOffset,i);case"DOUBLE":return new Float64Array(o.buffer,o.byteOffset,i);case"VARCHAR":return new Float64Array(o.buffer,o.byteOffset,i);default:return new Array(0)}}function $s(r,e,t){let i=r.HEAPU8.subarray(e,e+t);return new Uint8Array(i.buffer,i.byteOffset,t)}function Vr(r,e,t){let i=r.HEAPU8.subarray(e,e+t*8);return new Float64Array(i.buffer,i.byteOffset,t)}function Gs(r,e,t,i,o,c,u,f){try{let l=r._udfFunctions.get(i);if(!l){kn(e,t,"Unknown UDF with id: "+i);return}let p=Vs.decode(e.HEAPU8.subarray(o,o+c)),A=JSON.parse(p),H=Vr(e,u,f/8),k=E=>{var D;let U=null;switch(E.validityBuffer!==void 0&&(U=$s(e,H[E.validityBuffer],A.rows)),E.physicalType){case"VARCHAR":{if(E.dataBuffer===null||E.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(E.lengthBuffer===null||E.lengthBuffer===void 0)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let C=Rn(e,H[E.dataBuffer],E.physicalType,A.rows),F=[],m=Vr(e,H[E.lengthBuffer],A.rows);for(let O=0;O<A.rows;++O){if(U!=null&&!U[O]){F.push(null);continue}let ee=e.HEAPU8.subarray(C[O],C[O]+m[O]),ce=Vs.decode(ee);F.push(ce)}return O=>F[O]}case"STRUCT":{let C={},F=[];for(let m=0;m<(((D=E.children)==null?void 0:D.length)||0);++m){let O=E.children[m],ee=k(O);F.push(ce=>{C[O.name]=ee(ce)})}return U!=null?m=>{if(!U[m])return null;for(let O of F)O(m);return C}:m=>{for(let O of F)O(m);return C}}default:{if(E.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for argument of type: "+E.physicalType);let C=Rn(e,H[E.dataBuffer],E.physicalType,A.rows);return U!=null?F=>U[F]?C[F]:null:F=>C[F]}}},x=[];for(let E=0;E<A.args.length;++E)x.push(k(A.args[E]));let j=A.rows*Tn(A.ret.physicalType),Y=e._malloc(j),se=Rn(e,Y,A.ret.physicalType,A.rows),ue=e._malloc(A.rows),X=$s(e,ue,A.rows);if(se.length==0||X.length==0){kn(e,t,"Can't create physical arrays for result");return}let K=se;A.ret.physicalType=="VARCHAR"&&(K=new Array(A.rows));let ae=[];for(let E=0;E<A.args.length;++E)ae.push(null);for(let E=0;E<A.rows;++E){for(let D=0;D<A.args.length;++D)ae[D]=x[D](E);let U=l.func(...ae);K[E]=U,X[E]=U==null?0:1}let oe=0;switch(A.ret.physicalType){case"VARCHAR":{let E=new Array(0);oe=e._malloc(A.rows*Tn("DOUBLE"));let U=Vr(e,oe,A.rows),D=0;for(let O=0;O<A.rows;++O){let ee=zs.encode(K[O]||"");E.push(ee),U[O]=ee.length,D+=ee.length}let C=e._malloc(D),F=e.HEAPU8.subarray(C,C+D),m=0;for(let O=0;O<A.rows;++O){se[O]=m;let ee=E[O];F.subarray(m,m+ee.length).set(ee),m+=ee.length}}}let g=3*8,B=e._malloc(g),L=Vr(e,B,3);L[0]=Y,L[1]=ue,L[2]=oe,e.HEAPF64[(t>>3)+0]=0,e.HEAPF64[(t>>3)+1]=B,e.HEAPF64[(t>>3)+2]=0}catch(l){kn(e,t,l.toString())}}function Jc(){let r=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),r.decode(e))}var Qc=Jc();function ke(r,e){console.error(`FAIL WITH: ${e}`),r.ccall("duckdb_web_fail_with",null,["string"],[e])}function et(r,e,t){let i=r.HEAPU8.subarray(e,e+t),o=new Uint8Array(new ArrayBuffer(i.byteLength));return o.set(i),o}function z(r,e,t){return Qc(r.HEAPU8.subarray(e,e+t))}function Q(r,e,t,i){let o=r.stackSave(),c=r.stackAlloc(3*8);t.unshift("number"),i.unshift(c),r.ccall(e,null,t,i);let u=r.HEAPF64[(c>>3)+0],f=r.HEAPF64[(c>>3)+1],l=r.HEAPF64[(c>>3)+2];return r.stackRestore(o),[u,f,l]}function te(r){r.ccall("duckdb_web_clear_response",null,[],[])}var $r=class{constructor(e){let t=new Float64Array(e.buffer,e.byteOffset,e.byteLength/8),i=new Uint8Array(new ArrayBuffer(e.byteLength));i.set(e.subarray(7*8)),this.totalFileReadsCold=t[0],this.totalFileReadsAhead=t[1],this.totalFileReadsCached=t[2],this.totalFileWrites=t[3],this.totalPageAccesses=t[4],this.totalPageLoads=t[5],this.blockSize=t[6],this.blockStats=i}getBlockStats(e,t){return t=t||{file_reads_cold:0,file_reads_ahead:0,file_reads_cached:0,file_writes:0,page_accesses:0,page_loads:0},t.file_writes=this.blockStats[e*3+0]&15,t.file_reads_cold=this.blockStats[e*3+0]>>4,t.file_reads_ahead=this.blockStats[e*3+1]&15,t.file_reads_cached=this.blockStats[e*3+1]>>4,t.page_accesses=this.blockStats[e*3+1]&15,t.page_loads=this.blockStats[e*3+1]>>4,t}};var bt=new TextEncoder;var zr=class{constructor(e,t){this._instance=null;this._initPromise=null;this._initPromiseResolver=()=>{};this.onInstantiationProgress=[];this._logger=e,this._runtime=t}get logger(){return this._logger}get mod(){return this._instance}get pthread(){return this.mod.PThread||null}async instantiate(e=t=>{}){return this._instance!=null?this:(this._initPromise!=null&&(this.onInstantiationProgress.push(e),await this._initPromise),this._initPromise=new Promise(t=>{this._initPromiseResolver=t}),this.onInstantiationProgress=[e],this._instance=await this.instantiateImpl({print:console.log.bind(console),printErr:console.log.bind(console),onRuntimeInitialized:this._initPromiseResolver}),await this._initPromise,this._initPromise=null,this.onInstantiationProgress=this.onInstantiationProgress.filter(t=>t!=e),globalThis.DUCKDB_BINDINGS=this,this)}open(e){let[t,i,o]=Q(this.mod,"duckdb_web_open",["string"],[JSON.stringify(e)]);if(t!==0)throw new Error(z(this.mod,i,o));te(this.mod)}reset(){let[e,t,i]=Q(this.mod,"duckdb_web_reset",[],[]);if(e!==0)throw new Error(z(this.mod,t,i));te(this.mod)}getVersion(){let[e,t,i]=Q(this.mod,"duckdb_web_get_version",[],[]);if(e!==0)throw new Error(z(this.mod,t,i));let o=z(this.mod,t,i);return te(this.mod),o}getFeatureFlags(){return this.mod.ccall("duckdb_web_get_feature_flags","number",[],[])}tokenize(e){let t=bt.encode(e),i=this.mod._malloc(t.length);this.mod.HEAPU8.subarray(i,i+t.length).set(t);let[c,u,f]=Q(this.mod,"duckdb_web_tokenize_buffer",["number","number"],[i,t.length]);if(this.mod._free(i),c!==0)throw new Error(z(this.mod,u,f));let l=z(this.mod,u,f);return te(this.mod),JSON.parse(l)}connect(){let e=this.mod.ccall("duckdb_web_connect","number",[],[]);return new Nr(this,e)}disconnect(e){if(this.mod.ccall("duckdb_web_disconnect",null,["number"],[e]),this.pthread)for(let t of[...this.pthread.runningWorkers,...this.pthread.unusedWorkers])t.postMessage({cmd:"dropUDFFunctions",connectionId:e})}runQuery(e,t){let i=bt.encode(t),o=this.mod._malloc(i.length);this.mod.HEAPU8.subarray(o,o+i.length).set(i);let[u,f,l]=Q(this.mod,"duckdb_web_query_run_buffer",["number","number","number"],[e,o,i.length]);if(this.mod._free(o),u!==0)throw new Error(z(this.mod,f,l));let p=et(this.mod,f,l);return te(this.mod),p}startPendingQuery(e,t,i=!1){let o=bt.encode(t),c=this.mod._malloc(o.length);this.mod.HEAPU8.subarray(c,c+o.length).set(o);let[f,l,p]=Q(this.mod,"duckdb_web_pending_query_start_buffer",["number","number","number","boolean"],[e,c,o.length,i]);if(this.mod._free(c),f!==0)throw new Error(z(this.mod,l,p));if(l==0)return null;let A=et(this.mod,l,p);return te(this.mod),A}pollPendingQuery(e){let[t,i,o]=Q(this.mod,"duckdb_web_pending_query_poll",["number"],[e]);if(t!==0)throw new Error(z(this.mod,i,o));if(i==0)return null;let c=et(this.mod,i,o);return te(this.mod),c}cancelPendingQuery(e){return this.mod.ccall("duckdb_web_pending_query_cancel","boolean",["number"],[e])}fetchQueryResults(e){let[t,i,o]=Q(this.mod,"duckdb_web_query_fetch_results",["number"],[e]);if(Ws(t))return te(this.mod),null;if(!Ns(t))throw new Error("Unexpected StatusCode from duckdb_web_query_fetch_results ("+t+") and with self reported error as"+z(this.mod,i,o));if(t!==0)throw new Error(z(this.mod,i,o));let c=et(this.mod,i,o);return te(this.mod),c}getTableNames(e,t){let i=bt.encode(t),o=this.mod._malloc(i.length);this.mod.HEAPU8.subarray(o,o+i.length).set(i);let[u,f,l]=Q(this.mod,"duckdb_web_get_tablenames_buffer",["number","number","number"],[e,o,i.length]);if(this.mod._free(o),u!==0)throw new Error(z(this.mod,f,l));let p=z(this.mod,f,l);return te(this.mod),JSON.parse(p)}createPrepared(e,t){let i=bt.encode(t),o=this.mod._malloc(i.length);this.mod.HEAPU8.subarray(o,o+i.length).set(i);let[u,f,l]=Q(this.mod,"duckdb_web_prepared_create_buffer",["number","number","number"],[e,o,i.length]);if(this.mod._free(o),u!==0)throw new Error(z(this.mod,f,l));return te(this.mod),f}closePrepared(e,t){let[i,o,c]=Q(this.mod,"duckdb_web_prepared_close",["number","number"],[e,t]);if(i!==0)throw new Error(z(this.mod,o,c));te(this.mod)}runPrepared(e,t,i){let[o,c,u]=Q(this.mod,"duckdb_web_prepared_run",["number","number","string"],[e,t,JSON.stringify(i)]);if(o!==0)throw new Error(z(this.mod,c,u));let f=et(this.mod,c,u);return te(this.mod),f}sendPrepared(e,t,i){let[o,c,u]=Q(this.mod,"duckdb_web_prepared_send",["number","number","string"],[e,t,JSON.stringify(i)]);if(o!==0)throw new Error(z(this.mod,c,u));let f=et(this.mod,c,u);return te(this.mod),f}insertArrowFromIPCStream(e,t,i){if(t.length==0)return;let o=this.mod._malloc(t.length);this.mod.HEAPU8.subarray(o,o+t.length).set(t);let u=i?JSON.stringify(i):"",[f,l,p]=Q(this.mod,"duckdb_web_insert_arrow_from_ipc_stream",["number","number","number","string"],[e,o,t.length,u]);if(f!==0)throw new Error(z(this.mod,l,p))}insertCSVFromPath(e,t,i){let o=JSON.stringify(i),[c,u,f]=Q(this.mod,"duckdb_web_insert_csv_from_path",["number","string","string"],[e,t,o]);if(c!==0)throw new Error(z(this.mod,u,f))}insertJSONFromPath(e,t,i){let o=JSON.stringify(i),[c,u,f]=Q(this.mod,"duckdb_web_insert_json_from_path",["number","string","string"],[e,t,o]);if(c!==0)throw new Error(z(this.mod,u,f))}globFiles(e){let[t,i,o]=Q(this.mod,"duckdb_web_fs_glob_file_infos",["string"],[e]);if(t!==0)throw new Error(z(this.mod,i,o));let c=z(this.mod,i,o);te(this.mod);let u=JSON.parse(c);return u==null?[]:u}registerFileURL(e,t,i,o=!1){t===void 0&&(t=e);let[c,u,f]=Q(this.mod,"duckdb_web_fs_register_file_url",["string","string"],[e,t,i,o]);if(c!==0)throw new Error(z(this.mod,u,f));te(this.mod)}registerFileText(e,t){let i=bt.encode(t);this.registerFileBuffer(e,i)}registerFileBuffer(e,t){let i=this.mod._malloc(t.length);this.mod.HEAPU8.subarray(i,i+t.length).set(t);let[c,u,f]=Q(this.mod,"duckdb_web_fs_register_file_buffer",["string","number","number"],[e,i,t.length]);if(c!==0)throw new Error(z(this.mod,u,f));te(this.mod)}async prepareFileHandle(e,t){if(t===3&&this._runtime.prepareFileHandles){let i=await this._runtime.prepareFileHandles([e],3);for(let o of i){let{handle:c,path:u,fromCached:f}=o;!f&&c.getSize()&&await this.registerFileHandleAsync(u,c,3,!0)}return}throw new Error(`prepareFileHandle: unsupported protocol ${t}`)}async prepareDBFileHandle(e,t){if(t===3&&this._runtime.prepareDBFileHandle){let i=await this._runtime.prepareDBFileHandle(e,3);for(let o of i){let{handle:c,path:u,fromCached:f}=o;!f&&c.getSize()&&await this.registerFileHandleAsync(u,c,3,!0)}return}throw new Error(`prepareDBFileHandle: unsupported protocol ${t}`)}async prepareFileHandleAsync(e,t,i,o){if(i===3&&!(t instanceof FileSystemSyncAccessHandle)){if(t instanceof FileSystemFileHandle){let c=t;try{t=await c.createSyncAccessHandle()}catch(u){throw new Error(u.message+":"+e)}}else if(e!=null)try{t=await(await(await navigator.storage.getDirectory()).getFileHandle(e)).createSyncAccessHandle()}catch(c){throw new Error(c.message+":"+e)}}return t}async registerFileHandleAsync(e,t,i,o){let c=await this.prepareFileHandleAsync(e,t,i,o);this.registerFileHandle(e,c,i,o)}registerFileHandle(e,t,i,o){var l;let[c,u,f]=Q(this.mod,"duckdb_web_fs_register_file_url",["string","string","number","boolean"],[e,e,i,o]);if(c!==0)throw new Error(z(this.mod,u,f));if(te(this.mod),globalThis.DUCKDB_RUNTIME._files=(globalThis.DUCKDB_RUNTIME._files||new Map).set(e,t),(l=globalThis.DUCKDB_RUNTIME._preparedHandles)!=null&&l[e]&&delete globalThis.DUCKDB_RUNTIME._preparedHandles[e],this.pthread){for(let p of this.pthread.runningWorkers)p.postMessage({cmd:"registerFileHandle",fileName:e,fileHandle:t});for(let p of this.pthread.unusedWorkers)p.postMessage({cmd:"dropFileHandle",fileName:e})}}dropFile(e){let[t,i,o]=Q(this.mod,"duckdb_web_fs_drop_file",["string"],[e]);if(t!==0)throw new Error(z(this.mod,i,o));te(this.mod)}dropFiles(e){let t=[],i=-1;try{for(let f of e!=null?e:[])if(f!=null&&f.length>0){let l=this.mod.lengthBytesUTF8(f)+1,p=this.mod._malloc(l);if(!p)throw new Error(`Failed to allocate memory for string: ${f}`);this.mod.stringToUTF8(f,p,l),t.push(p)}if(i=this.mod._malloc(t.length*4),!i)throw new Error("Failed to allocate memory for pointers array");for(let f=0;f<t.length;f++)this.mod.HEAP32[(i>>2)+f]=t[f];let[o,c,u]=Q(this.mod,"duckdb_web_fs_drop_files",["number","number"],[i,t.length]);if(o!==0)throw new Error(z(this.mod,c,u));te(this.mod)}finally{for(let o of t)this.mod._free(o);i>0&&this.mod._free(i)}}flushFiles(){this.mod.ccall("duckdb_web_flush_files",null,[],[])}copyFileToPath(e,t){let[i,o,c]=Q(this.mod,"duckdb_web_copy_file_to_path",["string","string"],[e,t]);if(i!==0)throw new Error(z(this.mod,o,c));te(this.mod)}copyFileToBuffer(e){let[t,i,o]=Q(this.mod,"duckdb_web_copy_file_to_buffer",["string"],[e]);if(t!==0)throw new Error(z(this.mod,i,o));let c=this.mod.HEAPU8.subarray(i,i+o),u=new Uint8Array(c.length);return u.set(c),te(this.mod),u}async registerOPFSFileName(e){if(e.startsWith("opfs://"))return this.prepareFileHandle(e,3);throw new Error("Not an OPFS file name: "+e)}collectFileStatistics(e,t){let[i,o,c]=Q(this.mod,"duckdb_web_collect_file_stats",["string","boolean"],[e,t]);if(i!==0)throw new Error(z(this.mod,o,c))}exportFileStatistics(e){let[t,i,o]=Q(this.mod,"duckdb_web_export_file_stats",["string"],[e]);if(t!==0)throw new Error(z(this.mod,i,o));return new $r(this.mod.HEAPU8.subarray(i,i+o))}};var Gr=class{constructor(){this._bindings=null;this._nextMessageId=0}log(e){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:e},[])}sendOK(e){this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"OK",data:null},[])}failWith(e,t){let i={name:t.name,message:t.message,stack:t.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"ERROR",data:i},[])}async onMessage(e){switch(e.type){case"PING":this.sendOK(e);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(e,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(e.data[0],e.data[1],t=>{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"INSTANTIATE_PROGRESS",data:t},[])}),this.sendOK(e)}catch(t){console.log(t),this._bindings=null,this.failWith(e,t)}return;default:break}if(!this._bindings)return this.failWith(e,new Error("duckdb is not initialized"));try{switch(e.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(e);break;case"OPEN":{let t=e.data.path;t!=null&&t.startsWith("opfs://")&&(await this._bindings.prepareDBFileHandle(t,3),e.data.useDirectIO=!0),this._bindings.open(e.data),this.sendOK(e);break}case"DROP_FILE":this._bindings.dropFile(e.data),this.sendOK(e);break;case"DROP_FILES":this._bindings.dropFiles(e.data),this.sendOK(e);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(e);break;case"CONNECT":{let t=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"CONNECTION_INFO",data:t.useUnsafe((i,o)=>o)},[]);break}case"DISCONNECT":this._bindings.disconnect(e.data),this.sendOK(e);break;case"CREATE_PREPARED":{let t=this._bindings.createPrepared(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"PREPARED_STATEMENT_ID",data:t},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(e.data[0],e.data[1]),this.sendOK(e);break}case"RUN_PREPARED":{let t=this._bindings.runPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"RUN_QUERY":{let t=this._bindings.runQuery(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"SEND_PREPARED":{let t=this._bindings.sendPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER",data:t},[t.buffer]);break}case"START_PENDING_QUERY":{let t=this._bindings.startPendingQuery(e.data[0],e.data[1],e.data[2]),i=[];t&&i.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},i);break}case"POLL_PENDING_QUERY":{let t=this._bindings.pollPendingQuery(e.data),i=[];t&&i.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},i);break}case"CANCEL_PENDING_QUERY":{let t=this._bindings.cancelPendingQuery(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SUCCESS",data:t},[]);break}case"FETCH_QUERY_RESULTS":{let t=this._bindings.fetchQueryResults(e.data),i=t?[t.buffer]:[];this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_CHUNK",data:t},i);break}case"GET_TABLE_NAMES":{let t=this._bindings.getTableNames(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"TABLE_NAMES",data:t},[]);break}case"GLOB_FILE_INFOS":{let t=this._bindings.globFiles(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_INFOS",data:t},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_FILE_HANDLE":await this._bindings.registerFileHandleAsync(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(e.data[0],e.data[1]),this.sendOK(e);break;case"COPY_FILE_TO_BUFFER":{let t=this._bindings.copyFileToBuffer(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_BUFFER",data:t},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_OPFS_FILE_NAME":await this._bindings.registerOPFSFileName(e.data[0]),this.sendOK(e);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(e.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"TOKENIZE":{let t=this._bindings.tokenize(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SCRIPT_TOKENS",data:t},[]);break}}}catch(t){return console.log(t),this.failWith(e,t)}}};var Js=ds(Xs());var jr=class extends zr{constructor(e,t,i,o){super(e,t),this.mainModuleURL=i,this.pthreadWorkerURL=o}locateFile(e,t){if(e.endsWith(".wasm"))return this.mainModuleURL;if(e.endsWith(".worker.js")){if(!this.pthreadWorkerURL)throw new Error("Missing DuckDB worker URL!");return this.pthreadWorkerURL}throw new Error(`WASM instantiation requested unexpected file: prefix=${t} path=${e}`)}instantiateWasm(e,t){globalThis.DUCKDB_RUNTIME=this._runtime;let i=this.onInstantiationProgress;if(WebAssembly.instantiateStreaming)if(typeof TransformStream=="function"){let c=(async()=>{var j;let u=new Request(this.mainModuleURL),f=await fetch(u),l=f.headers.get("content-length"),p=l&&parseInt(l,10)||0,A=new Date,H={startedAt:A,updatedAt:A,bytesTotal:p||0,bytesLoaded:0},k={transform(Y,se){H.bytesLoaded+=Y.byteLength;let ue=new Date;if(ue.getTime()-H.updatedAt.getTime()<20){H.updatedAt=ue,se.enqueue(Y);return}for(let X of i)X(H);se.enqueue(Y)}},x=new TransformStream(k);return new Response((j=f.body)==null?void 0:j.pipeThrough(x),f)})();WebAssembly.instantiateStreaming(c,e).then(u=>{t(u.instance,u.module)})}else{console.warn("instantiating without progress handler since transform streams are unavailable");let o=new Request(this.mainModuleURL);WebAssembly.instantiateStreaming(fetch(o),e).then(c=>{t(c.instance,c.module)})}else if(typeof XMLHttpRequest=="function"){let o=new XMLHttpRequest,c=this.mainModuleURL,u=new Date,f={startedAt:u,updatedAt:u,bytesTotal:0,bytesLoaded:0};o.open("GET",c),o.responseType="arraybuffer",o.onerror=l=>{throw this.logger.log({timestamp:new Date,level:4,origin:3,topic:5,event:2,value:"Failed to load WASM: "+l}),new Error(l.toString())},o.onprogress=l=>{f.bytesTotal=l.total,f.bytesLoaded=l.loaded;let p=new Date;if(p.getTime()-f.updatedAt.getTime()<20){f.updatedAt=p;return}for(let A of i)A(f)},o.onload=()=>{WebAssembly.instantiate(o.response,e).then(l=>{t(l.instance,l.module)}).catch(l=>{throw this.logger.log({timestamp:new Date,level:4,origin:3,topic:5,event:2,value:"Failed to instantiate WASM: "+l}),new Error(l)})},o.send()}else console.warn("instantiating with manual fetch since streaming instantiation and xhrs are unavailable"),(async()=>{let c=new Request(this.mainModuleURL),f=await(await fetch(c)).arrayBuffer();WebAssembly.instantiate(f,e).then(l=>{t(l.instance,l.module)})})();return[]}};var Yr=class extends jr{constructor(e,t,i,o=null){super(e,t,i,o)}instantiateImpl(e){return(0,Js.default)({...e,instantiateWasm:this.instantiateWasm.bind(this),locateFile:this.locateFile.bind(this)})}};var Ye=ds(ei()),ti=function(r,e,t){var i;if((i=r==null?void 0:r.endpoint)!=null&&i.startsWith("http")){let o=`${r==null?void 0:r.endpoint}`,c=o.indexOf("://")+3;return o.substring(c)}else return r!=null&&r.endpoint?`${t}.${r==null?void 0:r.endpoint}`:`${t}.s3.amazonaws.com`};function eu(r,e,t){var c,u,f,l;let i=ri(e),o=i.path;return ni(r)&&(o=`/${i.bucket}${o}`),{url:o,query:"",host:ti(r,e,i.bucket),region:(c=r==null?void 0:r.region)!=null?c:"",service:"s3",method:t,accessKeyId:(u=r==null?void 0:r.accessKeyId)!=null?u:"",secretAccessKey:(f=r==null?void 0:r.secretAccessKey)!=null?f:"",sessionToken:(l=r==null?void 0:r.sessionToken)!=null?l:"",dateNow:new Date().toISOString().replace(/-/g,"").split("T")[0],datetimeNow:new Date().toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}function tu(r,e=!1){let t="0123456789ABCDEF",i="";for(let o=0;o<r.length;o++){let c=r[o];c>="A"&&c<="Z"||c>="a"&&c<="z"||c>="0"&&c<="9"||c=="_"||c=="-"||c=="~"||c=="."?i+=c:c=="/"?e?i+="%2F":i+=c:(i+="%",i+=t[c.charCodeAt(0)>>4],i+=t[c.charCodeAt(0)&15])}return i}function ru(r,e=null){var j;let t=(j=e==null?void 0:e.contentHash)!=null?j:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",i=new Map;i.set("x-amz-date",r.datetimeNow),i.set("x-amz-content-sha256",t),r.sessionToken&&i.set("x-amz-security-token",r.sessionToken);let o="";e!=null&&e.contentType&&(o+="content-type;"),o+="host;x-amz-content-sha256;x-amz-date",r.sessionToken&&(o+=";x-amz-security-token");let c=r.method+`
`+tu(r.url)+`
`+r.query;e!=null&&e.contentType&&(c+=`
content-type:`+(e==null?void 0:e.contentType)),c+=`
host:`+r.host+`
x-amz-content-sha256:`+t+`
x-amz-date:`+r.datetimeNow,r.sessionToken&&r.sessionToken.length>0&&(c+=`
x-amz-security-token:`+r.sessionToken),c+=`

`+o+`
`+t;let u=(0,Ye.sha256)(c),f=`AWS4-HMAC-SHA256
`+r.datetimeNow+`
`+r.dateNow+"/"+r.region+"/"+r.service+`/aws4_request
`+u,l="AWS4"+r.secretAccessKey,p=Ye.sha256.hmac.arrayBuffer(l,r.dateNow),A=Ye.sha256.hmac.arrayBuffer(p,r.region),H=Ye.sha256.hmac.arrayBuffer(A,r.service),k=Ye.sha256.hmac.arrayBuffer(H,"aws4_request"),x=Ye.sha256.hmac(k,f);return i.set("Authorization","AWS4-HMAC-SHA256 Credential="+r.accessKeyId+"/"+r.dateNow+"/"+r.region+"/"+r.service+"/aws4_request, SignedHeaders="+o+", Signature="+x),i}var nu=function(r,e,t,i=null,o=null){let c=eu(r,e,t),u={contentType:i,contentHash:o?Ye.sha256.hex(o):null};return ru(c,u)};function Re(r,e,t,i,o=null,c=null){(e!=null&&e.accessKeyId||e!=null&&e.sessionToken)&&(nu(e,t,i,o,c).forEach((f,l)=>{r.setRequestHeader(l,f)}),o&&r.setRequestHeader("content-type",o))}function ri(r){if(r.indexOf("s3://")!=0)throw new Error("URL needs to start with s3://");let e=r.indexOf("/",5);if(e==-1)throw new Error("URL needs to contain a '/' after the host");let t=r.substring(5,e);if(!t)throw new Error("URL needs to contain a bucket name");let i=r.substring(e);if(!i)throw new Error("URL needs to contain key");return{bucket:t,path:i}}function ni(r){var e;return!!((e=r==null?void 0:r.endpoint)!=null&&e.startsWith("http"))}function Te(r,e){let t=ri(e);return ni(r)?`${r==null?void 0:r.endpoint}/${t.bucket}`+t.path:"https://"+ti(r,e,t.bucket)+t.path}var su=7,si=/\/|\\/,N={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,_preparedHandles:{},_opfsRoot:null,getFileInfo(r,e){try{let t=N._fileInfoCache.get(e),[i,o,c]=Q(r,"duckdb_web_fs_get_file_info_by_id",["number","number"],[e,(t==null?void 0:t.cacheEpoch)||0]);if(i!==0)return null;if(c===0)return t;let u=z(r,o,c);te(r);try{let f=JSON.parse(u);if(f==null)return null;let l={...f,blob:null};return N._fileInfoCache.set(e,l),!N._files.has(l.fileName)&&N._preparedHandles[l.fileName]&&(N._files.set(l.fileName,N._preparedHandles[l.fileName]),delete N._preparedHandles[l.fileName]),l}catch(f){return console.warn(f),null}}catch(t){return console.log(t),null}},getGlobalFileInfo(r){var e;try{let[t,i,o]=Q(r,"duckdb_web_get_global_file_info",["number"],[((e=N._globalFileInfo)==null?void 0:e.cacheEpoch)||0]);if(t!==0)return null;if(o===0)return N._globalFileInfo;let c=z(r,i,o);te(r);let u=JSON.parse(c);return u==null?null:(N._globalFileInfo={...u,blob:null},N._globalFileInfo)}catch(t){return console.log(t),null}},async assignOPFSRoot(){N._opfsRoot||(N._opfsRoot=await navigator.storage.getDirectory())},async prepareFileHandles(r,e){if(e===3){await N.assignOPFSRoot();let t=async o=>{if(N._files.has(o))return{path:o,handle:N._files.get(o),fromCached:!0};let u=N._opfsRoot,f=o.slice(su),l=f;if(si.test(f)){let A=f.split(si);if(A.length===0)throw new Error(`Invalid path ${f}`);if(l=A[A.length-1],!l)throw new Error(`Invalid path ${f}. File Not Found.`);A.pop();for(let H of A)u=await u.getDirectoryHandle(H,{create:!0})}let p=await u.getFileHandle(l,{create:!1}).catch(A=>{if((A==null?void 0:A.name)==="NotFoundError")return console.debug(`File ${o} does not exists yet, creating...`),u.getFileHandle(l,{create:!0});throw A});try{let A=await p.createSyncAccessHandle();return N._preparedHandles[o]=A,{path:o,handle:A,fromCached:!1}}catch(A){throw new Error(A.message+":"+name)}},i=[];for(let o of r){let c=await t(o);i.push(c)}return i}throw new Error(`Unsupported protocol ${e} for paths ${r} with protocol ${e}`)},async prepareDBFileHandle(r,e){if(e===3&&this.prepareFileHandles){let t=[r,`${r}.wal`];return this.prepareFileHandles(t,e)}throw new Error(`Unsupported protocol ${e} for path ${r} with protocol ${e}`)},testPlatformFeature:(r,e)=>{switch(e){case 1:return typeof BigInt64Array<"u";default:return console.warn(`test for unknown feature: ${e}`),!1}},getDefaultDataProtocol(r){return 2},openFile:(r,e,t)=>{var i,o,c,u,f,l;try{N._fileInfoCache.delete(e);let p=N.getFileInfo(r,e);switch(p==null?void 0:p.dataProtocol){case 4:case 5:{if(t&1&&t&2)throw new Error(`Opening file ${p.fileName} failed: cannot open file with both read and write flags set`);if(t&32)throw new Error(`Opening file ${p.fileName} failed: appending to HTTP/S3 files is not supported`);if(t&2){let k=new XMLHttpRequest;if(p.dataProtocol==5?(k.open("HEAD",Te(p.s3Config,p.dataUrl),!1),Re(k,p.s3Config,p.dataUrl,"HEAD")):(k.open("HEAD",p.dataUrl,!1),p.bearerToken&&k.setRequestHeader("Authorization",`Bearer ${p.bearerToken}`)),k.send(null),k.status!=200&&k.status!=404)throw new Error(`Opening file ${p.fileName} failed: Unexpected return status from server (${k.status})`);if(k.status==404&&!(t&8||t&16))throw new Error(`Opening file ${p.fileName} failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag.`);let x=r._malloc(1),j=new Uint8Array;r.HEAPU8.set(j,x);let Y=r._malloc(3*8);return r.HEAPF64[(Y>>3)+0]=1,r.HEAPF64[(Y>>3)+1]=x,r.HEAPF64[(Y>>3)+2]=new Date().getTime()/1e3,Y}else if(!(t&1))throw new Error(`Opening file ${p.fileName} failed: unsupported file flags: ${t}`);let A=null,H=null;if(!p.forceFullHttpReads&&(p.reliableHeadRequests||!p.allowFullHttpReads))try{let k=new XMLHttpRequest;p.dataProtocol==5?(k.open("HEAD",Te(p.s3Config,p.dataUrl),!1),Re(k,p.s3Config,p.dataUrl,"HEAD")):(k.open("HEAD",p.dataUrl,!1),p.bearerToken&&k.setRequestHeader("Authorization",`Bearer ${p.bearerToken}`)),k.setRequestHeader("Range","bytes=0-"),k.send(null),A=null;try{A=k.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}if(A!==null&&k.status==206){let x=r._malloc(24);r.HEAPF64[(x>>3)+0]=+A,r.HEAPF64[(x>>3)+1]=0;let j=0;try{j=new Date((i=k.getResponseHeader("Last-Modified"))!=null?i:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(x>>3)+2]=+j,x}}catch(k){H=k,console.warn(`HEAD request with range header failed: ${k}`)}if(p.allowFullHttpReads){if(!p.forceFullHttpReads){let x=new XMLHttpRequest;p.dataProtocol==5?(x.open("GET",Te(p.s3Config,p.dataUrl),!1),Re(x,p.s3Config,p.dataUrl,"GET")):(x.open("GET",p.dataUrl,!1),p.bearerToken&&x.setRequestHeader("Authorization",`Bearer ${p.bearerToken}`)),x.responseType="arraybuffer",x.setRequestHeader("Range","bytes=0-0"),x.send(null);let j=null;try{j=x.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}let Y=j==null?void 0:j.split("/")[1],se=j,ue=null;if(Y!==void 0)ue=Y;else if(!p.reliableHeadRequests){let X=new XMLHttpRequest;p.dataProtocol==5?(X.open("HEAD",Te(p.s3Config,p.dataUrl),!1),Re(X,p.s3Config,p.dataUrl,"HEAD")):(X.open("HEAD",p.dataUrl,!1),p.bearerToken&&X.setRequestHeader("Authorization",`Bearer ${p.bearerToken}`)),X.setRequestHeader("Range","bytes=0-"),X.send(null),A=null;try{A=X.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}A!==null&&+A>1&&(ue=A)}if(x.status==206&&se!==null&&+se==1&&ue!==null){let X=r._malloc(24);r.HEAPF64[(X>>3)+0]=+ue,r.HEAPF64[(X>>3)+1]=0;let K=0;try{K=new Date((o=x.getResponseHeader("Last-Modified"))!=null?o:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(X>>3)+2]=+K,X}if(x.status==200&&se!==null&&A!==null&&+se==+A){console.warn(`fall back to full HTTP read for: ${p.dataUrl}`);let X=r._malloc(x.response.byteLength),K=new Uint8Array(x.response,0,x.response.byteLength);r.HEAPU8.set(K,X);let ae=r._malloc(3*8);r.HEAPF64[(ae>>3)+0]=x.response.byteLength,r.HEAPF64[(ae>>3)+1]=X;let oe=0;try{oe=new Date((c=x.getResponseHeader("Last-Modified"))!=null?c:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(ae>>3)+2]=+oe,ae}}let k=new XMLHttpRequest;if(p.dataProtocol==5?(k.open("GET",Te(p.s3Config,p.dataUrl),!1),Re(k,p.s3Config,p.dataUrl,"GET")):(k.open("GET",p.dataUrl,!1),p.bearerToken&&k.setRequestHeader("Authorization",`Bearer ${p.bearerToken}`)),k.responseType="arraybuffer",k.send(null),k.status==200){let x=r._malloc(k.response.byteLength),j=new Uint8Array(k.response,0,k.response.byteLength);r.HEAPU8.set(j,x);let Y=r._malloc(3*8);r.HEAPF64[(Y>>3)+0]=k.response.byteLength,r.HEAPF64[(Y>>3)+1]=x;let se=0;try{se=new Date((u=k.getResponseHeader("Last-Modified"))!=null?u:"").getTime()/1e3}catch{console.warn("Failed to get Last-Modified on request")}return r.HEAPF64[(Y>>3)+2]=+se,Y}}if(H!=null)throw new Error(`Reading file ${p.fileName} failed with error: ${H}`);return 0}case 2:{let A=(f=N._files)==null?void 0:f.get(p.fileName);if(A){let x=r._malloc(24);return r.HEAPF64[(x>>3)+0]=A.size,r.HEAPF64[(x>>3)+1]=0,r.HEAPF64[(x>>3)+2]=0,x}if(t&128)return 0;console.warn(`Buffering missing file: ${p.fileName}`);let H=r._malloc(3*8),k=r._malloc(1);return r.HEAPF64[(H>>3)+0]=1,r.HEAPF64[(H>>3)+1]=k,r.HEAPF64[(H>>3)+2]=0,H}case 3:{let A=(l=N._files)==null?void 0:l.get(p.fileName);if(!A)throw new Error(`No OPFS access handle registered with name: ${p.fileName}`);t&16&&A.truncate(0);let H=r._malloc(3*8),k=A.getSize();return r.HEAPF64[(H>>3)+0]=k,r.HEAPF64[(H>>3)+1]=0,r.HEAPF64[(H>>3)+2]=0,H}}}catch(p){console.error(p.toString()),ke(r,p.toString())}return 0},glob:(r,e,t)=>{var i;try{let o=z(r,e,t);if(o.startsWith("http")||o.startsWith("s3://")){let c=new XMLHttpRequest;if(o.startsWith("s3://")){let u=N.getGlobalFileInfo(r);c.open("HEAD",Te(u==null?void 0:u.s3Config,o),!1),Re(c,u==null?void 0:u.s3Config,o,"HEAD")}else{c.open("HEAD",o,!1);let u=N.getGlobalFileInfo(r);u!=null&&u.bearerToken&&c.setRequestHeader("Authorization",`Bearer ${u.bearerToken}`)}if(c.send(null),c.status!=200&&c.status!==206){if(!((i=N.getGlobalFileInfo(r))!=null&&i.allowFullHttpReads))return console.log(`HEAD request failed: ${o}, with full http reads are disabled`),0;let u=new XMLHttpRequest;if(o.startsWith("s3://")){let l=N.getGlobalFileInfo(r);u.open("GET",Te(l==null?void 0:l.s3Config,o),!1),Re(u,l==null?void 0:l.s3Config,o,"HEAD")}else{u.open("GET",o,!1);let l=N.getGlobalFileInfo(r);l!=null&&l.bearerToken&&u.setRequestHeader("Authorization",`Bearer ${l.bearerToken}`)}if(u.setRequestHeader("Range","bytes=0-0"),u.send(null),u.status!=200&&u.status!==206)return console.log(`HEAD and GET requests failed: ${o}`),0;let f=null;try{f=u.getResponseHeader("Content-Length")}catch{console.warn("Failed to get Content-Length on request")}f&&+f>1&&console.warn(`Range request for ${o} did not return a partial response: ${u.status} "${u.statusText}"`)}r.ccall("duckdb_web_fs_glob_add_path",null,["string"],[o])}else for(let[c]of N._files.entries()||[])c.startsWith(o)&&r.ccall("duckdb_web_fs_glob_add_path",null,["string"],[c])}catch(o){return console.log(o),ke(r,o.toString()),0}},checkFile:(r,e,t)=>{try{let i=z(r,e,t);if(i.startsWith("http")||i.startsWith("s3://")){let o=new XMLHttpRequest;if(i.startsWith("s3://")){let c=N.getGlobalFileInfo(r);o.open("HEAD",Te(c==null?void 0:c.s3Config,i),!1),Re(o,c==null?void 0:c.s3Config,i,"HEAD")}else{o.open("HEAD",i,!1);let c=N.getGlobalFileInfo(r);c!=null&&c.bearerToken&&o.setRequestHeader("Authorization",`Bearer ${c.bearerToken}`)}return o.send(null),o.status==206||o.status==200}else return N._files.has(i)}catch(i){return console.log(i),!1}return!1},syncFile:(r,e)=>{},closeFile:(r,e)=>{var i;let t=N.getFileInfo(r,e);N._fileInfoCache.delete(e);try{switch(t==null?void 0:t.dataProtocol){case 0:case 4:case 5:break;case 1:case 2:return;case 3:{let o=(i=N._files)==null?void 0:i.get(t.fileName);if(!o)throw new Error(`No OPFS access handle registered with name: ${t.fileName}`);return o.flush()}}}catch(o){console.log(o),ke(r,o.toString())}},dropFile:(r,e,t)=>{var c;let i=z(r,e,t),o=(c=N._files)==null?void 0:c.get(i);if(o){if(N._files.delete(i),o instanceof FileSystemSyncAccessHandle)try{o.flush(),o.close()}catch{throw new Error(`Cannot drop file with name: ${i}`)}o instanceof Blob}},truncateFile:(r,e,t)=>{var o;let i=N.getFileInfo(r,e);switch(i==null?void 0:i.dataProtocol){case 4:ke(r,"Cannot truncate a http file");return;case 5:ke(r,"Cannot truncate an s3 file");return;case 0:case 1:case 2:ke(r,"truncateFile not implemented");return;case 3:{let c=(o=N._files)==null?void 0:o.get(i.fileName);if(!c)throw new Error(`No OPFS access handle registered with name: ${i.fileName}`);return c.truncate(t)}}return 0},readFile(r,e,t,i,o){var c;if(i==0)return 0;try{let u=N.getFileInfo(r,e);switch(u==null?void 0:u.dataProtocol){case 4:case 5:{if(!u.dataUrl)throw new Error(`Missing data URL for file ${e}`);try{let f=new XMLHttpRequest;if(u.dataProtocol==5?(f.open("GET",Te(u==null?void 0:u.s3Config,u.dataUrl),!1),Re(f,u==null?void 0:u.s3Config,u.dataUrl,"GET")):(f.open("GET",u.dataUrl,!1),u.bearerToken&&f.setRequestHeader("Authorization",`Bearer ${u.bearerToken}`)),f.responseType="arraybuffer",f.setRequestHeader("Range",`bytes=${o}-${o+i-1}`),f.send(null),f.status==206||f.status==200&&i==f.response.byteLength&&o==0){let l=new Uint8Array(f.response,0,Math.min(f.response.byteLength,i));return r.HEAPU8.set(l,t),l.byteLength}else if(f.status==200){console.warn(`Range request for ${u.dataUrl} did not return a partial response: ${f.status} "${f.statusText}"`);let l=new Uint8Array(f.response,o,Math.min(f.response.byteLength-o,i));return r.HEAPU8.set(l,t),l.byteLength}else throw new Error(`Range request for ${u.dataUrl} did returned non-success status: ${f.status} "${f.statusText}"`)}catch(f){throw console.log(f),new Error(`Range request for ${u.dataUrl} failed with error: ${f}"`)}}case 2:{let f=(c=N._files)==null?void 0:c.get(u.fileName);if(!f)throw new Error(`No HTML5 file registered with name: ${u.fileName}`);let l=f.slice(o,o+i),p=new Uint8Array(new FileReaderSync().readAsArrayBuffer(l));return r.HEAPU8.set(p,t),p.byteLength}case 3:{let f=N._files.get(u.fileName);if(!f)throw new Error(`No OPFS access handle registered with name: ${u.fileName}`);let l=r.HEAPU8.subarray(t,t+i);return f.read(l,{at:o})}}return 0}catch(u){return console.log(u),ke(r,u.toString()),0}},writeFile:(r,e,t,i,o)=>{var u;let c=N.getFileInfo(r,e);switch(c==null?void 0:c.dataProtocol){case 4:return ke(r,"Cannot write to HTTP file"),0;case 5:{let f=r.HEAPU8.subarray(t,t+i),l=new XMLHttpRequest;return l.open("PUT",Te(c==null?void 0:c.s3Config,c.dataUrl),!1),Re(l,c==null?void 0:c.s3Config,c.dataUrl,"PUT","",f),l.send(f),l.status!==200?(ke(r,"Failed writing file: HTTP "+l.status),0):i}case 2:return ke(r,"cannot write using the html5 file reader api"),0;case 3:{let f=(u=N._files)==null?void 0:u.get(c.fileName);if(!f)throw new Error(`No OPFS access handle registered with name: ${c.fileName}`);let l=r.HEAPU8.subarray(t,t+i);return f.write(l,{at:o})}}return 0},getLastFileModificationTime:(r,e)=>{var i;let t=N.getFileInfo(r,e);switch(t==null?void 0:t.dataProtocol){case 2:{if(!((i=N._files)==null?void 0:i.get(t.fileName)))throw Error(`No handle available for file: ${t.fileName}`);return 0}case 4:case 5:return new Date().getTime()/1e3}return 0},progressUpdate:(r,e,t)=>{postMessage&&postMessage({requestId:0,type:"PROGRESS_UPDATE",data:{status:r?"completed":"in-progress",percentage:e,repetitions:t}})},checkDirectory:(r,e,t)=>{let i=z(r,e,t);return console.log(`checkDirectory: ${i}`),!1},createDirectory:(r,e,t)=>{let i=z(r,e,t);console.log(`createDirectory: ${i}`)},removeDirectory:(r,e,t)=>{let i=z(r,e,t);console.log(`removeDirectory: ${i}`)},listDirectoryEntries:(r,e,t)=>{let i=z(r,e,t);return console.log(`listDirectoryEntries: ${i}`),!1},moveFile:(r,e,t,i,o)=>{var l,p;let c=z(r,e,t),u=z(r,i,o),f=(l=N._files)==null?void 0:l.get(c);f!==void 0&&(N._files.delete(f),N._files.set(u,f));for(let[A,H]of((p=N._fileInfoCache)==null?void 0:p.entries())||[])if(H.dataUrl==c){N._fileInfoCache.delete(A);break}return!0},removeFile:(r,e,t)=>{},callScalarUDF:(r,e,t,i,o,c,u)=>{Gs(N,r,e,t,i,o,c,u)}};var Un=class extends Gr{postMessage(e,t){globalThis.postMessage(e,t)}async instantiate(e,t,i){return await new Yr(this,N,e,t).instantiate(i)}};function ii(){let r=new Un;globalThis.onmessage=async e=>{await r.onMessage(e.data)}}ii();return nc(iu);})();
/*! Bundled license information:

js-sha256/src/sha256.js:
  (**
   * [js-sha256]{@link https://github.com/emn178/js-sha256}
   *
   * @version 0.11.1
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2025
   * @license MIT
   *)
*/
//# sourceMappingURL=duckdb-browser-eh.worker.js.map
